,:<code> rstprofdata -m <system name> -l 3 -f backupFile </code>  if that does not wok then ty the following <code>  rstprofdata -m <system name> -l 2 -f backupFile </code> where <system name> is the managed system name. 
6100-09-12.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
6100-09-12.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
6100-09-12.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
6100-09-12.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
6100-09-12.txt:        Vital Product Database in the APPLIED state.</code>
6100-09-12.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
6100-09-12.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
6100-09-12.txt:</code>
6100-09-12.txt:    - Remove them all Comand is  sudo /usr/sbin/emgr -r -L {e-Fix Label}<code>sudo /usr/sbin/emgr -r -L IV85296s2a
6100-09-12.txt:sudo /usr/sbin/emgr -r -L 102m_ifix</code>
6100-09-12.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
6100-09-12.txt:  bos.aso                   6.1.9.45  COMMITTED  Active System Optimizer</code>
6100-09-12.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
6100-09-12.txt:sudo chown root:system /var/log/aso</code>
6100-09-12.txt:    - To export AIX 6.1 TL 09 SP12<code>sudo exportfs -i /prod/images/lppsrc/resources/aix-6100-09-12-1846</code>
6100-09-12.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
6100-09-12.txt:sudo mount pcdcunxaxap01:/prod/images/lppsrc/iresources/aix-6100-09-12-1846 /mnt/aixupdates</code>
6100-09-12.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
6100-09-12.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
6100-09-12.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
6100-09-12.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates</code>
6100-09-12.txt:        - Start patching<code>sudo install_all_updates -d . -c -r -V -Y</code>
6100-09-12.txt:        - Start patching using nohup<code>nohup sudo install_all_updates -d . -c -r -V -Y > /tmp/$(uname -n).tlupdate.log 2>&1 &</code>
6100-09-12.txt:        - Watch the progress<code>tail -f /tmp/$(uname -n).tlupdate.log</code>
6100-09-12.txt:    - More details on the arguments<code>d  ---> Location
6100-09-12.txt:Y  ---> Accept license agreements</code>
6100-09-12.txt:  - Remove the xmdaily entry from /etc/inittab.<code>sudo rmitab "xmdaily"</code> 
6100-09-12.txt:  - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
6100-09-12.txt:    - List any uncommitted LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
6100-09-12.txt:        Vital Product Database in the APPLIED state.</code>
6100-09-12.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
6100-09-12.txt:- On the Server to be patched, NFS mount the Openssl patch location <code> sudo mount pcdcunxaxap01:/prod/images/service-packs/LATEST-SSL-SSH /mnt/aixupdates </code>  cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to install the updates.
6100-09-12.txt:    - Install the iFix for ssl <code> sudo  emgr -e OpenSSL/openssl-1.0.2.1500-1.0.2o/ifix/openssl_fix28/102oa_ifix.180906.epkg.Z</code> Output should be success<code>Operation Summary
6100-09-12.txt:</code>
6100-09-12.txt:    - Install the iFix for ssh <code> sudo  emgr -e OpenSSH/OpenSSH_7.5.102.1500/iFix/openssh_fix12/15473_fix.180919.epkg.Z</code> Output should be success<code>Operation Summary
6100-09-12.txt:</code>
6100-09-12.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
6100-09-12.txt:    - Check system date and time<code>date </code> Verify against the expected results. 
6100-09-12.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
6100-09-12.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
6100-09-12.txt:  - Verify DS record matches the one that is present in the backup taken prior to the upgrade.<code>sudo grep DS /etc/mail/sendmail.cf
6100-09-12.txt:sudo grep DS /tmp/Pre_Upgrade_report/etc/mail/sendmail.cf</code>
6100-09-12.txt:  - Confirm that the SSH host keys are not overwritten. Login to pcdcunxaxap01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys. First backup the existing one<code>sudo rsync -avv /etc/ssh /root/etc/ssh.backup/</code>Restore<code>sudo rsync -avv /tmp/Pre_Upgrade_report/etc/ssh/ /etc/ssh/</code>
6100-09-12.txt:  - Check - Double Check  /etc/exports and verify that exported file systems are correctly mounted on the targed servers<code>cat /etc/exports </code> Logon to target destination servers and verify file is correctly mounted i Double Check This <code>cd {file system name}</code> <code> ls -lia</code>
7100-03-04.txt:    - Check NTP servers<code>sudo xntpdc -l</code>If you see server list as follows, we are good<code>client    penmsv01.emea.int.tenneco.com
7100-03-04.txt:client    pgnmsv01.amer.int.tenneco.com</code>
7100-03-04.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-03-04.txt:bos.mp64                                                 installp    IV41462s2a</code>
7100-03-04.txt:    - Remove them<code>sudo /usr/sbin/emgr -r -L EFIXname</code>Something like<code>xeerap01:/root> /usr/sbin/emgr -r -L IV41838s2a
7100-03-04.txt:xeerap01:/root> /usr/sbin/emgr -r -L IV41462s2a</code>
7100-03-04.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code>
7100-03-04.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-03-04.txt:  bos.aso                   7.1.2.15  COMMITTED  Active System Optimizer</code>
7100-03-04.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-03-04.txt:sudo chown root:system /var/log/aso</code>
7100-03-04.txt:    - To export AIX 7.1 TL 03 SP04<code>sudo exportfs -i /prod/images/lppsrc/710TL03-04</code>
7100-03-04.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-03-04.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL03-04 /mnt/aixupdates</code>
7100-03-04.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-03-04.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-03-04.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-03-04.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates
7100-03-04.txt:sudo install_all_updates -d . -c -r -V -Y</code>More details on the arguments
7100-03-04.txt:  - NOTE #<># Before Rebooting the server execute the following command to remove the xmdaily entry from /etc/inittab. This will prevent it from starting after reboot of the server <code> rmitab "xmdaily"</code>
7100-03-04.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-03-04.txt:    - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>/usr/esa/sbin/rmESAReminder</code>
7100-03-04.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-03-04.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-03-04.txt:  - Check the /etc/sendmail/mail/sedndmsil.cf configuration file for to see if the Smart mailer Relay "DS" has changed.<code>sudo grep DS /etc/mail/sendmail.cf</code>If the DS entry is blank then check the copy created when you performed the Configuration Backup in Step 2 above. Update the DS entry in the current /etc/sendmail/mail/sendmail.cf file. Do NOT Overlay the current sendmail.cf file as it is compiled for the new version of sendmail.
7100-03-04.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys<code>sudo cp -p BACKUPDIR/etc/ssh/ssh_host_dsa_key /etc/ssh/
7100-03-04.txt:sudo cp -p BACKUPDIR/etc/ssh/ssh_host_rsa_key.pub /etc/ssh/</code>BACKUPDIR is the directory you created by running the save_env.sh -- probably still in your home directory
7100-03-04.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL03-04' '-B' <code> sudo /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/{loosource that was exported for upgrade}' '-B' </code>  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL03-04' '-B'
7100-04-01.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the outpt should be <code>
7100-04-01.txt:        Vital Product Database in the APPLIED state.</code>
7100-04-01.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code> installp -c all</code>
7100-04-01.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-04-01.txt:bos.mp64                                                 installp    IV41462s2a</code>
7100-04-01.txt:    - Remove them<code>sudo /usr/sbin/emgr -r -L e-Fix Label</code>Something like<code>xeerap01:/root> /usr/sbin/emgr -r -L IV41838s2a
7100-04-01.txt:xeerap01:/root> /usr/sbin/emgr -r -L IV41462s2a</code>
7100-04-01.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-04-01.txt:  bos.aso                   7.1.2.15  COMMITTED  Active System Optimizer</code>
7100-04-01.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-04-01.txt:sudo chown root:system /var/log/aso</code>
7100-04-01.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> bootlist -m normal -o {hdisk from previous command{</code>
7100-04-01.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has boted correcly to the alternate disk. 
7100-04-01.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code> bootlist -m normal -o {hdisk from previous command}</code>
7100-04-01.txt:    - To export AIX 7.1 TL 04 SP01<code>sudo exportfs -i /prod/images/lppsrc/710TL04-01</code>
7100-04-01.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-04-01.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL04-01 /mnt/aixupdates</code>
7100-04-01.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-04-01.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-04-01.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-04-01.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates
7100-04-01.txt:sudo install_all_updates -d . -c -r -V -Y</code>More details on the arguments
7100-04-01.txt:  - NOTE #<># Before Rebooting the server execute the following command to remove the xmdaily entry from /etc/inittab. This will prevent it from starting after reboot of the server <code> rmitab "xmdaily"</code> 
7100-04-01.txt:    - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>/usr/esa/sbin/rmESAReminder</code>
7100-04-01.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the outpt should be <code>
7100-04-01.txt:        Vital Product Database in the APPLIED state.</code>
7100-04-01.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code> installp -c all</code>
7100-04-01.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-04-01.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-04-01.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-04-01.txt:  - Check the /etc/sendmail/mail/sedndmsil.cf configuration file for to see if the Smart mailer Relay "DS" has changed.<code>sudo grep DS /etc/mail/sendmail.cf</code>If the DS entry is blank then check the copy created when you performed the Configuration Backup in Step 2 above. Update the DS entry in the current /etc/sendmail/mail/sendmail.cf file. Do NOT Overlay the current sendmail.cf file as it is compiled for the new version of sendmail.
7100-04-01.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys<code>sudo cp -p BACKUPDIR/etc/ssh/ssh_host_dsa_key /etc/ssh/
7100-04-01.txt:sudo cp -p BACKUPDIR/etc/ssh/ssh_host_rsa_key.pub /etc/ssh/</code>BACKUPDIR is the directory you created by running the save_env.sh -- probably still in your home directory
7100-04-01.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL04-01' '-B' <code> sudo /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/{loosource that was exported for upgrade}' '-B' </code>  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL04-01' '-B'
7100-04-02.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
7100-04-02.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
7100-04-02.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
7100-04-02.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-04-02.txt:        Vital Product Database in the APPLIED state.</code>
7100-04-02.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-04-02.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-04-02.txt:bos.mp64                                                 installp    IV41462s2a</code>
7100-04-02.txt:    - Remove them<code>sudo /usr/sbin/emgr -r -L e-Fix Label</code>Something like<code>xeerap01:/root> /usr/sbin/emgr -r -L IV41838s2a
7100-04-02.txt:xeerap01:/root> /usr/sbin/emgr -r -L IV41462s2a</code>
7100-04-02.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-04-02.txt:  bos.aso                   7.1.2.15  COMMITTED  Active System Optimizer</code>
7100-04-02.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-04-02.txt:sudo chown root:system /var/log/aso</code>
7100-04-02.txt:    - To export AIX 7.1 TL 04 SP02<code>sudo exportfs -i /prod/images/lppsrc/710TL04-02</code>
7100-04-02.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-04-02.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL04-02 /mnt/aixupdates</code>
7100-04-02.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-04-02.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-04-02.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-04-02.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates
7100-04-02.txt:sudo install_all_updates -d . -c -r -V -Y</code>More details on the arguments
7100-04-02.txt:  - NOTE #<># Before Rebooting the server execute the following command to remove the xmdaily entry from /etc/inittab. This will prevent it from starting after reboot of the server <code>sudo rmitab "xmdaily"</code> 
7100-04-02.txt:    - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
7100-04-02.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the outpt should be <code>
7100-04-02.txt:        Vital Product Database in the APPLIED state.</code>
7100-04-02.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-04-02.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-04-02.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-04-02.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-04-02.txt:  - Check the /etc/sendmail/mail/sedndmsil.cf configuration file for to see if the Smart mailer Relay "DS" has changed.<code>sudo grep DS /etc/mail/sendmail.cf</code>If the DS entry is blank then check the copy created when you performed the Configuration Backup in Step 2 above. Update the DS entry in the current /etc/sendmail/mail/sendmail.cf file. Do NOT Overlay the current sendmail.cf file as it is compiled for the new version of sendmail.
7100-04-02.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys<code>sudo cp -p BACKUPDIR/etc/ssh/ssh_host_dsa_key /etc/ssh/
7100-04-02.txt:sudo cp -p BACKUPDIR/etc/ssh/ssh_host_rsa_key.pub /etc/ssh/</code>BACKUPDIR is the directory you created by running the save_env.sh -- probably still in your home directory
7100-04-02.txt:    - To export Efix's <code>sudo exportfs -i /prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied</code>
7100-04-02.txt:    - On the Server to be patched, NFS mount the lppsrc location<code>sudo mount  pgnmsv01:/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied /mnt/aixupdates</code>  To list all Efix's that need to be installed cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the example code that follows to install each E-Fix.
7100-04-02.txt:    - Install the E-fix <code>sudo emgr -e IV85296s2a.160616.epkg.Z -X 
7100-04-02.txt:sudo emgr -e IV84458s2a.160608.epkg.Z -X</code>The output for each E-Fix's should be similar to the following <code>+-----------------------------------------------------------------------------+
7100-04-02.txt:1                 IV85296s2a          INSTALL                SUCCESS</code> <code>sudo shutdown -Fr </code>**Be Sure to REBOOT the server after installing the E-Fix's. One of them requires a reboot to take effect.**
7100-04-02.txt:  - Unmount the file system <code> cd 
7100-04-02.txt:sudo umount /mnt/aixupdates</code>
7100-04-02.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL04-02' '-B' <code> sudo /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/{loosource that was exported for upgrade}' '-B' </code>  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL04-02' '-B'
7100-04-02.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/service-packs/710TL04-02-Efixes/bind-fix12' '-B' <code> s sudo /usr/sbin/rmnfsexp -d '/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied' '-B'</code>  example /usr/sbin/rmnfsexp -d '/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied' '-B'
7100-05-01.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
7100-05-01.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
7100-05-01.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
7100-05-01.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-01.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-01.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-01.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-05-01.txt:</code>
7100-05-01.txt:    - Remove them  sudo /usr/sbin/emgr -r -L e-Fix Label<code>sudo /usr/sbin/emgr -r -L IV85296s2a
7100-05-01.txt:sudo /usr/sbin/emgr -r -L IV84458s2a</code>
7100-05-01.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-05-01.txt:  bos.aso                   7.1.2.15  COMMITTED  Active System Optimizer</code>
7100-05-01.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-05-01.txt:sudo chown root:system /var/log/aso</code>
7100-05-01.txt:    - To export AIX 7.1 TL 05 SP01<code>sudo exportfs -i /prod/images/lppsrc/710TL05-01</code>
7100-05-01.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-05-01.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL05-01 /mnt/aixupdates</code>
7100-05-01.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-05-01.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-05-01.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-05-01.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates
7100-05-01.txt:sudo install_all_updates -d . -c -r -V -Y</code>More details on the arguments
7100-05-01.txt:  - NOTE #<># Before Rebooting the server execute the following command to remove the xmdaily entry from /etc/inittab. This will prevent it from starting after reboot of the server <code>sudo rmitab "xmdaily"</code> 
7100-05-01.txt:    - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
7100-05-01.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the outpt should be <code>
7100-05-01.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-01.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-01.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-05-01.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-05-01.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-05-01.txt:  - Check the /etc/sendmail/mail/sedndmsil.cf configuration file for to see if the Smart mailer Relay "DS" has changed.<code>sudo grep DS /etc/mail/sendmail.cf</code>If the DS entry is blank then check the copy created when you performed the Configuration Backup in Step 2 above. Update the DS entry in the current /etc/sendmail/mail/sendmail.cf file. Do NOT Overlay the current sendmail.cf file as it is compiled for the new version of sendmail.
7100-05-01.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys<code>sudo cp -p BACKUPDIR/etc/ssh/ssh_host_dsa_key /etc/ssh/
7100-05-01.txt:sudo cp -p BACKUPDIR/etc/ssh/ssh_host_rsa_key.pub /etc/ssh/</code>BACKUPDIR is the directory you created by running the save_env.sh -- probably still in your home directory
7100-05-01.txt:    - To export Efix's <code>sudo exportfs -i /prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied</code>
7100-05-01.txt:    - On the Server to be patched, NFS mount the lppsrc location<code>sudo mount  pgnmsv01:/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied /mnt/aixupdates</code>  To list all Efix's that need to be installed cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the example code that follows to install each E-Fix.
7100-05-01.txt:    - Install the E-fix <code>sudo emgr -e IV85296s2a.160616.epkg.Z -X 
7100-05-01.txt:sudo emgr -e IV84458s2a.160608.epkg.Z -X</code>The output for each E-Fix's should be similar to the following <code>+-----------------------------------------------------------------------------+
7100-05-01.txt:1                 IV85296s2a          INSTALL                SUCCESS</code> <code>sudo shutdown -Fr </code>**Be Sure to REBOOT the server after installing the E-Fix's. One of them requires a reboot to take effect.**
7100-05-01.txt:  - Unmount the file system <code> cd 
7100-05-01.txt:sudo umount /mnt/aixupdates</code>
7100-05-01.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL05-01' '-B' <code> sudo /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/{loosource that was exported for upgrade}' '-B' </code>  example /usr/sbin/rmnfsexp -d '/prod/images/lppsrc/710TL04-02' '-B'
7100-05-01.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  example /usr/sbin/rmnfsexp -d '/prod/images/service-packs/710TL04-02-Efixes/bind-fix12' '-B' <code> s sudo /usr/sbin/rmnfsexp -d '/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied' '-B'</code>  example /usr/sbin/rmnfsexp -d '/prod/images/service-packs/7100-04-02-1614-Efixes/Efix-To-Be-Applied' '-B'
7100-05-02.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
7100-05-02.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
7100-05-02.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
7100-05-02.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-02.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-02.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-02.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-05-02.txt:</code>
7100-05-02.txt:    - Remove them  sudo /usr/sbin/emgr -r -L e-Fix Label<code>sudo /usr/sbin/emgr -r -L IV85296s2a
7100-05-02.txt:sudo /usr/sbin/emgr -r -L IV84458s2a</code>
7100-05-02.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-05-02.txt:  bos.aso                   7.1.4.1  COMMITTED  Active System Optimizer</code>
7100-05-02.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-05-02.txt:sudo chown root:system /var/log/aso</code>
7100-05-02.txt:    - To export AIX 7.1 TL 05 SP01<code>sudo exportfs -i /prod/images/lppsrc/710TL05-02</code>
7100-05-02.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-05-02.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL05-02 /mnt/aixupdates</code>
7100-05-02.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-05-02.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-05-02.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-05-02.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates</code>
7100-05-02.txt:        - Start patching<code>sudo install_all_updates -d . -c -r -V -Y</code>
7100-05-02.txt:        - Start patching using nohup<code>nohup sudo install_all_updates -d . -c -r -V -Y > /tmp/$(uname -n).tlupdate.log 2>&1 &</code>
7100-05-02.txt:        - Watch the progress<code>tail -f /tmp/$(uname -n).tlupdate.log</code>
7100-05-02.txt:    - More details on the arguments<code>d  ---> Location
7100-05-02.txt:Y  ---> Accept license agreements</code>
7100-05-02.txt:  - Remove the xmdaily entry from /etc/inittab.<code>sudo rmitab "xmdaily"</code> 
7100-05-02.txt:  - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
7100-05-02.txt:    - List any uncommitted LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-02.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-02.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-02.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-05-02.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-05-02.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-05-02.txt:  - Verify DS record matches the one that is present in the backup taken prior to the upgrade.<code>sudo grep DS /etc/mail/sendmail.cf
7100-05-02.txt:sudo grep DS /tmp/Pre_Upgrade_report/etc/mail/sendmail.cf</code>
7100-05-02.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys. First backup the existing one<code>sudo rsync -avv /etc/ssh /root/etc/ssh.backup/</code>Restore<code>sudo rsync -avv /tmp/Pre_Upgrade_report/etc/ssh/ /etc/ssh/</code>
7100-05-03.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
7100-05-03.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
7100-05-03.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
7100-05-03.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-03.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-03.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-03.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-05-03.txt:</code>
7100-05-03.txt:    - Remove them all Comand is  sudo /usr/sbin/emgr -r -L {e-Fix Label}<code>sudo /usr/sbin/emgr -r -L IV85296s2a
7100-05-03.txt:sudo /usr/sbin/emgr -r -L 102m_ifix</code>
7100-05-03.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-05-03.txt:  bos.aso                   7.1.4.1  COMMITTED  Active System Optimizer</code>
7100-05-03.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-05-03.txt:sudo chown root:system /var/log/aso</code>
7100-05-03.txt:    - To export AIX 7.1 TL 05 SP03<code>sudo exportfs -i /prod/images/lppsrc/710TL05-03</code>
7100-05-03.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-05-03.txt:sudo mount pgnmsv01:/prod/images/lppsrc/710TL05-03 /mnt/aixupdates</code>
7100-05-03.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-05-03.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-05-03.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-05-03.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates</code>
7100-05-03.txt:        - Start patching<code>sudo install_all_updates -d . -c -r -V -Y</code>
7100-05-03.txt:        - Start patching using nohup<code>nohup sudo install_all_updates -d . -c -r -V -Y > /tmp/$(uname -n).tlupdate.log 2>&1 &</code>
7100-05-03.txt:        - Watch the progress<code>tail -f /tmp/$(uname -n).tlupdate.log</code>
7100-05-03.txt:    - More details on the arguments<code>d  ---> Location
7100-05-03.txt:Y  ---> Accept license agreements</code>
7100-05-03.txt:  - Remove the xmdaily entry from /etc/inittab.<code>sudo rmitab "xmdaily"</code> 
7100-05-03.txt:  - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
7100-05-03.txt:    - List any uncommitted LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-03.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-03.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-03.txt:- On the Server to be patched, NFS mount the Openssl patch location <code> sudo mount pgnmsv01:/prod/images/service-packs/LATEST-SSL-SSH /mnt/aixupdates </code>  cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to install the updates.
7100-05-03.txt:    - Install the iFix for ssl <code> sudo  emgr -e OpenSSL/openssl-1.0.2.1500-1.0.2o/ifix/openssl_fix28/102oa_ifix.180906.epkg.Z</code> Output should be success<code>Operation Summary
7100-05-03.txt:</code>
7100-05-03.txt:    - Install the iFix for ssh <code> sudo  emgr -e OpenSSH/OpenSSH_7.5.102.1500/iFix/openssh_fix12/15473_fix.180919.epkg.Z</code> Output should be success<code>Operation Summary
7100-05-03.txt:</code>
7100-05-03.txt:    - Restart SSH to activate the iFix <code> sudo stopsrc -s sshd </code> <code> sudo startsrc -s sshd </code> 
7100-05-03.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-05-03.txt:    - Check system date and time<code>date </code> Verify against the expected results. 
7100-05-03.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-05-03.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-05-03.txt:  - Verify DS record matches the one that is present in the backup taken prior to the upgrade.<code>sudo grep DS /etc/mail/sendmail.cf
7100-05-03.txt:sudo grep DS /tmp/Pre_Upgrade_report/etc/mail/sendmail.cf</code>
7100-05-03.txt:  - Confirm that the SSH host keys are not overwritten. Login to pgnmsv01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys. First backup the existing one<code>sudo rsync -avv /etc/ssh /root/etc/ssh.backup/</code>Restore<code>sudo rsync -avv /tmp/Pre_Upgrade_report/etc/ssh/ /etc/ssh/</code>
7100-05-03.txt:  - Check - Double Check  /etc/exports and verify that exported file systems are correctly mounted on the targed servers<code>cat /etc/exports </code> Logon to target destination servers and verify file is correctly mounted i Double Check This <code>cd {file system name}</code> <code> ls -lia</code>
7100-05-05.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> sudo bootlist -m normal -o {hdisk from previous command}</code>
7100-05-05.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code> Verify that the server has booted correcly to the alternate disk. 
7100-05-05.txt:  - Rest the bootlist or boot back to the original disk and reboot.  <code> lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code>sudo bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr </code>
7100-05-05.txt:    - List any uncommited LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-05.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-05.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-05.txt:    - List e-Fixes if any<code>sudo /usr/sbin/emgr -P</code>You should see something similar if the system has e-Fixes<code>xeerap01:/root> /usr/sbin/emgr -P
7100-05-05.txt:</code>
7100-05-05.txt:    - Remove them all Comand is  sudo /usr/sbin/emgr -r -L {e-Fix Label}<code>sudo /usr/sbin/emgr -r -L 15473_fix
7100-05-05.txt:sudo /usr/sbin/emgr -r -L 102oa_ifix</code>
7100-05-05.txt:    - Check if bos.aso is installed<code>lslpp -l bos.aso</code>If it exists, you should see something similar<code>lslpp -l bos.aso
7100-05-05.txt:  bos.aso                   7.1.4.1  COMMITTED  Active System Optimizer</code>
7100-05-05.txt:    - If it does, then make sure there is a log directory for it.<code>ls -ld /var/log/aso</code>If the directory does not exist, create it<code>sudo mkdir -p /var/log/aso
7100-05-05.txt:sudo chown root:system /var/log/aso</code>
7100-05-05.txt:    - To export AIX 7.1 TL 05 SP05<code>sudo exportfs -i /prod/images/service-packs/lppsrc/7100-05-05-1939</code>
7100-05-05.txt:    - To export AIX 7.1 TL 05 iFix <code>sudo exportfs -i /prod/images/service-packs/lppsrc/7100-05-05-iFix</code> exportfs -i /prod/images/service-packs/lppsrc/7100-05-05-iFix</code>
7100-05-05.txt:  - On the Server to be patched, NFS mount the lppsrc location<code>sudo mkdir -p /mnt/aixupdates
7100-05-05.txt:sudo mount pcdcunxaxap01:/prod/images/service-packs/lppsrc/7100-05-05-1939 /mnt/aixupdates</code>
7100-05-05.txt:      - Change to the mount point<code>cd /mnt/aixupdates</code>Invoke smitty<code>sudo smitty update_all</code>Then select "."
7100-05-05.txt:    - Perform a preview upgrade<code>cd /mnt/aixupdates
7100-05-05.txt:sudo install_all_updates -d . -c -p -r -V -Y</code>
7100-05-05.txt:    - If no errors found, perform the upgrade<code>cd /mnt/aixupdates</code>
7100-05-05.txt:        - Start patching<code>sudo install_all_updates -d . -c -r -V -Y</code>
7100-05-05.txt:        - Start patching using nohup<code>nohup sudo install_all_updates -d . -c -r -V -Y > /tmp/$(uname -n).tlupdate.log 2>&1 &</code>
7100-05-05.txt:        - Watch the progress<code>tail -f /tmp/$(uname -n).tlupdate.log</code>
7100-05-05.txt:    - More details on the arguments<code>d  ---> Location
7100-05-05.txt:Y  ---> Accept license agreements</code>
7100-05-05.txt:  - Adter he update completes check the oslevel. <code> oslevel -s </code> if it does not return <code>7100-05-05-1939M </code> then run steps 15 and 16 again. This will install Java8. When the update completes, run the oslevel check again <code> oslevel -s </code> it should now report back <code> 7100-05-05-1939 </code>
7100-05-05.txt:  - Remove the xmdaily entry from /etc/inittab.<code>sudo rmitab "xmdaily"</code> 
7100-05-05.txt:  - Run the following command to remove IBM Electrornic Service Agent Annoying Constant Reminder that fills root mail <code>sudo /usr/esa/sbin/rmESAReminder</code>
7100-05-05.txt:    - List any uncommitted LPPS <code>sudo installp -s</code> If there are no uncommitted LPP's the output should be <code>
7100-05-05.txt:        Vital Product Database in the APPLIED state.</code>
7100-05-05.txt:    - Commit all LPP's (if any) listed in output from installp -s commnd <code>sudo installp -c all</code>
7100-05-05.txt:- On the Server to be patched, cd out of the /mnt/aixupates directory and unmount it <code> cd </code> <code> sudo umount /mnt/aixupdates</code> Now NFS mount the AIX 7100-05-05 ifix patch location <code> sudo mount pcdcunxaxap01:/prod/images/service-packs/lppsrc/7100-05-05-iFix /mnt/aixupdates </code>  cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to install the updates.
7100-05-05.txt:    - Install iFix IJ21577 for Fibre Channel <code> sudo  emgr -e IJ21577s5a.191216.AIX71TL05SP05.epkg.Z</code> Output should be success<code>Operation Summary
7100-05-05.txt:</code>
7100-05-05.txt:  - After the upgrade has successfully completed, reboot the server to complete the upgrade<code>sudo shutdown -Fr</code>
7100-05-05.txt:    - Check system date and time<code>date </code> Verify against the expected results. 
7100-05-05.txt:    - Check oslevel<code>oslevel -s </code> Verify against the expected results. 
7100-05-05.txt:    - Check lppchk<code>sudo lppchk -vm3</code>No output is good.
7100-05-05.txt:  - Verify DS record matches the one that is present in the backup taken prior to the upgrade.<code>sudo grep DS /etc/mail/sendmail.cf
7100-05-05.txt:sudo grep DS /tmp/Pre_Upgrade_report/etc/mail/sendmail.cf</code>
7100-05-05.txt:  - Confirm that the SSH host keys are not overwritten. Login to pcdcunxaxap01, ssh to the server you just upgraded.<code> sudo ssh SERVERNAME ls -ld /tmp/</code>If successful, SSH keys were not over written, we are good. In case of failure due to SSH keys, Restore the SSH keys. First backup the existing one<code>sudo rsync -avv /etc/ssh /root/etc/ssh.backup/</code>Restore<code>sudo rsync -avv /tmp/Pre_Upgrade_report/etc/ssh/ /etc/ssh/</code>
7100-05-05.txt:  - Check - Double Check  /etc/exports and verify that exported file systems are correctly mounted on the targed servers<code>cat /etc/exports </code> Logon to target destination servers and verify file is correctly mounted i Double Check This <code>cd {file system name}</code> <code> ls -lia</code>
99migratebadetohmc.txt:   - Save your entries<code>
99migratebadetohmc.txt:Gateway address: 10.0.4.1</code>	
99migratebadetohmc.txt:    - Find the ibmvmc device's location code.  On the VIOS partition, access oem_setup_env shell, then run the following command as root<code>lscfg | grep ibmvmc0</code> The output shold resemble ibmvmc0 U7998.61X.100113A-V1-C2 Virtual Management Channel. Record the location code in the second column
99migratebadetohmc.txt:    - Stop IVM In the VIOS partition access oem_setup_env shell, then run the following command as root: <code>/usr/ios/lpm/sbin/lparmgr accessprocess stop</code>
99migratebadetohmc.txt:    - Remove the ibmvmc device and adapter <code>rmdev -dev ibmvmc0 </code>
99migratebadetohmc.txt:    - Access oem_setup_env shell, then run the following command as root: <code> drmgr -c slot -r -s drc_name_for_ibmvmc0</code>where drc_name_for_ibmvmc0is the location code found in step 5 I. 
99migratebadetohmc.txt:    - Wait up to 10 minutes for RMC to go active.  To check status of the RMC connection run the following command: <code>lssyscfg -m <SYSNAME> -r lpar -F rmc_state,rmc_ipaddr --filter lpar_ids=1</code> where <SYSNAME> is the system name. It will show "active" once the connection is established: active,x.x.x.x      
99migratebadetohmc.txt:   - Check adapter status From the VIOS Command line run the following command <code> $ lsdev -field name status physloc | grep vasi | grep C32</code> The results should be similiar to 
99migratebadetohmc.txt:     HMC CLI:<code>chsyscfg -m <system name> -r lpar -i lpar_id=1,msp=0</code> <code>chsyscfg -m <system name> -r lpar -i lpar_id=1,msp=1</code>
access-to-cdcfdc-data-centers.txt:<code>To: SFLD-SDCOperators@federalmogul.com
access-to-cdcfdc-data-centers.txt:Your contact Information.</code>
accessconsole.txt:<code>
accessconsole.txt:</code>
add-change-vg.txt:  - lsvg srmvg01 output<code>
add-change-vg.txt:FS SYNC OPTION:     no</code>
add-change-vg.txt:  - lsvg -p srmvg01 output<code>
add-change-vg.txt:hdisk3            active            1618        0           00..00..00..00..00</code>
add-change-vg.txt:  - Generate the commands to migrate one lv from each hdisk to hdisk11.<code>
add-change-vg.txt:for disk in $(lsvg -p srmvg01 | grep ^hdisk | awk '{print $1}'  ); do lspv -M ${disk} | head -1; done | awk '{print $NF}' | grep lv | sed "s;:;/;g" | awk '{print "sudo migratelp "$NF" hdisk11"}'</code><code>
add-change-vg.txt:sudo migratelp qsrlv12/454 hdisk11</code>
add-change-vg.txt:  - Once the migration of lv is completed and we are sure that we have at least 1 pp free in each hdisk, Execute the below command to **change the small VG to a BIG VG**<code>
add-change-vg.txt:sudo chvg -B srmvg01</code>
add-change-vg.txt:  - Output of chvg -B command<code>
add-change-vg.txt:        can include up to 64 physical volumes with 2032 physical partitions each.</code>
add-static-route.txt:  - First check from NIM server whether the destination IP network is available or not<code>netstat -rn</code>
add-static-route.txt:    - If no then please do the following.<code>sudo chdev -l inet0 -a route=net,-netmask,255.255.255.0,,static IP,NIMbck gateway</code>e.g.<code>sudo chdev -l inet0 -a route=net,-netmask,255.255.255.0,,10.128.40.0,10.32.60.1</code>
add-static-route.txt:  - After the above step please check once.<code>lsattr -El inet0</code>the output will look something like this<code>authm         65536                                              Authentication Methods              True
add-static-route.txt:route         net,-hopcount,0,,0,10.0.48.1                       Route                               True</code>
add_pttusers.txt:  * Create these users<code>sudo mkuser "id=6951" "pgrp=taunix"  "home=/home/hilla016" "gecos=Andy Hill=FM-PTT"    hilla016 
add_pttusers.txt:sudo mkuser "id=6699" "pgrp=taunix"  "home=/home/leedsn16" "gecos=Nathan Leeds=FM-PTT"    leedsn16</code>
add_pttusers.txt:<code>echo "hilla016:saTxrfVn.jGMs"| sudo chpasswd -e</code>
add_pttusers.txt:<code>echo "labrar29:saEVc4lmoEEFY" | sudo chpasswd -e</code>
add_pttusers.txt:<code>echo "leedsn16:saTLnaGYqOo7Q" | sudo chpasswd -e</code>
add_pttusers.txt:  * Set to no change at first login<code>sudo pwdadm -c hilla016 
add_pttusers.txt:sudo pwdadm -c leedsn16</code>
add_pttusers.txt:  * Create these users<code>sudo useradd -g taunix -d /home/hilla016 -c "Andy Hill " -m -u 6951 hilla016
add_pttusers.txt:sudo useradd -g taunix -d /home/leedsn16 -c "Andy Hill " -m -u 6699 leedsn16</code>
add_pttusers.txt:<code>echo "hilla016:saTxrfVn.jGMs"| sudo chpasswd -e</code>
add_pttusers.txt:<code>echo "labrar29:saEVc4lmoEEFY" | sudo chpasswd -e</code>
add_pttusers.txt:<code>echo "leedsn16:saTLnaGYqOo7Q" | sudo chpasswd -e</code>
add_pttusers.txt:  * Set the password expiration<code><code>sudo chage -I -1 -m 0 -M 60 -E -1 hilla016
add_pttusers.txt:sudo chage -I -1 -m 0 -M 60 -E -1 leedsn16</code>
add_pttusers.txt:  * Unlock the ids<code>sudo usermod -U hilla016
add_pttusers.txt:sudo passwd -u leedsn16</code>
adddskvio.txt:  - Find out the parent VIO server(s). In most cases a frame only one VIO server. If it has more than one - use the following script to find the parent VIO server. Login to one of the VIO server(s). In this case, the VIO client is taitc102 and the VIO servers are vio60/70.<code>export PS1="$LOGNAME on "`hostname`":"'$PWD> '
adddskvio.txt:/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>Look for the VIO guest<code>grep dehrdb01 /var/tmp/viostgconfig.out | head -4
adddskvio.txt:hdiskpower244:00f72d67fc45e258:000190103339:188E:34526:9:vhost5:taitc102:hdisk527:hdisk561</code>This means vio60 does provide storage to taitc102.
adddskvio.txt:  - Once the disks are presented, document the VIO storage config<code>/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>
adddskvio.txt:  - Assign pvid to the disks. DO NOT COPY PASTE THIS ONTO PUTTY !!<code>for disk in hdisk28 hdisk29 hdisk30 hdisk31
adddskvio.txt:done</code>
adddskvio.txt:  - Find out the vhost number<code>grep -w dehrdb01 /var/tmp/viostgconfig.out | head -1 | awk -F: '{print $7}'
adddskvio.txt:vhost3</code>
adddskvio.txt:  - Assign the disks to VIO guest<code>for disk in hdisk28 hdisk29
adddskvio.txt:done</code>
adddskvio.txt:  - Discover the devices on the VIO guest. Login to taitc102 as root<code>lspv > /var/tmp/lspv.before.out
adddskvio.txt:> hdisk30         00f72d677fce7abd                    None</code>Please make sure to check and match the pvids.
adddskviocluster.txt:  - Find out the parent VIO server(s). In most cases a frame only has one set of VIO cluster(s). If it has more than one - use the following script to find the parent VIO server. Login to one of the VIO server(s). In this case, the VIO client is taitc102 and the VIO servers are vio60/70.<code>export PS1="$LOGNAME on "`hostname`":"'$PWD> '
adddskviocluster.txt:/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>Look for the VIO guest<code>grep taitc102 /var/tmp/viostgconfig.out | head -4
adddskviocluster.txt:hdiskpower244:00f72d67fc45e258:000190103339:188E:34526:9:vhost5:taitc102:hdisk527:hdisk561</code>This means vio60 does provide storage to taitc102.
adddskviocluster.txt:    - taprvio60 <code>/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>
adddskviocluster.txt:    - taprvio70 <code>/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>
adddskviocluster.txt:    - In this case, these are the disks presented on vio60<code>lspv | grep hdiskpower30[3-7]
adddskviocluster.txt:hdiskpower307   none                                None</code>
adddskviocluster.txt:    - Document the LUN numbers and EMC frame serial numbers for these devices.<code>/usr/local/scripts/lsvpcfg.sh | grep hdiskpower30[3-7]
adddskviocluster.txt:hdiskpower307:None:000190103339:18CA:34526:hdisk654:hdisk669:none</code>The 3rd field is the frame serial number and the 4th is LUN number
adddskviocluster.txt:    - Now login to taprvio70 and confirm the LUN numbers match the devicefilenames. If this is not matching, please correct it before proceeding it becomes a nightmare dealing with a VIO cluster with different devicefilenames.<code>/usr/local/scripts/lsvpcfg.sh | egrep "18BA|18BE|18C2|18C6|18CA"
adddskviocluster.txt:hdiskpower307:None:000190103339:18CA:34526:hdisk654:hdisk669:none</code>As you see the devicefiles are all matching. This is good.
adddskviocluster.txt:  - Turn off reserve_lock policy on the devices<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:hdiskpower307 changed</code>Verify the policy<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:reserve_lock no Reserve device on open True</code>
adddskviocluster.txt:  - Assign pvid to the disks from one of the VIO servers.DO NOT COPY PASTE THIS ONTO PUTTY !!<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:hdiskpower307 changed</code>Verify the pvids<code>lspv | grep hdiskpower30[3-7]
adddskviocluster.txt:hdiskpower307   00f72d677fce7abd                    None</code>
adddskviocluster.txt:  - Now login to the other VIO server and turn off reserve lock.<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:hdiskpower307 changed</code>Verify<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:reserve_lock no Reserve device on open True</code>
adddskviocluster.txt:  - On the second VIO server, read pvids from the disks.<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:hdiskpower307 Available</code>Verify the pvids.<code>lspv | grep hdiskpower30[3-7]
adddskviocluster.txt:hdiskpower307   00f72d677fce7abd                    None</code>Everything looks good so far.
adddskviocluster.txt:    - taprvio60<code>grep -w taitc102 /var/tmp/viostgconfig.out | head -1 | awk -F: '{print $7}'
adddskviocluster.txt:vhost5</code>
adddskviocluster.txt:    - taprvio70<code>grep -w taitc102 /var/tmp/viostgconfig.out | head -1 | awk -F: '{print $7}'
adddskviocluster.txt:vhost5</code>
adddskviocluster.txt:    - taprvio60 as padmin<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:vtscsi307 Available</code>
adddskviocluster.txt:    - taprvio70 as padmin<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:vtscsi307 Available</code>
adddskviocluster.txt:  - Discover the devices on the VIO guest. Login to taitc102 as root<code>lspv > /var/tmp/lspv.before.out
adddskviocluster.txt:> hdisk30         00f72d677fce7abd                    None</code>Please make sure to check and match the pvids.
adddskviocluster.txt:    - taprvio40 <code>/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>
adddskviocluster.txt:    - taprvio41 <code>/usr/local/scripts/lsdiskcfg > /var/tmp/viostgconfig.out</code>
adddskviocluster.txt:    - In this case, these are the disks presented<code>egrep "hdisk79|hdisk80|hdisk81|hdisk82" /var/tmp/viostgconfig.out
adddskviocluster.txt:hdisk82:34522:taprvio40:free:None</code>
adddskviocluster.txt:  - Change reserve_policy on the devices<code>for dev in  hdisk79 hdisk80 hdisk81 hdisk82
adddskviocluster.txt:hdisk82 changed</code>Do this on both the VIO servers.
adddskviocluster.txt:  - Assign pvid to the disks from one of the VIO servers.DO NOT COPY PASTE THIS ONTO PUTTY !!<code>for dev in  hdisk79 hdisk80 hdisk81 hdisk82
adddskviocluster.txt:hdisk82 changed</code>
adddskviocluster.txt:  - On the second VIO server, read pvids from the disks.<code>for dev in  hdisk79 hdisk80 hdisk81 hdisk82
adddskviocluster.txt:hdisk82 Available</code>
adddskviocluster.txt:    - taprvio60<code>grep -w taitc102 /var/tmp/viostgconfig.out | head -1 | awk -F: '{print $7}'
adddskviocluster.txt:vhost5</code>
adddskviocluster.txt:    - taprvio70<code>grep -w taitc102 /var/tmp/viostgconfig.out | head -1 | awk -F: '{print $7}'
adddskviocluster.txt:vhost5</code>
adddskviocluster.txt:    - taprvio60 as padmin<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:vtscsi307 Available</code>
adddskviocluster.txt:    - taprvio70 as padmin<code>for disk in hdiskpower303 hdiskpower304 hdiskpower305 hdiskpower306 hdiskpower307
adddskviocluster.txt:vtscsi307 Available</code>
adddskviocluster.txt:  - Discover the devices on the VIO guest. Login to taitc102 as root<code>lspv > /var/tmp/lspv.before.out
adddskviocluster.txt:> hdisk30         00f72d677fce7abd                    None</code>Please make sure to check and match the pvids.
aix_disaster_recovery_os_levels.txt:^Server Name^OS^Operating System Level^Microcode Level^Allocated^Free^Used^% Free^Model^Serial^Type^MHz^# Proc^Memory^OV Rel^App^Description^Location^
aix_mpio_-_how_to_check_if_round_robin_is_enabled_and_working.txt:  - To check the device attributes, we would<code>lsattr -El hdisk9 -a algorithm -a reserve_policy
aix_mpio_-_how_to_check_if_round_robin_is_enabled_and_working.txt:reserve_policy no_reserve  Reserve Policy True</code>
aix_mpio_-_how_to_check_if_round_robin_is_enabled_and_working.txt:      - In order to find out the real story,<code>echo "scsidisk hdiskX" | sudo kdb | egrep "algorithm|reserve_lock"</code>You would see something like this<code>uchar algorithm = 0x0;
aix_mpio_-_how_to_check_if_round_robin_is_enabled_and_working.txt:uchar  reserve_lock       = 0x0;</code>Here<code>
aix_mpio_-_how_to_check_if_round_robin_is_enabled_and_working.txt:reserve_lock 0x0 -- Means reserve_lock is  off, 0x1 -- Means reserve lock is turned on</code>
aix_operating_system_levels.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |
aix_operating_system_levels.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|534|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |
aix_operating_system_levels.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |
aix_operating_system_levels.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |
aixedition.txt:  - To list the current edition on the system<code>sudo chedition l
aixedition.txt:chedition -list</code>One of the following outputs will be returned:<code>express | standard | enterprise</code>
aixedition.txt:  - To change to the standard edition, type:<code>sudo chedition s<code>To change to express<code>sudo chedition -exp</code>
aixmigration.txt:  - Login to the respective NIM server ( pgnmsv01 OR penmsv01. Note that pgnmsv01 must be used for all systems other than the systems in Interexion). Define a variable with the target servername.<code>export nimclient_to="hostname"</code>Change the hostname accordingly.
aixmigration.txt:  - Prepare the NIM environment for the migration<code>sudo nim -o bos_inst -a source=rte -a lpp_source=710TL02-02_lppsrc -a spot=710TL02-02_spot -a no_client_boot=yes -a accept_licenses=yes ${nimclient_to}</code>
aixmigration.txt:  - At this menu, change the language to the correct one. set the "Select Editon to standard, and select the right disk<code>                            Installation and Settings
aixmigration.txt:>>> Choice [0]:</code>
aixmigration.txt:  - At this installation menu, choose **1**<code>                            Migration Installation Confirmation
aixmigration.txt:>>> Choice [1]:</code>
aixmigration.txt:  - At this menu choose **0**<code>                                  Migration Confirmation
aixmigration.txt:>>> Choice[0]:</code>Ignore the error like this if installing a system outside of Lincolnshire<code>nim_rcmd: getaddrinfo: Hostname and service name not provided or found
aixmigration.txt:   0042-006 nimclient: (To_Master) rcmd Error 0</code>
aixmigration.txt:  - The system reboots after the install. Check the oslevel<code>oslevel -s
aixmigration.txt:6100-07-05-1228</code>
aixmigration.txt:  - Restore the SSH host & root keys<code>sudo YOURID/Pre_Upgrade/aix_upgrade/copy-etcssh-keys.sh</code>
aixmigration.txt:    - Login to NIM server taitc118, reset the NIM client and de-allocate all resources<code>nim -F -o reset taerm057
aixmigration.txt:nim -o deallocate -a subclass=all taerm057</code>
aixmigration.txt:    - Login to the local server where we setup the temporary NFS server and unexport the filesystems<code>exportfs -u /prod/nim/resources/spot/610TL07-05_spot/usr
aixmigration.txt:exportfs -u /export/nim/scripts/taerm057.script</code>
aixmigration.txt:    - Remove the bootp configuration<code>cat /etc/bootptab | grep -v ^taerm057 > /var/tmp/bootptab
aixmigration.txt:cp /var/tmp/bootptab /etc/bootptab</code>
aixmigration.txt:    - Kill the bootpd process<code>kill $(ps -ef | grep bootpd | grep -v grep | awk '{print $2}')</code>Inetd will restart it when needed.
aixmigration.txt:    - Remove the temporary files we copied on taerm055<code>rm /tftpboot/taerm057.emea.int.tenneco.com
aixmigration.txt:rm /export/nim/scripts/taerm057.script</code>
aixmigration.txt:  - Login to the NIM server and perform a NIM client cleanup<code>sudo nim -F -o reset <hostname>
aixmigration.txt:sudo nim -o deallocate -a subclass=all</code>
aixnetworkmemparam.txt:  - Configure VMO parameters<code>sudo vi /etc/tunables/nextboot</code><code>vmo:
aixnetworkmemparam.txt:        aio_maxreqs = "1024"</code>
aixsaninitconfig.txt:  - Configure FC SCSI attributes<code>for FSCSI in $(lscfg | grep fscsi | awk '{print $2}' )
aixsaninitconfig.txt:done</code>
ansibleinstall.txt:  - Enable ansible9 local repository<code>cat << EOF | sudo tee -a /etc/yum.repos.d/local.repo
ansibleinstall.txt:EOF</code>
ansibleinstall.txt:  - Install<code>sudo yum -y install ansible</code>
backout-ssl-ssh.txt:    - Change Directory to the hstname-SAVED-SSH-timestamp direcotey and run the ls -liaR command to verify that the /var/ssl /etc/ssh director ies was succesfully copied.<code> ls -liaR {hstname-SAVED-SSH-timestamp} </code> The output shoudl look like the following <code> sudo ls -liatR
backout-ssl-ssh.txt:total 0 </code>
backout-ssl-ssh.txt:    - On the Server to be patched, create the target location<code>sudo mkdir -p /mnt/aixupdates </code>
backout-ssl-ssh.txt:    - On the Server to be patched, NFS mount the lppsrc location <code> sudo mount pgnmsv01:/prod/images/service-packs/LATEST-SSL-SSH /mnt/aixupdates </code> 
backout-ssl-ssh.txt:    - To list the  software  that n eed to be installed cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to preview  the install.
backout-ssl-ssh.txt:<code> sudo geninstall -e '/var/adm/ras/install_all_updates.log' -u -I " -J -w" -Z  'openssh.base.client openssh.base.server openssh.license openssh.man.en_US openssh.msg.EN_US'</code>
backout-ssl-ssh.txt:The outlooh should look like this<code>
backout-ssl-ssh.txt:        See /var/adm/ras/config.diff for details.</code>
backout-ssl-ssh.txt:<code>sudo geninstall -e '/var/adm/ras/install_all_updates.log' -u -I "-J -w" -Z   'openssl.license openssl.man.en_US openssl.base'</code>The output should look
backout-ssl-ssh.txt: like the following<code> 
backout-ssl-ssh.txt:</code>
backout-ssl-ssh.txt:    - Install the OLD SSL version first because ssh depends on it. <code>sudo installp -aXYd OpenSSL/OpenSSL_1.0.1.500/openssl-1.0.1.500 openssl</code> <code>The output should look like the following<code> +-----------------------------------------------------------------------------+
backout-ssl-ssh.txt:</code>
backout-ssl-ssh.txt:    - Install the OLD Version of ssh  <code>sudo installp -aXYd OpenSSH/openssh.6.0.0.6202 openssh</code> A success full installation output shoudl look like this <code> +-----------------------------------------------------------------------------+
backout-ssl-ssh.txt:openssh.base.server         6.0.0.6202      ROOT        APPLY       SUCCESS </code>
backout-ssl-ssh.txt:   -  Change directory to the backup directory that you creatred as part of the update in /usr/local/update called hostname-SAVED-SSH-timestamp  This was created if you followed the upgrade instructions.  Example <code> cd  atlasdr-SAVED-SSH.20180110163306</code> 
backout-ssl-ssh.txt:    - Reset the /vad/ssl directory <code> sudo sh ./Recover-SSL</code>
backout-ssl-ssh.txt:    - Reset the /etc/ssh directory <code> sudo  sh ./Recover-SSH</code> 
backout-ssl-ssh.txt:    - Restart SSH to activate  the update and the change to thr  sshd_config file <code>sudo stopsrc -s sshd </code> <code>sudo startsrc -s sshd </code> 
backout-ssl-ssh.txt:  - Unmount the file system <code> cd </code> <code> sudo umount /mnt/aixupdates</code>
backout-ssl-ssh.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  <code> /usr/sbin/rmnfsexp -d '/prod/images/service-packs/LATEST-SSL-SSH' '-B' </code>
backupconfig-hpux.txt:  - Copy the pre-upgrade directory from NIM server pgnmsv01<code>scp -r pgnmsv01:/prod/images/scripts/Pre_Upgrade /var/tmp/Pre_Upgrade</code>
backupconfig-hpux.txt:  - Execute the saveenv script<code>cd /var/tmp/Pre_Upgrade/hpux_upgrade
backupconfig-hpux.txt:./save_env.sh</code>
backupconfig-hpux.txt:  - Copy the backed up files to NIM server<code>scp -r <directoryname> pgnmsv01:/preupgrade/reports/</code>
backupconfig.txt:  - Export a variable that contains the host being patched<code>export host2patch="HOSTNAME"</code>
backupconfig.txt:  - Copy the pre-upgrade directory to the system that is being patched.<code>sudo rsync -a /prod/images/scripts/Pre_Upgrade/ ${host2patch}:/tmp/Pre_Upgrade/</code>
backupconfig.txt:  - Execute the ''saveenv'' script to document system configuration. First remove any old repositories<code>ssh ${host2patch} sudo rm -rf /tmp/Pre_Upgrade_report</code><code>ssh ${host2patch} "sudo /tmp/Pre_Upgrade/aix_upgrade/save_env.sh"</code>
backupconfig.txt:  - Copy the pre-upgrade backup files to NIM<code>sudo rsync -a ${host2patch}:/tmp/Pre_Upgrade_report/ /preupgrade/reports/${host2patch}-pre_upgrade.$(date +%Y%m%d)/</code>
backupconfig.txt:  - Make sure that the lppchk.vm3 is 0 byte files<code>ls -l /preupgrade/reports/${host2patch}-pre_upgrade.$(date +%Y%m%d)/pre-lppchk/lppchk-vm3</code>
backupconfig.txt:  - Export a variable that contains the host being patched<code>export host2patch="HOSTNAME"</code>
backupconfig.txt:  - Login to the host and preserve a copy of rootvg<code>ssh ${host2patch}</code>
backupconfig.txt:  - Disable the alt_disk_copy script<code>sudo touch /var/adm/do_not_run_alt_disk_until_removed_driv</code>
backupconfig.txt:  - Create an at job to remove this file after 7 days<code>echo "rm /var/adm/do_not_run_alt_disk_until_removed_driv" | sudo at now + 7 day</code>
backupconfig.txt:      - Find out the alt_disk<code>lspv | grep rootvg
backupconfig.txt:hdisk1          00021ffb513aff90                    altinst_rootvg</code>In this case hdisk1 is the alternate boot disk.
backupconfig.txt:      - Remove the current alt_disk_rootvg<code>sudo alt_rootvg_op -X altinst_rootvg</code>
backupconfig.txt:      - Create a fresh alt_disk_copy<code>sudo alt_disk_copy -B -d hdiskX</code>-B option makes sure that it does not execute a bootlist - FYI.
backupconfig.txt:      - Check altinst_rootvg has been created<code>lspv | grep rootvg</code>Make sure you see the altinst_rootvg in the output
backupconfig.txt:      - Unmirror the VG<code>sudo unmirrorvg rootvg hdiskX</code>
backupconfig.txt:      - Remove the disk from rootvg<code>sudo reducevg rootvg hdiskX</code>
backupconfig.txt:      - Clear the VGDA<code>sudo chpv -c hdiskX</code>
backupconfig.txt:      - Set the bootlist to boot from the remaining disk<code>sudo bootlist -m normal hdiskY</code>
backupconfig.txt:      - Perform an alt_disk_copy to the alt_rootvg<code>sudo alt_disk_copy -B -d hdiskX</code>
backupconfig.txt:  - Export a variable that contains the host being patched<code>export host2patch="HOSTNAME"</code>
backupconfig.txt:  - Find the mksysb target for the server to be patched<code>mksysbtarget=$(ssh ${host2patch} grep ^mksysb /var/adm/.information| awk -F: '{print $2}' )</code>
backupconfig.txt:  - Check a latest copy ( max 2-3 days old ) exists<code>ssh ${mksysbtarget} sudo ls -l /mksysb-images/bos.obj.${host2patch}.gz</code>**Check the timestamp on the file, it has to be less than 3 days old.**  If the mksysb is 3 days old or less Proceed to Step 6
backupconfig.txt:   - On the server to be upgraded create a new mksysb image. When the command has completed proceed to next step  <code>ssh ${host2patch} sudo /usr/local/scripts/mksysb.sh adhoc </code> 
backupconfig.txt:  - On NIM server copy the mksysb image to the repository - This is the backout of last resort. <code>ssh ${mksysbtarget} "sudo cp -p /mksysb-images/bos.obj.${host2patch}.gz /preupgrade/mksysb/"</code>
backuphmc.txt:Examle of Splash Panel information (or lshmc -V output) <code> sudo ssh hscroot@tgprhmcN lshmc -V </code>
backuphmc.txt:<code>"version= Version: 7
backuphmc.txt: "</code>
bladevionovlantagging.txt:      - Create an aggregate of the HEA adapters<code> mkvdev -lnagg ent0 -attr backup_adapter=ent1
bladevionovlantagging.txt:et8</code>
bladevionovlantagging.txt:      - Create an aggregate on the Other two ethernet interfaces<code>mkvdev -lnagg ent2 -attr backup_adapter=ent3
bladevionovlantagging.txt:et9</code>
bladevionovlantagging.txt:      - Configure an IP on the aggregate<code>mktcpip -hostname taprvio18 -inetaddr 10.32.50.93 -interface en8  -netmask 255.255.255.0 -gateway 10.32.50.1 -start</code>
bladevionovlantagging.txt:      - Create a SEA adapter on the aggregate that we just made<code>mkvdev -sea ent9 -vadapter ent4 -default ent4 -defaultid 1
bladevionovlantagging.txt:et10</code>
bladevionovlantagging.txt:      - Configure the backup IP on the SEA<code>oem_setup_env</code>And<code>chdev -l enX -a netaddr=A.B.C.D -a netmask=255.255.255.0 -a state=up</code>
bladevionovlantagging.txt:      - Increase the memory of the VIO lpar to atleast 6G<code>Command to be added until then do it via the WebUI</code>
bladevionovlantagging.txt:      - Create an aggregate for the public network<code>mkvdev -lnagg entK -attr backup_adapter=entL</code>
bladevionovlantagging.txt:      - Create an aggregate for the backup network<code>mkvdev -lnagg entM -attr backup_adapter=entN</code>
bladevionovlantagging.txt:      - Create SEA for public network<code>mkvdev -sea entX -vadapter entY -default entY -defaultid 1 -attr ha_mode=auto ctl_chan=entZ netaddr=10.56.1.1</code>netaddr is the default gateway SEA will ping periodically. defaultid must match the VLAN id of the default Virtual NIC
bladevionovlantagging.txt:      - Create SEA for backup network<code>mkvdev -sea entA -vadapter entB -default entB -defaultid 2 -attr ha_mode=auto ctl_chan=entC netaddr=10.56.12.1</code>netaddr is the default gateway SEA will ping periodically. defaultid must match the VLAN id of the default Virtual NIC
bladevionovlantagging.txt:      - Assign IP address on the public SEA<code>mktcpip -hostname <hostname> -inetaddr A.B.C.D -interface enX  -netmask xxx.xxx.xxx.y -gateway aa.bb.cc.e -start</code>
bladevionovlantagging.txt:      - Assign IP address on the backup SEA<code>oem_setup_env</code><code>chdev -l en10 -a netaddr=E.F.G.H -a netmask=255.255.255.0 -a state=up</code>
bladeviovlantagging-frame-dmz.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
bladeviovlantagging-frame-dmz.txt:    - Remove all network device files<code>for dev in $(lsdev -C | grep ^en | awk '{print $1}' )
bladeviovlantagging-frame-dmz.txt:done</code>
bladeviovlantagging-frame-dmz.txt:    - Run cfgmgr<code>cfgmgr</code>
bladeviovlantagging-frame-dmz.txt:    - Front-end network<code>mkvdev -lnagg ent0 ent4 -attr mode=8023ad</code>Creates ent10
bladeviovlantagging-frame-dmz.txt:    - Front end SEA<code>mkvdev -sea ent10 -vadapter ent8 -default ent8 -defaultid 1 -attr ha_mode=auto ctl_chan=ent9</code>Creates ent11
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>vfcmap -vadapter vfchost0 -fcp fcs0
bladeviovlantagging-frame-paap3p01-mmd.txt:vfcmap -vadapter vfchost1 -fcp fcs1</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>c0507607cd0e0000
bladeviovlantagging-frame-paap3p01-mmd.txt:c0507607cd0e0006</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>en0: flags=1e084863,480<UP,BROADCAST,NOTRAILERS,RUNNING,SIMPLEX,MULTICAST,GROUPRT,64BIT,CHECKSUM_OFFLOAD(ACTIVE),CHAIN>
bladeviovlantagging-frame-paap3p01-mmd.txt:         tcp_sendspace 262144 tcp_recvspace 262144 rfc1323 1</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>Routing tables
bladeviovlantagging-frame-paap3p01-mmd.txt:::1%1              ::1%1             UH       41  16755009 lo0      -      -</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>hdisk15         00c9f3a00dedcdc2                    pujmvg01        active
bladeviovlantagging-frame-paap3p01-mmd.txt:hdisk29         00c9f3a00de868bd                    altinst_rootvg</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>hdiskpower7:34526:paap3p01-FO:N/A:vhost3:00c9f3a00dedcdc2:000198700301:05D6
bladeviovlantagging-frame-paap3p01-mmd.txt:hdiskpower83:138097:paap3p01-FO:N/A:vhost3:00c9f3a00de868bd:000198700301:07FC</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>taprvio20:/usr/local/scripts#./lsdiskcfg | grep paap3p01
bladeviovlantagging-frame-paap3p01-mmd.txt:hdiskpower83:138097:paap3p01-FO:N/A:vhost3:00c9f3a00de868bd:000198700301:07FC</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>altinst_rootvg
bladeviovlantagging-frame-paap3p01-mmd.txt:swvg01</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>lsvg -l rootvg
bladeviovlantagging-frame-paap3p01-mmd.txt:sysdump1            sysdump    32      32      1    open/syncd    N/A</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>lsvg -l pujmvg01
bladeviovlantagging-frame-paap3p01-mmd.txt:loglv00             jfs2log    1       1       1    open/syncd    N/A</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>lsvg -l edivg01
bladeviovlantagging-frame-paap3p01-mmd.txt:fslv02              jfs2       640     640     3    open/syncd    /testcopygentran</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>lsvg -l swvg01
bladeviovlantagging-frame-paap3p01-mmd.txt:fslv03              jfs2       32      32      1    open/syncd    /oracle</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>df -k | grep :
bladeviovlantagging-frame-paap3p01-mmd.txt:tapr1d01:/ADK   109576192  49536776   55%     1292     1% /ADK</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paap3p01:/root>cat /etc/exports
bladeviovlantagging-frame-paap3p01-mmd.txt:/comm -sec=sys:none,rw,access=pgscdb01:tapr1d01:gblap04:paerap01:paerap02:paerap03:paerap04:pagi3p01:paerap05:paerap06:paerap07</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>pagi3p01:/root>df -k | grep :
bladeviovlantagging-frame-paap3p01-mmd.txt:paap3p01bck:/taedi61   167903232  49170748   71%  1252348    10% /taedi61</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>pgscdb01:/root>df -k | grep :
bladeviovlantagging-frame-paap3p01-mmd.txt:paap3p01:/comm/edi/out    58916864   7025320   89%    31227     2% /comm/edi/out</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>tapr1d01:-TARGET-PTA-SERVER:/root>df -k | grep :
bladeviovlantagging-frame-paap3p01-mmd.txt:paap3p01:/comm    58916864   7025396   89%    31225     2% /comm</code>
bladeviovlantagging-frame-paap3p01-mmd.txt:<code>paerap01:/root>df -k | grep :
bladeviovlantagging-frame-paap3p01-mmd.txt:paap3p01:/comm    58916864   7025364   89%    31228     2% /comm</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>taprvio140:Adapter_ID=10 peerap99-mmd:Adapter_ID=4
bladeviovlantagging-frame-peerap99-mmd.txt:taprvio141:Adapter_ID=11 peerap99-mmd:Adapter_ID=7</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>vfcmap -vadapter vfchost4 -fcp fcs0
bladeviovlantagging-frame-peerap99-mmd.txt:vfcmap -vadapter vfchost5 -fcp fcs1</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>c0507607cd0e0010
bladeviovlantagging-frame-peerap99-mmd.txt:c0507607cd0e0016</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>ifconfig -a
bladeviovlantagging-frame-peerap99-mmd.txt:         tcp_sendspace 131072 tcp_recvspace 131072 rfc1323 1</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>netstat -rn
bladeviovlantagging-frame-peerap99-mmd.txt:::1%1              ::1%1             UH       18  52936330 lo0      -      -</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>lspv
bladeviovlantagging-frame-peerap99-mmd.txt:hdisk25         00c9f3a0f1ab26d2                    nfsvg01         active</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>lsdev -Cc disk
bladeviovlantagging-frame-peerap99-mmd.txt:hdisk25 Available  Virtual SCSI Disk Drive</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>hdiskpower4:138105:peerap99-TA2-CI/NFS:N/A:vhost10:00c9f3a0ac249194:000190103339:1236
bladeviovlantagging-frame-peerap99-mmd.txt:hdiskpower27:34526:peerap99-TA2-CI/NFS:N/A:vhost10:00c9f3a0f1ac7380:000198700301:0575</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>lsvg
bladeviovlantagging-frame-peerap99-mmd.txt:nfsvg01</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>lsvg -l rootvg
bladeviovlantagging-frame-peerap99-mmd.txt:loglv00             jfslog     1       1       1    open/syncd    N/A</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>lsvg -l nfsvg01
bladeviovlantagging-frame-peerap99-mmd.txt:fslv02              jfs2       400     800     7    open/syncd    /sapsoft</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>/usr/sap/trans
bladeviovlantagging-frame-peerap99-mmd.txt:All x(systems)</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>df -k | grep :
bladeviovlantagging-frame-peerap99-mmd.txt:pgadap01:/sapmedia   592445440  64762152   90%  1263915     9% /sapmedia</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>peerap99:/root>cat /etc/exports
bladeviovlantagging-frame-peerap99-mmd.txt:/usr/sap/trans -sec=sys:krb5p:krb5i:krb5:dh,rw,access=peerap09bck:deerap99bck:xeerdb99:qeerdb01:TEPR2A01:TEPR2A02:TEPR2A03:TEDV2D01:tedv2d03:xeerdb02bck:deerdb01:xeerdb09:qeerap01:peerap01bck:peerap02bck:peerap03bck:peerap04bck:peerap05bck:peerap06bck:tedv2d03bck:xeerap01bck:xeerap02bck:peerap07bck:peerap08bck:deerap01:deerap01bck:pgadap01:xeerdb02,root=peerap09bck:deerap99bck:xeerdb99:qeerdb01:TEPR2A01:TEPR2A02:TEPR2A03:TEDV2D01:tedv2d03:xeerdb02bck:deerdb01:xeerdb09:qeerap01:peerap01bck:peerap02bck:peerap03bck:peerap04bck:peerap05bck:peerap06bck:tedv2d03bck:xeerap01bck:xeerap02bck:peerap07bck:peerap08bck:deerap01:deerap01bck:pgadap01:xeerdb02</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>for i in peerap09bck TEPR2A01 TEPR2A02 TEPR2A03 peerap01bck peerap02bck peerap03bck peerap04bck peerap05bck peerap06bck peerap07bck peerap08bck pgadap01
bladeviovlantagging-frame-peerap99-mmd.txt:done</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>----peerap09bck---
bladeviovlantagging-frame-peerap99-mmd.txt:TEPR2D01bck:/FDSTLIB      524288    430796   18%       50     1% /FDSTLIB</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>for i in peerap09bck TEPR2A01 TEPR2A02 TEPR2A03 tepr2e01 peerap01bck peerap02bck peerap03bck peerap04bck peerap05bck peerap06bck peerap07bck peerap08bck pgadap01
bladeviovlantagging-frame-peerap99-mmd.txt:done</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>---peerap09bck---
bladeviovlantagging-frame-peerap99-mmd.txt:TEPR2D01bck:/sapcomm     5242880   1851964   65%      827     1% /sapcomm</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>for i in peerap09bck TEPR2A01 TEPR2A02 TEPR2A03 peerap01bck peerap02bck peerap03bck peerap04bck peerap05bck peerap06bck pgadap01 peerap07bck peerap08bck peerdb98bck peerdb99bck
bladeviovlantagging-frame-peerap99-mmd.txt:done</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>---peerap09bck---
bladeviovlantagging-frame-peerap99-mmd.txt:tepr2d01bck:/sapmnt/TA2    28311552  17667628   38%   336221     8% /sapmnt/TA2</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>for i in peerap09bck TEPR2A01 TEPR2A02 TEPR2A03 peerap01bck peerap02bck peerap03bck peerap04bck peerap05bck peerap06bck peerap07bck peerap08bck pgadap01
bladeviovlantagging-frame-peerap99-mmd.txt:done</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>---peerap09bck---
bladeviovlantagging-frame-peerap99-mmd.txt:TEPR2D01bck:/sapmnt/TA2/global/docwh    46792704  46785048    1%       76     1% /sapmnt/TA2/global/docwh</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>for i in peerap09bck deerap99bck qeerdb01 TEPR2A01 TEPR2A02 TEPR2A03 TEDV2D01 deerdb01 qeerap01 peerap01bck peerap02bck peerap03bck peerap04bck peerap05bck peerap06bck peerap07bck peerap08bck deerap01 deerap01bck pgadap01
bladeviovlantagging-frame-peerap99-mmd.txt:done</code>
bladeviovlantagging-frame-peerap99-mmd.txt:<code>---peerap09bck---
bladeviovlantagging-frame-peerap99-mmd.txt:TEPR2D01bck:/usr/sap/trans   173015040  23701424   87%   278519     6% /usr/sap/trans</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lsdev -Cc disk | grep SSD
bladeviovlantagging-frame-peerdb99-mmd.txt:hdisk5 Available 07-00-00 SAS RAID 0 SSD Array</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>mkvg -y pagevg01 -s 512 hdisk1 hdisk2</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>for i in 1 2 3 4 5 6 7 8 9 10
bladeviovlantagging-frame-peerdb99-mmd.txt:done</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>extendvg pagevg01 hdisk4 hdisk5</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>nohup mirrorvg pagevg01 hdisk4 hdisk5 &</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>ps -ef | grep stor
bladeviovlantagging-frame-peerdb99-mmd.txt:    root 2622004       1   0   Oct 24      -  0:19 storapid start -name storapid</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>kill `ps -ef | grep stor | awk '{print $2}'`</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lslpp -l | grep -i -E "symcli|emc|power" | grep -v IBM
bladeviovlantagging-frame-peerdb99-mmd.txt:  EMC.Symmetrix.fcp.rte      6.0.0.0  COMMITTED  EMC Symmetrix FCP Support</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>geninstall -pu -I "p -J -w" -Z -f File 2>&1
bladeviovlantagging-frame-peerdb99-mmd.txt:    SYMCLI.THINCORE.rte</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>storapid:2:once:/usr/storapi/bin/stordaemon start storapid
bladeviovlantagging-frame-peerdb99-mmd.txt:rmitab storapid</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>sudo mkdir -p /mnt/emc ;sudo  mount pgnmsv01/prod/images/EMC /mnt/emc</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>sudo installp -acX -d /mnt/emc/ODM/$(oslevel)-latest EMC.Symmetrix.aix.rte EMC.CLARiiON.aix.rte EMC.CLARiiON.fcp.MPIO.rte EMC.Symmetrix.fcp.MPIO.rte</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lslpp -l | grep -i -E "symcli|emc|power" | grep -v IBM
bladeviovlantagging-frame-peerdb99-mmd.txt:                             6.0.0.3  COMMITTED  EMC Symmetrix FCP MPIO Support</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>shutdown -Fr</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>grep TZ /etc/environment
bladeviovlantagging-frame-peerdb99-mmd.txt:TZ=NFT-1DFT,M3.5.0,M10.5.0</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>cat /etc/ntp.conf
bladeviovlantagging-frame-peerdb99-mmd.txt:server 10.1.1.2</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>sudo stopsrc -s xntpd</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>sudo chrctcp -S -a xntpd</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lssrc -s xntpd</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>date</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>date ; sudo ntpdate -u 10.1.1.1 ; date</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>sudo xntpdc -l
bladeviovlantagging-frame-peerdb99-mmd.txt:client    itcrtcor02.amer.int.tenneco.com</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>bootlist -m normal -o</code> 
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>bootlist -m normal hdisk0 hdisk3</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>for i in fcs0 fcs1 fcs2 fcs3 fcs4 fcs5 fcs6 fcs7
bladeviovlantagging-frame-peerdb99-mmd.txt:done</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>for i in fcs0 fcs1 fcs2 fcs3 fcs4 fcs5 fcs6 fcs7
bladeviovlantagging-frame-peerdb99-mmd.txt:done</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>shutdown -Fr</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lsdev -Ccdisk | grep MPIO | awk '{print $1}' | xargs -n1 sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -l</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>for vgname in $(cat lsvg.txt)
bladeviovlantagging-frame-peerdb99-mmd.txt:done</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>importvg -y binvg01 00c9f3a08b272067
bladeviovlantagging-frame-peerdb99-mmd.txt:importvg -y datavg08 00ca6ffeb7e5e77c</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>9117-MMA - remove the entry</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>9117-MMD - make this entry permanent</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>rmitab cron:23456789:respawn:/usr/sbin/cron</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>Swap IP addresses  peerdb99 <<------>> xeerdb99</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>mkitab cron:23456789:respawn:/usr/sbin/cron</code>
bladeviovlantagging-frame-peerdb99-mmd.txt:<code>lsdev -Ccdisk | grep -i defined | awk '{print $1}' | xargs -n1 sudo rmdev -dl
bladeviovlantagging-frame-peerdb99-mmd.txt:</code>
bladeviovlantagging-frame-peerdb99.txt:<code>umount /oracle/TA2/sapbackup
bladeviovlantagging-frame-peerdb99.txt:umount /sapmnt/TA2</code>
bladeviovlantagging-frame-peerdb99.txt:<code>rmitab cron</code>
bladeviovlantagging-frame-peerdb99.txt:<code>/oracle/TA2/sapbackup:
bladeviovlantagging-frame-peerdb99.txt:        options         = rw,rsize=32768,wsize=32768,hard,intr</code>
bladeviovlantagging-frame-peerdb99.txt:<code>/sapmnt/TA2:
bladeviovlantagging-frame-peerdb99.txt:        account         = false</code>      
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>taprvio140:Adapter_ID=8 tepr2e01-mmd:Adapter_ID=4
bladeviovlantagging-frame-tepr2e01-mmd.txt:taprvio141:Adapter_ID=9 tepr2e01-mmd:Adapter_ID=7</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>vfcmap -vadapter vfchost2 -fcp fcs0
bladeviovlantagging-frame-tepr2e01-mmd.txt:vfcmap -vadapter vfchost3 -fcp fcs1</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>c0507607cd0e0008		
bladeviovlantagging-frame-tepr2e01-mmd.txt:c0507607cd0e000e</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>TEPR2E01(root):/root $(EU EDI Prod) ifconfig -a
bladeviovlantagging-frame-tepr2e01-mmd.txt:         tcp_sendspace 131072 tcp_recvspace 131072 rfc1323 1</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>Routing tables
bladeviovlantagging-frame-tepr2e01-mmd.txt:::1%1              ::1%1             UH       40  58350204 lo0      -      -</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>hdisk3          00c9f3a00de460df                    rootvg          active
bladeviovlantagging-frame-tepr2e01-mmd.txt:hdisk23         00c9f3a0febed2c1                    pujmvg          active</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>taprvio20:/root#grep -i tepr2e01 /usr/local/scripts/file_systems.txt
bladeviovlantagging-frame-tepr2e01-mmd.txt:hdiskpower66:34526:tepr2e01-FO:N/A:vhost4:00c9f3a0fec46bdb:000198700301:0EED</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>TEPR2E01(root):/root $(EU EDI Prod) lsvg
bladeviovlantagging-frame-tepr2e01-mmd.txt:pujmvg</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>rootvg:
bladeviovlantagging-frame-tepr2e01-mmd.txt:livedump            jfs2       1       1       1    open/syncd    /var/adm/ras/livedump</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>edivg:
bladeviovlantagging-frame-tepr2e01-mmd.txt:loglv01             jfs2log    1       1       1    open/syncd    N/A</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>pujmvg:
bladeviovlantagging-frame-tepr2e01-mmd.txt:fslv02              jfs2       96      96      1    open/syncd    /oracle/PUJM/data2</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>TEPR2E01(root):/root $(EU EDI Prod) df -k | grep :
bladeviovlantagging-frame-tepr2e01-mmd.txt:TEPR2D01:/sapcomm     5242880   1854036   65%      826     1% /sapcomm</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>TEPR2E01(root):/root $(EU EDI Prod) cat /etc/exports
bladeviovlantagging-frame-tepr2e01-mmd.txt:/appl/platinum/autocomm -sec=sys:krb5p:krb5i:krb5:dh:none,rw,access=TEPR2D01:TEDV2E01:peerap01:peerap04,root=TEPR2D01:TEDV2E01:peerap01:peerap04</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>peerap99:/root>df -k | grep :
bladeviovlantagging-frame-tepr2e01-mmd.txt:pgadap01:/sapmedia   592445440  64762152   90%  1263915     9% /sapmedia</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>peerap01:/root> df -k | grep :
bladeviovlantagging-frame-tepr2e01-mmd.txt:tepr2e01:/appl/platinum/autocomm    25231360   2820620   89%     1474     1% /appl/platinum/autocomm</code>
bladeviovlantagging-frame-tepr2e01-mmd.txt:<code>peerap04:/root> df -k | grep :
bladeviovlantagging-frame-tepr2e01-mmd.txt:tepr2e01:/appl/platinum/autocomm    25231360   2820616   89%     1474     1% /appl/platinum/autocomm</code>
bladeviovlantagging-frame-vio20-21.txt:<code>grep -i paap3p01 file_systems.txt | cut -d: -f1 | while read line
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower7 hdiskpower8 hdiskpower9 hdiskpower32 hdiskpower33 hdiskpower34 hdiskpower36 hdiskpower38 hdiskpower39 hdiskpower42 hdiskpower43 hdiskpower44 hdiskpower45 hdiskpower82 hdiskpower83
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower4 hdiskpower5 hdiskpower35 hdiskpower37 hdiskpower92 hdiskpower93 hdiskpower94 hdiskpower95 hdiskpower96 hdiskpower46 hdiskpower47 hdiskpower48 hdiskpower49 hdiskpower50 hdiskpower51 hdiskpower76 hdiskpower18 hdiskpower19 hdiskpower20 hdiskpower21 hdiskpower22 hdiskpower23 hdiskpower24 hdiskpower25 hdiskpower26 hdiskpower27
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower86 hdiskpower87 hdiskpower28 hdiskpower29 hdiskpower30 hdiskpower31 hdiskpower40 hdiskpower41 hdiskpower62 hdiskpower63 hdiskpower64 hdiskpower65 hdiskpower66
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower7 hdiskpower8 hdiskpower9 hdiskpower32 hdiskpower33 hdiskpower34 hdiskpower36 hdiskpower38 hdiskpower39 hdiskpower42 hdiskpower43 hdiskpower44 hdiskpower45 hdiskpower82 hdiskpower83
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower4 hdiskpower5 hdiskpower35 hdiskpower37 hdiskpower92 hdiskpower93 hdiskpower94 hdiskpower95 hdiskpower96 hdiskpower46 hdiskpower47 hdiskpower48 hdiskpower49 hdiskpower50 hdiskpower51 hdiskpower76 hdiskpower18 hdiskpower19 hdiskpower20 hdiskpower21 hdiskpower22 hdiskpower23 hdiskpower24 hdiskpower25 hdiskpower26 hdiskpower27
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame-vio20-21.txt:<code>for i in hdiskpower86 hdiskpower87 hdiskpower28 hdiskpower29 hdiskpower30 hdiskpower31 hdiskpower40 hdiskpower41 hdiskpower62 hdiskpower63 hdiskpower64 hdiskpower65 hdiskpower66
bladeviovlantagging-frame-vio20-21.txt:done</code>
bladeviovlantagging-frame.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
bladeviovlantagging-frame.txt:    - Remove all network device files<code>for dev in $(lsdev -C | grep ^en | awk '{print $1}' )
bladeviovlantagging-frame.txt:done</code>
bladeviovlantagging-frame.txt:    - Run cfgmgr<code>cfgmgr</code>
bladeviovlantagging-frame.txt:    - Front-end network<code>mkvdev -lnagg ent0,ent1,ent4,ent5 -attr mode='8023ad'</code>Creates ent10
bladeviovlantagging-frame.txt:    - Backup network   <code>mkvdev -lnagg ent2,ent3,ent6,ent7 -attr mode='8023ad'</code>Creates ent11
bladeviovlantagging-frame.txt:    - Front end SEA<code>mkvdev -sea ent10 -vadapter ent8 -default ent8 -defaultid 1 -attr ha_mode=auto ctl_chan=ent10</code>Creates ent12
bladeviovlantagging-frame.txt:    - Back  up  SEA<code>mkvdev -sea ent11 -vadapter ent9 -default ent9 -defaultid 2 -attr ha_mode=auto ctl_chan=ent11</code>Creates ent13
bladeviovlantagging-frame.txt:  - Configure IP on front end SEA<code>mktcpip -hostname <vio DNS name> -inetaddr <vio IP> -interface en12 -netmask 255.255.255.0 -gateway <default gateway> -start</code>
bladeviovlantagging-vio140-141.txt:<code>mkvdev -lnagg ent0 ent1 -attr mode=8023ad
bladeviovlantagging-vio140-141.txt:et4</code>
bladeviovlantagging-vio140-141.txt:<code>mkvdev -lnagg ent2 ent3 -attr mode=8023ad
bladeviovlantagging-vio140-141.txt:et5</code>
bladeviovlantagging-vio140-141.txt:<code>entstat -all ent6 | grep -iE "Priority|Port VLAN ID"
bladeviovlantagging-vio140-141.txt:  Port VLAN ID:     1</code>
bladeviovlantagging-vio140-141.txt:<code>entstat -all ent7 | grep -iE "Priority|Port VLAN ID"
bladeviovlantagging-vio140-141.txt:  Port VLAN ID:     2</code>
bladeviovlantagging-vio140-141.txt:<code>entstat -all ent6 | grep -iE "Priority|Port VLAN ID"
bladeviovlantagging-vio140-141.txt:  Port VLAN ID:     1</code>
bladeviovlantagging-vio140-141.txt:<code>entstat -all ent7 | grep -iE "Priority|Port VLAN ID"
bladeviovlantagging-vio140-141.txt:  Port VLAN ID:     2</code>
bladeviovlantagging-vio140-141.txt:<code>mkvdev -sea ent4 -vadapter ent6 -default ent6 -defaultid 1 -attr ha_mode=auto ctl_chan=ent8 largesend=1 large_receive=yes
bladeviovlantagging-vio140-141.txt:et10</code>
bladeviovlantagging-vio140-141.txt:<code>mkvdev -sea ent5 -vadapter ent7 -default ent7 -defaultid 2 -attr ha_mode=auto ctl_chan=ent9 largesend=1 large_receive=yes
bladeviovlantagging-vio140-141.txt:et11</code>
bladeviovlantagging-vio140-141.txt:<code>smitty tcpip</code>
bladeviovlantagging-vio140-141.txt:<code>chps -s 32 hd6</code>
bladeviovlantagging-vio140-141.txt:<code>vfcmap -vadapter vfchost0 -fcp fcs0</code>
bladeviovlantagging-vio140-141.txt:<code>vfcmap -vadapter vfchost1 -fcp fcs1</code>
bladeviovlantagging.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
bladeviovlantagging.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
bladeviovlantagging.txt:done</code>
bladeviovlantagging.txt:    - Run cfgmgr<code>cfgmgr</code>
bladeviovlantagging.txt:  - Find out the adapter id<code>lshwres -r hea --rsubtype logical --level port -F adapter_id</code>It will be a series of numbers like 23000001 or 23000000
bladeviovlantagging.txt:  - Remove the HEA membership from all guest lpars.<code>chhwres -r hea -o s -l 23000001 -g 1 -a vlan_id_list=all --id 2 --logport 3</code><code>chhwres -r hea -o s -l 23000001 -g 1 -a vlan_id_list=all --id 2 --logport 4</code>
bladeviovlantagging.txt:    - Set it<code>chhwres -r hea -o s -l 23000001 -g 1 -a promisc_lpar_id=1 --physport 0</code><code>chhwres -r hea -o s -l 23000001 -g 1 -a promisc_lpar_id=1 --physport 1</code>
bladeviovlantagging.txt:  - Obtain <Server name> by executing as padmin the following for next two steps<code>lssyscfg -r sys -F name</code> And <vio lpar name><code>lssyscfg -r lpar -F name</code>
bladeviovlantagging.txt:  - Create entxx virtual NIC with additional VLANs that we need. 450,48,406.  <code>chhwres -m <Server name> -p <vio lpar name> -o a -r virtualio --rsubtype eth -s 14 -a "ieee_virtual_eth=1,port_vlan_id=14,\"addl_vlan_ids=450,48,406\",is_trunk=1,trunk_priority=1" -d 5</code>
bladeviovlantagging.txt:  - Create entxx virtual NIC with additional VLANs that we need. 451,49.<code>chhwres -m <Server name> -p <vio lpar name> -o a -r virtualio --rsubtype eth -s 15 -a "ieee_virtual_eth=1,port_vlan_id=15,\"addl_vlan_ids=451,49\",is_trunk=1,trunk_priority=1" -d 5</code>
bladeviovlantagging.txt:    - ent0 + ent1 => ent10<code>mkvdev -lnagg ent0 -attr backup_adapter=ent1</code> 
bladeviovlantagging.txt:    - ent2 + ent3 => ent11<code>mkvdev -lnagg ent2 -attr backup_adapter=ent3</code>
bladeviovlantagging.txt:  - Create SEA ent12 ent10 + ent8 => ent12<code>mkvdev -sea ent10 -vadapter ent8 -default ent8 -defaultid 14</code>
bladeviovlantagging.txt:  - Create SEA ent13 ent11 + ent9 => ent13<code>mkvdev -sea ent11 -vadapter ent9 -default ent9 -defaultid 15</code>
bladeviovlantagging.txt:  - Configure IP on SEA<code>mktcpip -hostname <vio DNS name> -inetaddr <vio IP> -interface en12 -netmask 255.255.255.0 -gateway <default gateway> -start</code>If hostname was not changed / you get a message like this <code>Hostname "taprvio3" does not match with system hostname "taprvio3.amer.int.tenneco.com".
bladeviovlantagging.txt:System Hostname will not be altered. /etc/hosts file will be updated.</code>Change the hostname in ODM<code>oem_setup_env</code><code>chdev -l inet0 -a hostname=<vioservername></code>
bringdownaserverformaint.txt:  - Get on to the console. Login to pgnmsv01<code>getconsole <servername></code>
bringdownaserverformaint.txt:  - Get a list of running processes<code>ps -ef > /root/psef.$(date +%m%d%y)</code>
bringdownaserverformaint.txt:  - Get a list of mounted filesystems<code>df -k > /root/mountedfs.$(date +%m%d%y)</code>
bringdownaserverformaint.txt:  - Get a list of disks and vgs pagingspace etc<code>lsvg > /root/lsvg.$(date +%m%d%y)
bringdownaserverformaint.txt:lsps -a > /root/lsps.$(date +%m%d%y)</code>
bringdownaserverformaint.txt:  - Check the bootlist against the last booted device<code>bootlist -o -m normal > /root/bootlist.$(date +%m%d%y)
bringdownaserverformaint.txt:bootinfo -b > /root/bootinfob.$(date +%m%d%y)</code>
bringdownaserverformaint.txt:  - Shutdown the server<code>shutdown -F</code>
buildaixserver.txt:  - Add the server to the console database **/prod/images/etc/unix_sys_console**<code>sudo vi /prod/images/etc/unix_sys_console</code>
buildaixserver.txt:    - A regular lpar on a P Series frame<code>pgnmsv01:lpar-ibm:taitc051:pgnmsv01-9111-520-SN10B4F8D:pgnmsv01:2:hscroot</code>
buildaixserver.txt:    - A lpar on a blade IVM VIO Server<code>dagi3p01:blade-ibm-vio:taprvio9:4:padmin</code>
buildaixserver.txt:  - Open up a console session to the new server. On pgnmsv01<code>sudo getconsole peerap09</code>
buildaixserver.txt:      * This code will get the command if we have made proper entries in the console database<code>grep ^xagi3p02: /prod/images/etc/unix_sys_console | awk -F: '{print "ssh "$7"@"$3"\n""chsysstate -r lpar -o on -b sms -m "$4,"-n",$1,"-f",$1}'</code>
buildaixserver.txt:      * This code will get the command if we have made proper entries in the console database<code>grep ^panmsv02: /prod/images/etc/unix_sys_console | awk -F: '{print "ssh "$5"@"$3"\n""chsysstate -r lpar -o on -b sms -n",$1}'</code>
buildaixserver.txt:      * This code will help you with CLI<code>grep ^taprvio4: /prod/images/etc/unix_sys_console | awk -F: '{print "ssh "$5"@"$3"\n""power -on -T blade["$4"]"}'</code>
buildaixserver.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
buildaixserver.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
buildaixserver.txt:done</code>
buildaixserver.txt:    - Run cfgmgr<code>cfgmgr</code>
buildaixserver.txt:      - Create an ether-channel using the HEA adapters<code>mkdev -c adapter -s pseudo -t ibm_ech -a adapter_names='ent0'  -a backup_adapter='ent1'  -a netaddr='10.32.50.1'  -a num_retries='2' -a retry_time='2'
buildaixserver.txt:ent3 Available</code>Make a note of the 'ent' number. Run cfgmgr<code>cfgmgr</code>Also make a note of the ent that is virtualized, the following steps will use these names.
buildaixserver.txt:    - Configure the front end IP address on the correct interface<code>/usr/sbin/mktcpip -h <hostname> -a a.b.c.d -m 255.255.255.0 -i enX -g a.b.c.1 -A no -s</code>
buildaixserver.txt:    - Configure the backend(bck) IP address<code>chdev -l enY -a netaddr=e.f.g.h -a netmask=255.255.255.0 -a state=up</code>
buildhmcfortenneco.txt:  - Configure syslog destination. As hscroot or an equivalent user<code>chhmc -c syslog -s add -a 10.32.50.59</code>
buildntpserver.txt:  - Create firewall rules from the respective NTP server(s) to the following time servers for <code>
buildntpserver.txt:Direction : Outbound</code>
buildntpserver.txt:    - Time servers<code>ntp-0.cso.uiuc.edu
buildntpserver.txt:ntp.thaidns.co.th</code>
buildntpserver.txt:  - Install NTP<code>sudo yum install ntp</code>
buildntpserver.txt:    - Make a backup copy of ntp.conf<code>sudo mv /etc/ntp.conf /etc/ntp.conf.Original</code>
buildntpserver.txt:    - Edit ntp.conf<code>sudo vi /etc/ntp.conf</code>Add this<code># Permit time synchronization with our time source, but do not
buildntpserver.txt:fudge   127.127.1.0 stratum 10</code>
buildntpserver.txt:  - Add the list of time servers<code>ntp-0.cso.uiuc.edu
buildntpserver.txt:ntp.thaidns.co.th</code>
buildntpserver.txt:  - Define logs and drift file<code># Define the drift and log file
buildntpserver.txt:logfile /var/log/ntp.log</code>
buildntpserver.txt:  - Start the NTPD daemon<code>sudo systemctl enable ntpd
buildntpserver.txt:sudo systemctl start ntpd</code>
buildredhat.txt:  * Login to consoleDB server<code>ssh pcdcunxaxap01</code>
buildredhat.txt:  * Add the server to the console database **/prod/images/etc/unix_sys_console** on pcdcunxaxap01.<code>sudo vi /prod/images/etc/unix_sys_console</code>Sample entry would look like<code>dcdcdsmlxdb01:std-vmware-vsphere:cdcvilms156:ADACCOUNT</code>
buildredhat.txt:      * Locate the VM<code>Right click --> Edit Settings --> Select Network adapter 1 (Hardware Tab) --> You will see the MAC address to the right.</code>
buildredhat.txt:  * Login to the build server and export the build server as a variable<code>ssh pcdcunxlxap01
buildredhat.txt:export server="$(uname -n).driv.com"</code>
buildredhat.txt:  * Export the server name. Please use the FQDN.<code>export host2build=<hostname></code>i.e.<code>export host2build=dcdcdsmlxdb01.driv.com</code>
buildredhat.txt:  * Store the short name<code>export shortname=$(echo ${host2build} | awk -F "." '{print $1}')</code>
buildredhat.txt:  * The server's MAC address<code>export mac_addr=aa:ww:ee:rr:tt:yy:tt</code>
buildredhat.txt:    * If the server is a VM<code>export interface="eth0"</code>
buildredhat.txt:    * If the server is physical (DL380 Gen10 for NBU appliance)<code>export interface="eno1"</code>
buildredhat.txt:  * The server's IP Address<code>export ipaddr=$(nslookup ${host2build} | \
buildredhat.txt:sed -n /^Name/,/^$/p | grep ^Address | awk '{print $NF}')</code>
buildredhat.txt:  * The server's DNS domain<code>export domain=$(nslookup ${host2build} | \
buildredhat.txt:grep ^Name | awk '{print $NF}' | awk -F"." '{OFS = ".";$1=""; print $0}' | sed "s;^.;;g")</code>
buildredhat.txt:  * The server's netmask. **Most times, but there are some subnets with a different mask**. When in doubt, ask Network team<code>export netmask=255.255.255.0</code>
buildredhat.txt:  * The server's default gateway. **Most times, but there are some subnets with a different mask**. When in doubt, ask Network team<code>export gateway=$(echo $ipaddr | awk -F"." '{OFS = ".";$NF="";print $0"1"}')</code>
buildredhat.txt:  * Set DNS server<code>export nameserver="10.128.11.200"</code>
buildredhat.txt:    * RHEL 6.8<code>export profile=rhel-6.8-x86_64</code>
buildredhat.txt:    * RHEL 7.2<code>export profile=rhel-7.2-x86_64</code>
buildredhat.txt:    * RHEL 7.2 for SAP HANA DB server<code>export profile=rhel-7.2-x86_64-driv-sap-hana</code>
buildredhat.txt:    * RHEL 7.2 for SAP HANA APP server<code>export profile=rhel-7.2-x86_64-driv-sap-hana-app</code>
buildredhat.txt:    * RHEL 7.2 for NBU home grown<code>export profile=rhel-7.2-x86_64-dl380g10</code>
buildredhat.txt:  * Add the system to cobbler<code>sudo cobbler system add \
buildredhat.txt:--server=${server}</code>
buildredhat.txt:  * Create the Boot ISO on Cobbler server<code>sudo cobbler buildiso --systems="${shortname}" --iso=/var/www/html/servers/${shortname}.iso</code>
buildredhat.txt:  * For systems at DRIV<code>sudo cp /var/www/html/servers/${shortname}.iso /prod/images/DRIV-bootisos/</code>
buildvioserver.txt:  - Additional configurations are required on the LAN ports. Please create a request as follows,<code>Network Team,
buildvioserver.txt:</code>
buildvioserver.txt:  - Login to the NIM server pgnmsv01. Export a variable pointing to the VIOS server<code>export hostname=<vios_server_name></code>
buildvioserver.txt:  - Update the console database. Login to pgnmsv01<code>sudo vi /prod/images/etc/unix_sys_console</code>Make an entry similar to this<code>taprvio110:lpar-ibm:tgprhmc6:Server-8284-22A-SN215D24V:taprvio110:2:hscroot</code>
buildvioserver.txt:    - E.g.<code>10.128.112.70       cdcvilpv117.fmmotorparts.com   cdcvilpv117
buildvioserver.txt:10.128.112.71       cdcvilpv118.fmmotorparts.com   cdcvilpv118</code>
buildvioserver.txt:    - You could use the snippet<code>echo $(host ${hostname} | awk '{print $NF,$1}') ${hostname} | sudo tee -a /etc/hosts</code>
buildvioserver.txt:  - Login to the NIM server - pgnmsv01 and define the VIO server as a NIM client<code>sudo nim -o define -t standalone -a \
buildvioserver.txt:platform=chrp -a if1="find_net ${hostname} 0" -a netboot_kernel=mp ${hostname}</code>
buildvioserver.txt:  - As of March 12th 2019, these are the VIOS resources to be used for installation<code>vios-2-2-6-32-bosinst_data      resources       bosinst_data
buildvioserver.txt:vios-2-2-6-32-spot              resources       spot</code>
buildvioserver.txt:  - Prepare the NIM client(VIO server) for a NIM bosinst operation<code>sudo nim -o bos_inst -a \
buildvioserver.txt:no_client_boot=yes ${hostname}</code>
buildvioserver.txt:  - Export a variable pointing to the VIOS server we are planning to work on<code>export hostname=<viosserver_name></code>
buildvioserver.txt:    - Find out the frame and HMC<code>export frame=$(grep -i ^${hostname} /prod/images/etc/unix_sys_console | awk -F: '{print $4}' )
buildvioserver.txt:export hmc=$(grep -i ^${hostname} /prod/images/etc/unix_sys_console | awk -F: '{print $3}' )</code>
buildvioserver.txt:    - Execute power on<code>ssh ${hmc} "chsysstate -r lpar -o on -b sms -m ${frame} -n ${hostname}"</code>
buildvioserver.txt:  - Enable LPAR2RRD data collection<code>ssh ${hmc} chlparutil -m ${frame} -r config -s 60</code>
buildvioserver.txt:  - Login to pgnmsv01 and open a console session to the VIO server<code>sudo getconsole ${hostname}</code>
buildvioserver.txt:  - Login as padmin then accept the license<code>license -accept</code>
buildvioserver.txt:  - Remove all the network configurations<code>oem_setup_env</code>detach the network config<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>Remove them from ODM<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
buildvioserver.txt:done</code>
buildvioserver.txt:  - Now run cfgmgr<code>cfgmgr</code>
buildvioserver.txt:  - Take a look at the adapters and figure out which adapters are to be used.<code>lscfg | grep ent</code>The output would look like this<code>* ent11            U9009.42A.7823D40-V1-C5-T1                                   Virtual I/O Ethernet Adapter (l-lan)
buildvioserver.txt:+ ent3             U78D2.001.WZS039A-P1-C2-T4                                   PCIe2 4-Port Adapter (1GbE RJ45) (e4148a1614109404)</code>
buildvioserver.txt:  - Configure Link aggregation<code>mkvdev -lnagg ent0 ent4 -attr mode='8023ad' hash_mode='src_dst_port'</code>You should see a similar output<code>ent12 Available
buildvioserver.txt:et12</code>
buildvioserver.txt:  - Create the SEA interface<code>mkvdev -sea ent12 -vadapter ent8,ent9 -default ent8 -defaultid 1 -attr ha_mode=sharing ctl_chan=ent11</code>You should see something similar output<code>ent12 Available
buildvioserver.txt:et12</code>
buildvioserver.txt:  - Change the hostname to the shortname<code>sudo chdev -l inet0 -a hostname=<hostname></code>
buildvioserver.txt:  - Configure the primary interface of the VIOS server<code>mktcpip -hostname <hostname_of_the_vios> inetaddr <ip_address> -interface en10 -netmask <netmask> -gateway <gateway> -start</code>
buildvioserver.txt:  - Login to pgnmsv01 and store the hostname<code>export targethost=<host></code>'host' is the one being built.
buildvioserver.txt:    - AIX<code>extendvg rootvg hdiskX
buildvioserver.txt:sudo bootlist -m normal hdiskX hdiskY</code>
buildvioserver.txt:  - Login to the NIM server and perform a NIM client cleanup<code>sudo nim -F -o reset <hostname>
buildviosserveratcdc.txt:  - Additional configurations are required on the LAN ports. Please create a request as follows, **This is a sample request**<code>Network Team,
buildviosserveratcdc.txt:</code>
buildviosserveratcdc.txt:  - Login to the NIM server pgnmsv01. Export a variable pointing to the VIOS server<code>export hostname=<vios_server_name></code>
buildviosserveratcdc.txt:  - Update the console database. Login to pgnmsv01<code>sudo vi /prod/images/etc/unix_sys_console</code>Make an entry similar to this<code>taprvio110:lpar-ibm:tgprhmc6:Server-8284-22A-SN215D24V:taprvio110:2:hscroot</code>
buildviosserveratcdc.txt:    - E.g.<code>10.128.112.70       cdcvilpv117.fmmotorparts.com   cdcvilpv117
buildviosserveratcdc.txt:10.128.112.71       cdcvilpv118.fmmotorparts.com   cdcvilpv118</code>
buildviosserveratcdc.txt:    - You could use the snippet<code>echo $(host ${hostname} | awk '{print $NF,$1}') ${hostname} | sudo tee -a /etc/hosts</code>
buildviosserveratcdc.txt:  - Login to the NIM server - pgnmsv01 and define the VIO server as a NIM client<code>sudo nim -o define -t standalone -a \
buildviosserveratcdc.txt:platform=chrp -a if1="find_net ${hostname} 0" -a netboot_kernel=mp ${hostname}</code>
buildviosserveratcdc.txt:  - As of March 12th 2019, these are the VIOS resources to be used for installation<code>vios-2-2-6-32-bosinst_data      resources       bosinst_data
buildviosserveratcdc.txt:vios-2-2-6-32-spot              resources       spot</code>
buildviosserveratcdc.txt:  - Prepare the NIM client(VIO server) for a NIM bosinst operation<code>sudo nim -o bos_inst -a \
buildviosserveratcdc.txt:no_client_boot=yes ${hostname}</code>
buildviosserveratcdc.txt:  - Export a variable pointing to the VIOS server we are planning to work on<code>export hostname=<viosserver_name></code>
buildviosserveratcdc.txt:    - Find out the frame and HMC<code>export frame=$(grep -i ^${hostname} /prod/images/etc/unix_sys_console | awk -F: '{print $4}' )
buildviosserveratcdc.txt:export hmc=$(grep -i ^${hostname} /prod/images/etc/unix_sys_console | awk -F: '{print $3}' )</code>
buildviosserveratcdc.txt:    - Execute power on<code>ssh ${hmc} "chsysstate -r lpar -o on -b sms -m ${frame} -n ${hostname} -f default_profile"</code>
buildviosserveratcdc.txt:  - Enable LPAR2RRD data collection<code>ssh ${hmc} chlparutil -m ${frame} -r config -s 60</code>
buildviosserveratcdc.txt:  - Login to pgnmsv01 and open a console session to the VIO server<code>sudo getconsole ${hostname}</code>
buildviosserveratcdc.txt:  - Login as padmin then accept the license<code>license -accept</code>
buildviosserveratcdc.txt:  - Remove all the network configurations<code>oem_setup_env</code>detach the network config<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>Remove them from ODM<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
buildviosserveratcdc.txt:done</code>
buildviosserveratcdc.txt:  - Now run cfgmgr<code>cfgmgr</code>
buildviosserveratcdc.txt:  - Take a look at the adapters and figure out which adapters are to be used.<code>lscfg | grep ent</code>The output would look like this<code>* ent11            U9009.42A.7823D40-V1-C5-T1                                   Virtual I/O Ethernet Adapter (l-lan)
buildviosserveratcdc.txt:+ ent3             U78D2.001.WZS039A-P1-C2-T4                                   PCIe2 4-Port Adapter (1GbE RJ45) (e4148a1614109404)</code>
buildviosserveratcdc.txt:    - Create link aggregation<code>mkvdev -lnagg ent0 ent4 -attr mode='8023ad' hash_mode='src_dst_port'</code>You should see a similar output<code>ent12 Available
buildviosserveratcdc.txt:et12</code>
buildviosserveratcdc.txt:  - Create the SEA interface<code>mkvdev -sea ent12 -vadapter ent8,ent9 -default ent8 -defaultid 1 -attr ha_mode=sharing ctl_chan=ent11</code>You should see something similar output<code>ent13 Available
buildviosserveratcdc.txt:et13</code>
buildviosserveratcdc.txt:    - Change hostname<code>sudo chdev -l inet0 -a hostname=<hostname></code>
buildviosserveratcdc.txt:    - Configure the IP address<code>mktcpip -hostname <hostname_of_the_vios> -inetaddr <ip_address> -interface en10 -netmask <netmask> -gateway <gateway> -start</code>
buildviosserveratcdc.txt:   - Mirror rootvg<code>su - padmin
buildviosserveratcdc.txt:mirrorios -f hdiskX</code>
chpasswd-encrypt.txt:  - Encrypt clear text<code>perl -e 'print crypt("YourPasswd", "salt"),"\n"'</code>
chpasswd-encrypt.txt:  - change the password<code>echo "username:<encrypted passwd> | sudo chpasswd -e</code>
clearvgdata-pvid.txt:    - Remove the pvid<code>chdev -l <hdiskname> -a pv=clear</code>
clearvgdata-pvid.txt:    - Remove VGDA<code>chpv -C <hdiskname></code>Example<code>chpv -C hdiskpower129</code>
clearvgdata-pvid.txt:    - Remove from powerpath<code>powermt remove dev=hdiskpowername</code>
clearvgdata-pvid.txt:    - Remove the devicefile<code>rmdev -dl <hdiskpowername></code>
clearvgdata-pvid.txt:    - Remove the child devices<code>rmdev -dl hdiskname
clearvgdata-pvid.txt:rmdev -dl hdiskname</code>If the disk has more than 2 paths, remove all the 4 hdisk child devices.
cloninginstall.txt:  - For ease of documenting, export a variable to notify the source system and new system<code>export srcsystem=<system_of_which_you_plan_to_use_mksysb_from></code>
cloninginstall.txt:  - Login to the NIM Server (pgnmsv01 - LDC and penmsv01 - Interexion) and identify the mksysb.<code>ls -ld /mksysb-images/bos.obj.${srcsystem}.*
cloninginstall.txt:-rw-r-----    1 mksysftp system   1573758245 Aug 11 17:06 /mksysb-images/bos.obj.peerap07.gz</code>
cloninginstall.txt:  - Copy the mksysb to a temp location<code>sudo cp /mksysb-images/bos.obj.${srcsystem}.gz /preupgrade/mksysb/</code>
cloninginstall.txt:  - Unzip the mksysb file<code>cd /preupgrade/mksysb/ ; sudo gunzip bos.obj.${srcsystem}.gz</code>
cloninginstall.txt:  - Define a mksysb resource(if doesn't exist already) using the unzipped mksysb file<code>sudo nim -o define -t mksysb -a server=master -a location=/preupgrade/mksysb/bos.obj.${srcsystem} ${srcsystem}-mksysb</code>If NIM complains there is an existing resource with that name, please remove it<code>sudo nim -o remove ${srcsystem}-mksysb</code>
cloninginstall.txt:  - Find out the OSLEVEL on the system that we plan to clone<code>ssh ${srcsystem} oslevel -s
cloninginstall.txt:5300-12-01-1016</code>
cloninginstall.txt:  - Find out the correct Spot and LPPSRC for the above AIX release level. In this case they are,<code>530TL12-01_spot
cloninginstall.txt:530TL12-01_lppsrc</code>
cloninginstall.txt:    - CLI method<code>sudo nim -o define -t standalone -a platform=chrp -a if1="find_net peerap09 0" -a netboot_kernel=mp peerap09</code>
cloninginstall.txt:    - smitty method<code>sudo smitty nim --> Perform NIM Administration Tasks --> Manage Machines --> Define a Machine --> Type in the hostname (hit enter) --> select "ent" --> Fill in and hit enter</code>
cloninginstall.txt:  - Configure the server for a bosinst operation<code>sudo nim -o bos_inst -a source=mksysb -a spot=530TL12-01_spot -a lpp_source=530TL12-01_lppsrc -a no_client_boot=yes -a script=postinstallCloning -a mksysb=${srcsystem}-mksysb peerap09</code>
cobblerinfo.txt:  * A distro is a copy of the RHEL installation DVD for a given version.<code>sudo cobbler distro list
cobblerinfo.txt:   rhel-6.4-x86_64</code>
cobblerinfo.txt:  * On pablsv01 The kickstart files are stored under<code>sudo ls -l /var/lib/cobbler/kickstarts/tenneco.*
cobblerinfo.txt:-rw-r--r-- 1 root root 1562 Aug 13 15:48 /var/lib/cobbler/kickstarts/tenneco.rhel-6.4.ks</code>
cobblerinfo.txt:  * A profile associates a distro with kickstart<code>sudo cobbler profile list
cobblerinfo.txt:   rhel-6.4-x86_64</code>
cobblerinfo.txt:  - We define a system to cobbler this way<code>sudo cobbler system add \
cobblerinfo.txt:--server=pablsv01.amer.int.tenneco.com</code>This way we associated a system with a profile.
cobblerinfo.txt:  - We then create a iso file using cobbler<code> sudo cobbler buildiso --systems="taqa1a03new" --iso=/var/www/html/servers/taqa1a03new.iso</code>
consise-cdc-vios.txt:  - Configure Etherchannels with 802.3ad / LACP mode.<code>mkvdev -lnagg ent0,ent1,ent4,ent5 -attr mode='8023ad'</code>Replace the adapter names accordingly.
consise-cdc-vios.txt:  - Configure SEA load balancing mode to ''shared''<code>mkvdev -sea ent10 -vadapter ent8 -default ent8 -defaultid 1 -attr ha_mode=shared ctl_chan=ent10</code> Change the adapter names accordingly.
consise-cdc-vios.txt:  - Configure FC adapter's attributes<code>for FSCSI in $(lscfg | grep fscsi | awk '{print $2}' )
consise-cdc-vios.txt:done</code>
correct-ssh-startup.txt:  - Make a copy of the inetd.conf file<code>sudo /usr/bin/cp -p /etc/inetd.conf /etc/inetd.conf-$(date +%Y-%m-%d-%H:%M:%S)</code>
correct-ssh-startup.txt:  - Insert the entry into the inetd.conf file <code>grep -q ^ssh /etc/inetd.conf
correct-ssh-startup.txt:[[ ${?} -ne 0 ]] && echo "ssh stream   tcp      nowait   root  /usr/sbin/sshd  sshd -i"  | sudo tee -a  /etc/inetd.conf</code>
correct-ssh-startup.txt:  - Refresh the inetd daemon so that it knows about the changes to the file <code>sudo  refresh -s inetd </code>
correct-ssh-startup.txt:    - First make a copy <code>sudo cp -p /etc/rc.d/rc2.d/Ssshd /etc/rc.d/rc2.d/Ssshd-original
correct-ssh-startup.txt:sudo cp -p /etc/rc.d/rc2.d/Ksshd /etc/rc.d/rc2.d/Ksshd-original</code>
correct-ssh-startup.txt:    - Edit the Ssshd file and put in the following lines after the #!/bin/ksh statement <code>sudo vi /etc/rc.d/rc2.d/Ssshd</code>Add these lines right after the first line<code># inserted 2 lines - ssh is now started from initd
correct-ssh-startup.txt:exit 0 </code> save the changes
correct-ssh-startup.txt:    - Edit the Ksshd file and put in the following lines after the #!/bin/ksh statement <code>sudo vi /etc/rc.d/rc2.d/Ksshd</code>Add these lined right after the first line<code># inserted 2 lines - ssh is now started from initd
correct-ssh-startup.txt:exit 0 </code> save the changes
createfscihardned.txt:  - In this document , we assume the following<code>hdisk46 -- Free disk from VMAX
createfscihardned.txt:hdisk50 -- Free disk on V9000</code>
createfscihardned.txt:  - Create a logical volume on any one of the disk<code>sudo mklv -t jfs2 nfsvg01 400 hdisk46</code>
createfscihardned.txt:  - Create a filesystems on it<code>sudo crfs -vjfs2 -d lvXX -A yes -t no -m /abc/def/ghi</code>Where lvXX is the logical volume that was created in the previous script
createfscihardned.txt:  - Mount it and change permissions as necessary<code></code>
createfscihardned.txt:  - Mirror the logical volume<code>sudo mklvcopy -k lvXX 2 hdisk50</code>
createfsviosdual.txt:  - From time to time, we will get requests from application teams like the one below<code>Plase create a filesystem /usr/sap/CTA/SUM size 100G and change the owership to ctaadm:sapsys on daerdb01</code>
createfsviosdual.txt:  - Logon to daerdb01 and check if the filesystem exists or not<code>ls -ld /usr/sap/CTA/SUM</code>If it does exist, even if it is a directory, please go back to the requestor and check with them and make sure it is okay to go ahead and create the filesystem.
createfsviosdual.txt:  - Make sure that the mount point is not on an NFS mounted filesystem.<code>df -k /usr/sap/CTA/SUM</code>
createfsviosdual.txt:  - Find out the correct VG for the requested filesystem.<code>lsvg</code>Check similar filesystems and figure out where they are<code>lslv <lvname></code>
createfsviosdual.txt:  - Find out if the VG has enough space or not<code>lsvg <vg_name></code>
createfsviosdual.txt:      * Local disks ( SAS, SCSI, etc )<code>lsdev -Ccdisk | egrep -i "sas|scsi"
createfsviosdual.txt:hdisk8   Available 05-00-00 SAS RAID 0 SSD Array</code>
createfsviosdual.txt:      * Directly attached SAN storage<code>x1kxk630 on pggtdb01:/home/x1kxk630 $ lsdev -Ccdisk
createfsviosdual.txt:hdisk3  Available C4-T1-01 EMC Symmetrix FCP MPIO VRAID</code>
createfsviosdual.txt:      * Virtual SCSI disk presented through VIOS server(s)<code>hdisk0  Available  Virtual SCSI Disk Drive
createfsviosdual.txt:hdisk10 Available  Virtual SCSI Disk Drive</code>
createfsviosdual.txt:  - Find out the disk size used on the VG<code>lsvg -p , bootinfo -s</code>
createfsviosdual.txt:  - Send a request to Storage team requesting storage<code>How many disks are needed ?
createfsviosdual.txt:The array serial number from which the storage needs to be carved.</code>
createfsviosdual.txt:  - The storage, once provisioned, will come back to you with some comments like this<code>LUN xyz has been allocated to taprvio50 & 51. Please run cfgmgr.</code>
createfsviosdual.txt:    - On the first VIOS server. Document the current disk layout<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.before</code>Run cfgmgr to rescan and detect the new disks<code>sudo cfgmgr</code>Document the disk layout now<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.after</code>Find out the new device using diff<code>diff lsdiskcfg.out.before lsdiskcfg.out.after</code>
createfsviosdual.txt:        - On some EMC ODM versions<code>sudo chdev -l <hdiskpowername> -a reserve_lock=no</code>On some other versions<code>sudo chdev -l hdiskpowername -a reserve_policy=no_reserve</code>
createfsviosdual.txt:      - If VIOS server is using AIX MPIO<code>sudo chdev -l <hdiskname> -a reserve_policy=no_reserve</code>
createfsviosdual.txt:      - Allocate a PVID<code>sudo chdev -l <hdiskpowername> -a pv=yes</code>
createfsviosdual.txt:    - On the second VIOS server, Document the current disk layout<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.before</code>Run cfgmgr to rescan and detect the new disks<code>sudo cfgmgr</code>Document the disk layout now<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.after</code>Find out the new device using diff<code>diff lsdiskcfg.out.before lsdiskcfg.out.after</code>Make sure you see the new disk on the second VIOS server as well.
createfsviosdual.txt:        - On some EMC ODM versions<code>sudo chdev -l <hdiskpowername> -a reserve_lock=no</code>On some other versions<code>sudo chdev -l hdiskpowername -a reserve_policy=no_reserve</code>
createfsviosdual.txt:      - If VIOS server is using AIX MPIO<code>sudo chdev -l <hdiskname> -a reserve_policy=no_reserve</code>
createfsviosdual.txt:  - On VIOS server 1, find out the vhost that is used by the guest<code>grep <guestname> lsdiskcfg.out.after</code>Make a note of it
createfsviosdual.txt:  - Login as padmin and add the disks to the vhost<code>sudo su - padmin</code>Add the VIOS mapping<code>mkvdev -vdev <hdiskpowername> -vadapter <vhost_name></code>  
createfsviosdual.txt:  - On VIOS server 2, find out the vhost that is used by the guest<code>grep <guestname> lsdiskcfg.out.after</code>Make a note of it
createfsviosdual.txt:  - Login as padmin and add the disks to the vhost<code>sudo su - padmin</code>Add the VIOS mapping<code>mkvdev -vdev <hdiskpowername> -vadapter <vhost_name></code>  
createfsviosdual.txt:  - Document the current disks<code>lspv > lspv.before</code>
createfsviosdual.txt:  - Run cfgmgr<code>sudo cfgmgr</code>
createfsviosdual.txt:  - Document the current disks<code>lspv > lspv.after</code>
createfsviosdual.txt:  - Find the difference which should list the disk we just added<code>diff lspv.before lspv.after</code>
createfsviosdual.txt:  - Add the disk to the VG<code>sudo extendvg <vgname> <diskname></code>
createfsviosdual.txt:  - Create the filesystem<code>sudo crfs -v jfs2 -A yes -t no -g <vg_name> -a size=<size>G -m <mount_point></code>
createfsviosdual.txt:  - Then mount the filesystem<code>sudo mount <mount_point></code>
createfsviosdual.txt:  - Change the ownership<code>sudo chown ctaadm:sapsys <mount_point></code>
createinformationfile.txt:  - This template was created by Robert Bieniek after muntiple meetings with various and sundy groups at Lake Forest. Where possible the data is pulled directly from the system itself. These fields are <code> wwn, mac adress </code>   The rest is left as an excersize for the server builde as they should know the remaining fields. 
createinformationfile.txt:  - Create the file /var/adm/.information e.g.<code>sudo mkdir -p /var/adm ;sudo vi /var/adm/.information</code>Enter these details
createinformationfile.txt:<code>mksysbhost:
createinformationfile.txt:express code:N/A
createinformationfile.txt:business criticality:</code>
createinformationfile.txt:<code>sudo vi /var/adm/.information</code>Modify these parameters<code>mksysbhost:
createinformationfile.txt:express code:N/A
createinformationfile.txt:business criticality:</code>
createnewdistros.txt:  - Login to the build server<code>ssh pablsv02</code>
createnewdistros.txt:  - Create a directory that denotes today's date<code>sudo mkdir -p /var/www/html/sources/04-12-2017</code>
createnewdistros.txt:    - Unregister from Redhat portal<code>sudo subscription-manager unregister</code>
createnewdistros.txt:    - Register to the Redhat portal<code>sudo subscription-manager register --username tenauto</code>
createnewdistros.txt:    - Subscribe to one of the Redhat subscriptions<code>sudo subscription-manager subscribe --pool=8a85f9815828568c01582c22416e5b84</code>
createnewdistros.txt:    - Refresh the subscription<code>sudo subscription-manager refresh</code>
createnewdistros.txt:    - Attach to the subscription<code>sudo subscription-manager attach</code>
createnewdistros.txt:  - Download RHEL7 repository<code>sudo reposync -p /var/www/html/sources/04-12-2017 -r rhel-7-server-rpms -l</code>
createnewdistros.txt:    - This step will create this directory with all Redhat packages<code>/var/www/html/sources/04-12-2017/rhel-7-server-rpms</code>
createnewdistros.txt:    - Create a repository<code>sudo createrepo /var/www/html/sources/04-12-2017/rhel-7-server-rpms</code>
createnewdistros.txt:  - Download RHEL7 extras repository<code>sudo reposync -p /var/www/html/sources/04-12-2017 -r rhel-7-server-extras-rpms -l</code>
createnewdistros.txt:    - This step will create this directory with all Redhat packages<code>/var/www/html/sources/04-12-2017/rhel-7-server-extras-rpms</code>
createnewdistros.txt:    - Create a repository<code>sudo createrepo /var/www/html/sources/04-12-2017/rhel-7-server-extras-rpms</code>
createnewdistros.txt:  - Download RHEL7 optional repository<code>sudo reposync -p /var/www/html/sources/04-12-2017 -r rhel-7-server-optional-rpms -l</code>
createnewdistros.txt:    - This step will create this directory with all Redhat packages<code>/var/www/html/sources/04-12-2017/rhel-7-server-optional-rpms</code>
createnewdistros.txt:    - Create a repository<code>sudo createrepo /var/www/html/sources/04-12-2017/rhel-7-server-optional-rpms</code>
createnewdistros.txt:    - Unregister from Redhat portal<code>sudo subscription-manager unregister</code>
createnewdistros.txt:    - Register to the Redhat portal<code>sudo subscription-manager register --username tenauto</code>
createnewdistros.txt:    - Subscribe to one of the Redhat subscriptions<code>sudo subscription-manager subscribe --pool=8a85f981584fc77301585015801802fe</code>
createnewdistros.txt:    - Refresh the subscription<code>sudo subscription-manager refresh</code>
createnewdistros.txt:    - Attach to the subscription<code>sudo subscription-manager attach</code>
createnewdistros.txt:  - Download SAP for RHEL7 repository<code>sudo reposync -p /var/www/html/sources/04-12-2017 -r rhel-sap-for-rhel-7-server-rpms -l</code>
createnewdistros.txt:    - This step will create this directory with all Redhat packages<code>/var/www/html/sources/04-12-2017/rhel-sap-for-rhel-7-server-rpms</code>
createnewdistros.txt:    - Create a repository<code>sudo createrepo /var/www/html/sources/04-12-2017/rhel-sap-for-rhel-7-server-rpms</code>
crisolppsrc.txt:  - Mount them<code>sudo mkdir -p /mnt/dvd1 /mnt/dvd2
crisolppsrc.txt:sudo loopmount -i aix7.1-dvd2.iso -o "-V cdrfs -o ro" -m /mnt/dvd2</code>
crisolppsrc.txt:  - Define a lppsrouce<code>sudo nim -o define -t lpp_source -a server=master -a source=/mnt/dvd1 -a location=/prod/images/lppsrc/710TL03-03 710TL03-03_lppsrc</code>
crisolppsrc.txt:  - Update/Add packages from the second DVD.<code>sudo nim -o update -a packages=all -a source=/mnt/dvd2 710TL03-03_lppsrc</code>
crisolppsrc.txt:  - Define a Spot<code>sudo nim -o define -t spot -a server=master -a source=710TL03-03_lppsrc -a location=/prod/images/spot/710TL03-03_spot 710TL03-03_spot</code>
crlparcli.txt:  * Find out the next LPAR id available<code>lssyscfg -r lpar -m Server-8202-E4C-SN101260T -F lpar_id</code>Take the next number available for the new lpar. We are assuming "6" for the following steps.
crlparcli.txt:  * VIOS1 - teprvio10<code>chhwres -r virtualio -m Server-8202-E4C-SN101260T -o a -p teprvio10 \
crlparcli.txt:--rsubtype fc -a "adapter_type=server,remote_lpar_id=6,remote_slot_num=4"</code><code>chhwres -r virtualio -m Server-8202-E4C-SN101260T -o a -p teprvio10 \
crlparcli.txt:--rsubtype fc  -a "adapter_type=server,remote_lpar_id=6,remote_slot_num=5"</code>
crlparcli.txt:  * VIOS2 - teprvio11<code>chhwres -r virtualio -m Server-8202-E4C-SN101260T -o a -p teprvio11 \
crlparcli.txt:--rsubtype fc  -a "adapter_type=server,remote_lpar_id=6,remote_slot_num=6"</code><code>chhwres -r virtualio -m Server-8202-E4C-SN101260T -o a -p teprvio11 \
crlparcli.txt:--rsubtype fc  -a "adapter_type=server,remote_lpar_id=6,remote_slot_num=7"</code>
crlparcli.txt:  * Save the current configuration of the VIOS1 and VIOS2 lpars. So that the configuration is preserved for reboots.<code>mksyscfg -r prof -m Server-8202-E4C-SN101260T -o save -p teprvio10  -n teprvio10 --force
crlparcli.txt:mksyscfg -r prof -m Server-8202-E4C-SN101260T -o save -p teprvio11  -n teprvio11 --force</code>
crlparcli.txt:  * Find out the VFC Server adapter's slot numbers<code>lssyscfg -r prof -m Server-8202-E4C-SN101260T --filter lpar_names=teprvio10 -F virtual_fc_adapters \
crlparcli.txt:| sed -e "s;\";;g"  | sed "s;,;\n;g" | tail -2 | cut -f1 -d/</code><code>lssyscfg -r prof -m Server-8202-E4C-SN101260T --filter lpar_names=teprvio11 -F virtual_fc_adapters \
crlparcli.txt:| sed -e "s;\";;g"  | sed "s;,;\n;g" | tail -2 | cut -f1 -d/</code>Make sure that both the VFC slot numbers are the same. We are looking for something like this<code>hscroot@tgprhmc4:~> lssyscfg -r prof -m Server-8202-E4C-SN101260T --filter lpar_names=teprvio10 -F virtual_fc_adapters \
crlparcli.txt:11</code>
crlparcli.txt:  * Now that we have all the VIOS configs done, let us create the lpar. The VFC clients will need to be mapped to the above slot numbers on the respective VIOS servers<code>mksyscfg -r lpar -m Server-8202-E4C-SN101260T -i \
crlparcli.txt:7/client/3//11//1\""</code>Power8 has a new style I guess ?? or it may be the WWNs<code>mksyscfg -r lpar -m Server-8284-22A-SN847584V -i "name=pgnmsv01,\
crlparcli.txt:\"\"5/client/3/taprvio131/5/c0507607fdbb0018,c0507607fdbb0019/1\"\"\""</code>
crlparcli.txt:  * Get a list of WWNs for the new lpar<code>lssyscfg -r prof -m Server-8202-E4C-SN101260T --filter lpar_names=penmsv01 -F virtual_fc_adapters | sed "s;,;\n;g" | grep client | cut -f6 -d/</code>Something like this is to be expected<code>c0507606104e00b0
crlparcli.txt:c0507606104e00b6</code>
crlparcli.txt:    * teprvio10<code>lscfg | grep vfc | egrep "C12|C13"
crlparcli.txt:* vfchost6         U8202.E4C.101260T-V2-C12              Virtual FC Server Adapter</code>Switch to padmin<code>sudo su - padmin</code>Map them<code>vfcmap -vadapter vfchost6 -fcp fcs0
crlparcli.txt:vfcmap -vadapter vfchost7 -fcp fcs2</code>
crlparcli.txt:    * teprvio11<code>lscfg | grep vfc | egrep "C12|C13"
crlparcli.txt:* vfchost6         U8202.E4C.101260T-V3-C12          Virtual FC Server Adapter</code>Switch to padmin<code>sudo su - padmin</code>Map them<code>vfcmap -vadapter vfchost6 -fcp fcs0
crlparcli.txt:vfcmap -vadapter vfchost7 -fcp fcs2</code>
ctawebdispatchersetup.txt:  - Create the user<code>sudo useradd -s /usr/bin/csh -g sapsys -G sapinst -d /home/dw1adm -c "Web dispatcher account - dev" -m -u 4533 dw1adm</code>
ctawebdispatchersetup.txt:  - Create the following filesystems<code>sudo lvcreate -n sapmnt_DW1 -L 1G datavg01
ctawebdispatchersetup.txt:sudo lvcreate -n usr_sap_DW1 -L 2G datavg01</code>Create filesystems<code>sudo mkfs -t ext4 /dev/datavg01/sapmnt_DW1
ctawebdispatchersetup.txt:sudo mkfs -t ext4 /dev/datavg01/usr_sap_DW1</code>Add to fstab<code>echo "/dev/mapper/datavg01-sapmnt_DW1   /sapmnt/DW1                    ext4    defaults        1 2" | sudo tee -a /etc/fstab
ctawebdispatchersetup.txt:echo "/dev/mapper/datavg01-usr_sap_DW1   /usr/sap/DW1                    ext4    defaults        1 2" | sudo tee -a /etc/fstab</code>Create mount points and mount them<code>sudo mkdir -p /sapmnt/DW1
ctawebdispatchersetup.txt:sudo mount /usr/sap/DW1</code>
ctawebdispatchersetup.txt:  - Set the correct permissions and ownership<code>sudo chown dw1adm:sapsys /home/dw1adm /usr/sap/DW1 /sapmnt/DW1
ctawebdispatchersetup.txt:sudo chmod 755 /sapmnt/DW1</code>
ctawebdispatchersetup.txt:  - Set ulimit for dw1adm user<code>sudo vi /etc/security/limits.conf</code>Add this to the end<code>#for dw1adm user
ctawebdispatchersetup.txt:@dw1adm     hard    memoryuse     -1</code>
disable-ibm-systems-director-agent-on-aix.txt:  - Stop and permanently disable the common agent: <code>sudo /opt/ibm/director/agent/runtime/agent/bin/endpoint.sh stop</code> <code>sudo ./opt/ibm/director/agent/runtime/nonstop/bin/installnonstop.sh -uninstallservice</code>
disable-ibm-systems-director-agent-on-aix.txt:  - Stop the platform agent: <code>sudo stopsrc -s platform_agent</code>
disable-ibm-systems-director-agent-on-aix.txt:  - Stop cimserver: <code>sudo stopsrc -s cimsys</code>
disable-ibm-systems-director-agent-on-aix.txt:  - Create a backup copy of /etc/inittab  where .yn = your initials <code>cd /etc</code><code>sudo  cp -p inittab inittabg-$(date +%Y%m%d-%H:%M:%S).yn </code>
disable-ibm-systems-director-agent-on-aix.txt:<code> sudo vi /etc/inittab</code><code> platform_agent:2:once:/usr/bin/startsrc -s platform_agent >/dev/null 2>&1</code> <code>cimservices:2:once:/usr/bin/startsrc -s cimsys >/dev/null 2>&1</code>
disablednsforsapprojects.txt:  - Make a backup of existing hosts file<code>sudo cp /etc/hosts /etc/hosts.Backup</code>
disablednsforsapprojects.txt:  - Install this hosts file so that it can reach backup servers<code>echo "127.0.0.1       loopback localhost" | sudo tee /etc/hosts</code><code>sudo vi /etc/hosts</code>Add the host's local entry as follows e.g.<code>10.32.6.33       pocafasv02.amer.int.tenneco.com pocafasv02</code>Then add these for NIM servers<code># For AIX recovery / NIM
disablednsforsapprojects.txt:10.0.48.12      pgnmsv01.amer.int.tenneco.com</code>For netbackup<code># For netbackup team
disablednsforsapprojects.txt:10.56.1.54 taitc054</code>Save the file
disablednsforsapprojects.txt:  - Rename resolv.conf<code>sudo mv /etc/resolv.conf /etc/resolv.conf.Backup</code>
emcodmdefinitions.txt:  - NFS mount the source for packages<code>mount pgnmsv01:/prod/images/EMC/ODM /mnt/emc</code>
emcodmdefinitions.txt:  - Install the filesets<code>installp -acX -d /mnt/emc/5.3.0.6 EMC.Symmetrix.fcp.MPIO.rte EMC.Symmetrix.aix.rte</code>
emcpowerpathencryption.txt:  - As far as emcp_xcryptd, you can stop this daemon from coming up since encryption is not yet supported for AIX Powerpath.<code>sudo /etc/rc.emcp_xcryptd stop</code>
emcpowerpathencryption.txt:  - Disable it from starting automagically.<code>sudo vi /etc/PowerPathExtensions</code>It contains these lines:<code>mpxext:cfgmpx
emcpowerpathencryption.txt:xcryptext:cfgxcrypt</code>Remove the last two lines, save the file. **Note: Do NOT comment out the lines with #. The last two lines must be removed entirely. Using # to comment out the lines will cause PowerPath to not configure devices on reboot.**
emcremoval.txt:    * This is how the problem looks like<code>sudo powermt remove dev=hdiskpower100
emcremoval.txt:Cannot remove device that is in use: hdiskpower100</code>
emcremoval.txt:    * Check for the ''storapid'' process and stop it<code>ps -ef | grep storapid</code>
emcremoval.txt:    * Stop storapid<code>sudo /opt/emc/SYMCLI/V7.1.1/bin/stordaemon shutdown storapid
emcremoval.txt:  Waiting for daemon(s) to shutdown.  This may take several seconds.</code>
emcremoval.txt:    * Stop the storwatchd<code>sudo /opt/emc/SYMCLI/V7.1.1/daemons/storwatchd shutdown storwatchd
emcremoval.txt:      =============================================</code>If it gives this error kill it <code>sudo kill <pid></code>
emcremoval.txt:    * Now remove the device<code>sudo powermt remove dev=hdiskpower100
emcremoval.txt:sudo rmdev -dl hdisk381</code>
emcsymcli.txt:  - NFS mount the software source<code>mkdir -p /mnt/symcli
emcsymcli.txt:mount pgnmsv01:/prod/images/EMC/SYMCLI /mnt/symcli</code>
emcsymcli.txt:  - Install the fileset<code>installp -acX -d /mnt/symcli all</code>
emcsymcli.txt:  - Cleanup<code>umount /mnt/symcli</code>
enable-lpm-lun-checking:    - logon to the FIOS server as padmin and execure the following command <code> chdev -dev vioslpm0 -attr src_lun_val=on </code>
enable-lpm-lun-checking.txt:    - logon to the VIOS server as padmin and execure the following command <code> chdev -dev vioslpm0 -attr src_lun_val=on </code>
entitlement_update_access_keys.txt:  - To list the Hardware Entitlement - Update Access Key Expiation date <code> sudo lscfg -vpl sysplanar0 | grep " Microcode Entitlement Date" </code>  ^^l
entitlement_update_access_keys.txt:output will be in th form of <code>  Microcode Entitlement Date..20170328 </code>
ethchan-lacp-failovertest.txt:  * Let us define this confusing entstat command to a function so we don't have to repeat it. ** Change ent6 to the SEA device name **<code>function run_entstat {
ethchan-lacp-failovertest.txt:}</code>
ethchan-lacp-failovertest.txt:  * When everything is normal, if we were to execute this command<code>run_entstat</code>We get something similar to this in the output<code>VLAN Ids :
ethchan-lacp-failovertest.txt:Control Channel Adapter: ent2</code>The fields are self explanatory.
ethchan-lacp-failovertest.txt:  * To remove ent0 from LACP configuration of ent6(ent5), execute this command<code>sudo /usr/lib/methods/ethchan_config -d -p ent6 ent5 ent0 
ethchan-lacp-failovertest.txt:</code>
ethchan-lacp-failovertest.txt:  * Let us re-run the entstat function and see what is different<code>run_entstat</code>We get something similar to this in the output<code>VLAN Ids :
ethchan-lacp-failovertest.txt:Control Channel Adapter: ent2</code>As we see, the Number of adapters have decreased to "1"
ethchan-lacp-failovertest.txt:  * To add ent0 back to LACP configuration of ent6(ent5), execute this command<code>sudo /usr/lib/methods/ethchan_config -a -p ent6 ent5 ent0 
ethchan-lacp-failovertest.txt:</code>
ethchan-lacp-failovertest.txt:  * At this time if we execute the entstat function<code>run_entstat</code>We would see<code>VLAN Ids :
ethchan-lacp-failovertest.txt:Control Channel Adapter: ent2</code>The number of adapters have changed to "2", Aggregation status is "Negotiating". After a few seconds, you repeat the same command<code>run_entstat</code>We will see ...<code>VLAN Ids :
ethchan-lacp-failovertest.txt:Control Channel Adapter: ent2</code>It is now "Aggregated", number of adapters are "2" - All good.
ethchan-lacp-failovertest.txt:  * We could also use this shell script on the VIOS server instead of the function<code>/usr/local/scripts/chkviosnet</code>
failoverethchannel.txt:  - <code>sudo /usr/lib/methods/ethchan_config -f  'ent14'</code>
fedoranotes.txt:  * Edit sudoers<code>su -
fedoranotes.txt:echo 'x1rzb826        ALL=(ALL)       NOPASSWD: ALL' >> /etc/sudoers</code>
fedoranotes.txt:  * Configure proxy for yum<code>sudo vi /etc/yum.conf</code>Add<code>proxy=http://170.64.0.72:8080
fedoranotes.txt:proxy_password=XX</code>
fedoranotes.txt:  * Update to the latest patch level.<code>sudo yum update</code>
fedoranotes.txt:  * Install some basic softwares<code>sudo yum -y install wget shutter putty geany</code>
fedoranotes.txt:  * Install Libre Office<code>sudo yum groupinstall "Office/Productivity"</code>
fedoranotes.txt:  * Install nvidia drivers**use the default drivers unless needed**<code>sudo yum localinstall --nogpgcheck http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpm http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-stable.noarch.rpm
fedoranotes.txt:sudo dracut /boot/initramfs-$(uname -r).img $(uname -r)</code>Now reboot<code>sudo init 6</code>
fedoranotes.txt:  * Install VirtualBox<code>sudo vi /etc/yum.repos.d/virtualbox.repo</code>Edit it <code>[virtualbox]
fedoranotes.txt:gpgkey=https://www.virtualbox.org/download/oracle_vbox.asc</code>
fedoranotes.txt:  * Install some more <code>sudo yum install binutils gcc make patch libgomp glibc-headers glibc-devel kernel-headers kernel-devel dkms</code>
fedoranotes.txt:  * Install VirtualBox<code>sudo yum install VirtualBox</code><code>sudo /etc/init.d/vboxdrv setup</code><code>sudo usermod -a -G vboxusers x1kxk630</code>
fedoranotes.txt:    * iptables<code>sudo chkconfig --level 234 iptables off
fedoranotes.txt:sudo service iptables stop</code>
fedoranotes.txt:    * On F20 and F21 it is firewald<code>sudo systemctl disable firewalld.service</code>
fedoranotes.txt:  * Install Google Chrome.<code>sudo vi /etc/yum.repos.d/google-chrome.repo</code>Add this<code>[google-chrome]
fedoranotes.txt:gpgcheck=1</code>Install it <code>sudo yum install google-chrome-stable</code>
fedoranotes.txt:  * Install pre-requisits<code>sudo yum install tcsh libart_lgpl_2.so.2 libasound.so.2 libatk-1.0.so.0 libbonobo-2.so.0 \
fedoranotes.txt:libXss.so.1 libXt.so.6 libXtst.so.6 libz.so.1 gnome-desktop -y</code>
fedoranotes.txt:  * Install wget<code>sudo yum -y install wget</code>
fedoranotes.txt:  * Get the lotus notes client<code>cd /var/tmp
fedoranotes.txt:tar xvf lotus-8.5.3.tar</code>
fedoranotes.txt:  * **This will probably break other apps** ( I did not install Java but used the one that came with Fedora)Install Java, Ignore if it says already installed<code>sudo rpm -Uvh /var/tmp/notes/jre-6u29-linux-amd64.rpm</code>
fedoranotes.txt:  * **This will probably break other apps** ( I did not install Java but used the one that came with Fedora)Configure Java<code>sudo alternatives --install /usr/bin/java java /usr/java/jre1.6.0_29/bin/java 20000
fedoranotes.txt:sudo alternatives --config java</code>
fedoranotes.txt:  * Install Lotus notes<code>sudo yum install /var/tmp/notes/ibm_lotus_notes-8.5.3.i586.rpm</code>
fedoranotes.txt:  * Install Sametime<code>sudo yum install /var/tmp/notes/ibm_lotus_sametime-8.5.3.i586.rpm</code>
fedoranotes.txt:  * Install notes libs<code>cd /opt/ibm/lotus/notes
fedoranotes.txt:sudo chmod 777 *.so.0</code>
filesystemexpansion-rhel.txt:  - Request would look like<code>Please make /oracle/client 1.5 GB on daerap01h</code>
filesystemexpansion-rhel.txt:  - The first step to do is, find out if this is a VM or a physical system.<code>sudo dmesg | grep -i "Hypervisor detected"</code>
filesystemexpansion-rhel.txt:    - If the output shows something like below, it is a VM under VMWARE.<code>[    0.000000] Hypervisor detected: VMware</code>
filesystemexpansion-rhel.txt:  - Check the filesystem<code>df -h /oracle</code><code>Filesystem                          Size  Used Avail Use% Mounted on
filesystemexpansion-rhel.txt:/dev/mapper/datavg01-oracle_client  976M  153M  757M  17% /oracle/client</code><code>mount | grep oracle</code><code>/dev/mapper/datavg01-oracle_client on /oracle/client type ext4 (rw,relatime,seclabel,data=ordered)</code>
filesystemexpansion-rhel.txt:    - From this you now know<code>VG Name       : datavg01
filesystemexpansion-rhel.txt:FS Type       : ext4</code>
filesystemexpansion-rhel.txt:  - Check if the volume group has free space<code>sudo vgs datavg01</code><code>  VG       #PV #LV #SN Attr   VSize  VFree
filesystemexpansion-rhel.txt:  datavg01   1  11   0 wz--n- 34.00g 4.50g</code>
filesystemexpansion-rhel.txt:    - Figure out the disk that belongs to datavg01<code>sudo pvs  | grep datavg01</code><code>  /dev/sdc   datavg01 lvm2 a--  34.00g    4.50g</code>
filesystemexpansion-rhel.txt:    - From the above output, we now know<code>
filesystemexpansion-rhel.txt:Size     :   34G</code>
filesystemexpansion-rhel.txt:    - Double check the disk size<code>sudo fdisk -l /dev/sdc</code><code>Disk /dev/sdc: 36.5 GB, 36507222016 bytes, 71303168 sectors
filesystemexpansion-rhel.txt:I/O size (minimum/optimal): 512 bytes / 512 bytes</code>It does report 36.5GB, It has something to do with the way fdisk and pvs commands display the output capacity.
filesystemexpansion-rhel.txt:    - "/dev/sdc" is the 3rd disk on this system i.e.<code>sudo fdisk -l | grep /dev/sd.:</code>In this case<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors ( Hard Disk 0 )
filesystemexpansion-rhel.txt:Disk /dev/sdc: 36.5 GB, 36507222016 bytes, 71303168 sectors ( Hard Disk 0 )</code>
filesystemexpansion-rhel.txt:    - Come back to the server's putty session and rescan the device<code>echo "1" | sudo tee /sys/block/sdc/device/rescan</code>
filesystemexpansion-rhel.txt:    - Run fdisk and make sure the size has changed<code>sudo fdisk -l | grep /dev/sd.:</code>In this case<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors ( Hard Disk 0 )
filesystemexpansion-rhel.txt:Disk /dev/sdc: 46.5 GB, 36507222016 bytes, 71303168 sectors ( Hard Disk 0 )</code>
filesystemexpansion-rhel.txt:    - Resize the PV so the new size can be seen to the VG<code>sudo pvresize /dev/sdc</code>
filesystemexpansion-rhel.txt:  - Expand the logical volume<code>sudo lvextend -L 1.5g /dev/datavg01/oracle_client</code>
filesystemexpansion-rhel.txt:    - ext3 and ext4 <code>sudo /usr/sbin/resize2fs /dev/datavg01/oracle_client</code>
filesystemexpansion-rhel.txt:    - xfs <code>sudo /usr/sbin/xfs_growfs /dev/datavg01/oracle_client</code>
filesystemexpansion.txt:  - A typical filesystem expansion can come in these fashions<code>Please increase filesystem /oracle/CTB/sapdata3 by 10G on dahrdb01</code>OR<code>Filesystem /oracle/CTB/sapdata3 is 95% on dahrdb01, please increase the filesystemby 10G</code>
filesystemexpansion.txt:  - From the above ticket, we know,<code>Hostname is dahrdb01
filesystemexpansion.txt:Filesystem is to be increased by an additional 10G</code>
filesystemexpansion.txt:  - Find out the volume group the filesystem is on<code>df -k /oracle/CTB/sapdata3
filesystemexpansion.txt:/dev/fslv19       6684672   1568888   77%       13     1% /oracle/CTB/sapdata3</code>The logical volume is **fslv19**<code>lslv fslv19 | grep "VOLUME GROUP"
filesystemexpansion.txt:LOGICAL VOLUME:     fslv19                 VOLUME GROUP:   datavg01</code>The volume group is **datavg01**
filesystemexpansion.txt:  - Find out if the volume group has enough space or not<code>lsvg datavg01 | grep "FREE PPs:"
filesystemexpansion.txt:MAX LVs:            256                      FREE PPs:       461 (29504 megabytes)</code>That says we have 29 Gig free here. Thats good news ....
filesystemexpansion.txt:  - Increase the filesystem size<code>sudo chfs -a size=+10G /oracle/CTB/sapdata3
filesystemexpansion.txt:Filesystem size changed to 34340864</code>
filesystemexpansion.txt:    - If you get an error message like this<code>0516-787 extendlv: Maximum allocation for logical volume fslv19
filesystemexpansion.txt:        is 102.</code>This means, the "Maximum LPs" parameter set for this logical volume is 102. Hence, the logical volume size is limited to 102 * 64 Meg = 6528Meg. This can be fixed by changing the Max LPs value higher. In this case, an increase by 10G would bring this filesystem(logical volume) to approx 16G, so we need to make the "Max LP" parameter to atleast 16 * 1024 / 64 = 256<code>sudo chlv -x 300 fslv19</code>Once done, retry the chfs command and it will succeed.
filesystemexpansion.txt:  - Let us redo the check again<code>lsvg datavg01 | grep "FREE PPs:"
filesystemexpansion.txt:MAX LVs:            256                      FREE PPs:       461 (29504 megabytes)</code>That says we have 29 Gig free here. That is no a good news if we were to expand the filesystem by 50G.
filesystemexpansion.txt:  - List the disks that makes up the volume group<code>x1kxk630 on dahrdb01:/home/x1kxk630 $ lsvg -p datavg01
filesystemexpansion.txt:hdisk9            active            539         10          01..00..00..00..09</code>
filesystemexpansion.txt:    - Virtual SCSI Disk Drive(dahrdb01)<code>x1kxk630 on dahrdb01:/home/x1kxk630 $ lsdev -Ccdisk | egrep "hdisk4|hdisk5|hdisk8|hdisk9"
filesystemexpansion.txt:hdisk9 Available  Virtual SCSI Disk Drive</code>In this case, they are Virtual SCSO Disk Drive. These disks are virtualized by VIOS servers. This URL will show you a map between the lpar and VIOS servers.[[http://unixdocs/doku.php?id=unix:viodisksmap-summary]]
filesystemexpansion.txt:    - EMC MPIO disk(tedv2d01)<code>hdisk2  Available 08-00-02 EMC Symmetrix FCP MPIO VRAID
filesystemexpansion.txt:hdisk6  Available 08-00-02 EMC Symmetrix FCP MPIO VRAID</code>
filesystemexpansion.txt:    - EMC Powerpath disks(peerdb98<code>hdiskpower96  Available 02-08-02 PowerPath Device
filesystemexpansion.txt:hdiskpower101 Available 02-08-02 PowerPath Device</code>
filesystemexpansion.txt:    - SCSI disks<code>hdisk2 Available 00-08-01-4,0 16 Bit LVD SCSI Disk Drive
filesystemexpansion.txt:hdisk5 Available 03-08-00-8,0 16 Bit LVD SCSI Disk Drive</code>
filesystemmigrationpggpdb01.txt:  - Create new vg in this case datavg02<code>mkvg -B -s 512 -y datavg02 disk1 .....</code>
filesystemmigrationpggpdb01.txt:  - Create new filesystem<code>lsvgfs datavg01 | xargs -n1 df -g | grep -v File | grep -v sapdata | awk '{print "/NEW"$NF}' | xargs -n1 sudo mkdir -p
filesystemmigrationpggpdb01.txt:sudo crfs -vjfs2 -g datavg02 -A yes -t no -m /NEW/usr/sap/PLP/SUM -a size=1G49G</code>
filesystemmigrationpggpdb01.txt:  - Start the rsync with --delete option<code>sudo rsync --delete  -axvv /application/CA/ /NEW/application/CA/
filesystemmigrationpggpdb01.txt:sudo rsync --delete  -axvv /usr/sap/PLP/SUM/ /NEW/usr/sap/PLP/SUM/</code>
filesystemmigrationpggpdb01.txt:  - Unmount all filesystems<code>lsvgfs datavg01 | sort -r | xargs -n1 sudo umount</code>
filesystemmigrationpggpdb01.txt:    - To check the filesystem<code>lsvgfs datavg01 | grep -v sapdata | awk '{print "/OLD"$NF}'</code>
filesystemmigrationpggpdb01.txt:    - Rename the filesystem to /old<code>sudo chfs -m /OLD/application/CA /application/CA
filesystemmigrationpggpdb01.txt:sudo chfs -m /OLD/usr/sap/PLP/SUM /usr/sap/PLP/SUM</code>
filesystemmigrationpggpdb01.txt:  - Disable cio options on filesystems<code>sudo chfs -a options="" /OLD/oracle/PLP/mirrlogA
filesystemmigrationpggpdb01.txt:sudo chfs -a options="" /OLD/oracle/PLP/origlogC</code>
filesystemmigrationpggpdb01.txt:  - Mount the /OLD filesystems<code>lsvgfs datavg01 | grep -v sapdata | xargs -n1 sudo mount</code>
filesystemmigrationpggpdb01.txt:  - Start the rsync with --delete option<code>sudo rsync --delete  -axvv /OLD/application/CA/ /NEW/application/CA/
filesystemmigrationpggpdb01.txt:sudo rsync --delete  -axvv /OLD/usr/sap/PLP/SUM/ /NEW/usr/sap/PLP/SUM/</code>
filesystemmigrationpggpdb01.txt:  - Unmount /OLD filesystems and configure them to not auto mount<code>lsvgfs datavg01 | grep -v sapdata | sort -r | xargs -n1 sudo umount
filesystemmigrationpggpdb01.txt:lsvgfs datavg01 | grep -v sapdata | xargs -n1 sudo chfs -A no</code>
filesystemmigrationpggpdb01.txt:  - Unmount /NEW filesystems from datavg02<code>lsvgfs datavg02 | sort -r | xargs -n1 sudo umount</code>
filesystemmigrationpggpdb01.txt:  - Rename /NEW / <code>sudo chfs -m /application/CA /NEW/application/CA
filesystemmigrationpggpdb01.txt:sudo chfs -m /usr/sap/PLP/SUM /NEW/usr/sap/PLP/SUM</code>
filesystemmigrationpggpdb01.txt:  - Enable the cio options in filesystems<code>sudo chfs -a options=cio /oracle/PLP/mirrlogA
filesystemmigrationpggpdb01.txt:sudo chfs -a options=cio /oracle/PLP/origlogC</code>
filesystemmigrationpggpdb01.txt:  - To check if we can mount all the filesystems on datavg02<code>lsvgfs datavg02 | xargs -n1 sudo mount</code>
filesystemmigrationpggpdb01.txt:  - Unmount all the filesystems on datavg02<code>lsvgfs datavg02 |sort -r | xargs -n1 sudo umount</code>
filesystemmigrationpggpdb01.txt:  - Make sure all the filesystems are unmount and then export both datavg01 & datavg02<code>sudo exportvg datavg01
filesystemmigrationpggpdb01.txt:sudo exportvg datavg02</code>
filesystemmigrationpggpdb01.txt:  - import datavg02 as datavg01<code>sudo importvg -y datavg01 00cc49c70a92319d</code>
filesystemmigrationpggpdb01.txt:  - Import datavg01 as datavg02<code>sudo importvg -y datavg02 00f72d67670cc971</code>
filesystemmigrationpggpdb01.txt:  - Mount datavg01 first and then sapdata filesystems on datavg02<code>lsvgfs datavg01 | sort | xargs -n1 sudo mount
filesystemmigrationpggpdb01.txt:lsvgfs datavg02 | sort | xargs -n1 sudo mount</code>
fix-failed-aso.txt:  - On the server that you just upgraded, mount the lppsource that was used for the upgrade from pgnmsv01 and change direct to it. <code> mount pgnmsv01:/prod/images/lppsr/710TL03-04 /mnt </code> <code>cd /mnt</code>
fix-failed-aso.txt:  - from the command line<code> smitty </code>
fix-failed-aso.txt:  - press F4 and  do a search for  bos.aso from the drop down list. select <code> bos.aso                                                            ALL
fix-failed-aso.txt:@ 7.1.3.15  Active System Optimizer                                  </code>
fix-failed-aso.txt:  - On the menu change the following options. <code>AUTOMATICALLY install requisite software?           no</code><code>OVERWRITE same or newer versions?                   yes</code><code>ACCEPT new license agreements?                      yes </code>
fix-failed-aso.txt:  - Press enter to continue, This will overwrite the existing version with the base code.
fix-failed-aso.txt:  - Once this has completed. retrun to the Inatall and Update Sofware Menu and selsct <code>  Update Installed Software to Latest Level (Update All)</code> 
fix-failed-aso.txt:  - change the following options <code> ACCEPT new license agreements?                      yes </code> and press enter to continue.  This will apply the update to the bos.aso
fixdyntrk.txt:  - Check the flags<code>lspath | awk '{print $NF}' | sort -u |grep fscsi| xargs -n1 lsattr -a dyntrk -a fc_err_recov -El</code>
fixdyntrk.txt:  - Fix them<code>for adapter in $(lspath | awk '{print $NF}' | sort -u |grep fscsi)
fixdyntrk.txt:done</code>
fixdyntrk.txt:  - Check the flags<code>lspath | awk '{print $NF}' | sort -u |grep fscsi| xargs -n1 lsattr -a dyntrk -a fc_err_recov -El</code>
fixdyntrk.txt:  - Check the flags again<code>lspath | awk '{print $NF}' | sort -u |grep fscsi| xargs -n1 lsattr -a dyntrk -a fc_err_recov -El</code>
fixdyntrk.txt:  - Check the parameters<code>lscfg | grep fscsi | awk '{print $2}' | xargs -n1 lsattr -a dyntrk -a fc_err_recov -El</code>
fixdyntrk.txt:  - Check the powerpath adapters<code>sudo powermt display</code>
fixdyntrk.txt:    - Take one path offline<code>sudo powermt remove hba=0</code>
fixdyntrk.txt:    - Find the hardware path<code>lscfg | grep fscsi0</code>
fixdyntrk.txt:    - List all devices (minus hdiskpower) to a file<code>lscfg | grep U7311.D20.10078AB-P1-C07-T1| grep -v power| egrep "hdisk|sfw|fcnet" | sort | awk '{print $2}' > devices</code>
fixdyntrk.txt:    - Change their status to "Defined"<code>for dev in $(cat devices)
fixdyntrk.txt:done</code>
fixdyntrk.txt:    - Change the parameter<code>sudo chdev -l fscsi0 -a fc_err_recov=fast_fail -a dyntrk=yes</code>
fixdyntrk.txt:    - Change the devices status to "Available"<code>for dev in $(cat devices | sort -r)
fixdyntrk.txt:done</code>
fixdyntrk.txt:    - Reconfigure powerpath<code>sudo powermt config</code>
fixodmdefinitions.txt:  * The first note<code>for dev in $(odmget -q "attribute = reserve_lock" PdAt | egrep "SYM|CLAR" | awk '{print $NF}' | sed "s;\";;g" )
fixodmdefinitions.txt:done</code>
fixodmdefinitions.txt:    * **reserve_lock** Check first<code>sudo odmget -q "attribute = reserve_lock" PdAt | grep -p "deflt = \"yes\""</code>Then change<code>for dev in $(sudo odmget -q "attribute = reserve_lock" PdAt | grep uniquetype | sort -u | egrep -v "rwoptical|iscsi|cdrom" | awk '{print $NF}' | sed "s;\";;g")
fixodmdefinitions.txt:done</code>Now check again<code>sudo odmget -q "attribute = reserve_lock" PdAt | grep -p "deflt = \"yes\""</code>
fixodmdefinitions.txt:    * **reserve_policy** Check first<code>sudo odmget -q "attribute = reserve_policy" PdAt | grep -p "/fcp" | grep -vp "deflt = \"no_reserve\""</code>Then change<code>for dev in $(sudo odmget -q "attribute = reserve_policy" PdAt | grep -p "/fcp"| grep uniquetype | sort -u | egrep -v "rwoptical|iscsi|cdrom" | awk '{print $NF}' | sed "s;\";;g")
fixodmdefinitions.txt:done</code>Check again<code>sudo odmget -q "attribute = reserve_policy" PdAt| grep -p "/fcp" | grep -vp "deflt = \"no_reserve\""</code>
fixrmcconnections.txt:    * AIX 6.1 TL5 or lower<code>lslpp -l csm.client</code>
fixrmcconnections.txt:    * AIX 6.1 TL6 or higher<code>lslpp -l rsct.core.rmc</code>This fileset needs to be 3.1.0.x level or higher 
fixrmcconnections.txt:  * Check if all IPs and host IDs are trusted<code>/usr/sbin/rsct/bin/ctsvhbac</code>
fixrmcconnections.txt:  * Login to the HMC as hscroot and check the Dcap value<code>lspartition -dlpar | grep -a2 <lparname></code>The Dcap value should be 'non-zero'<code><#37> Partition:<2*8205-E6C*102D67R, taprvio60e50.amer.int.tenneco.com, 10.32.50.71>
fixrmcconnections.txt:       Active:<1>, OS:<AIX, 6.1, 6100-00-00-0000>, DCaps:<0x4f9f>, CmdCaps:<0x1b, 0x1b>, PinnedMem:<2333></code>
fixrmcconnections.txt:  * If we found a negative answer to any of the above commands, execute these commands on the lpar. This fixed the problem on taprvio60 and 70.<code>odmdelete -o CuAt -q "name='cluster0'"
fixrmcconnections.txt:/usr/sbin/rsct/bin/rmcctrl -p</code>
fixrmcconnections.txt:  * Give it some time <code>sleep 240</code>
fixrmcconnections.txt:  * Now run lsrsrc<code>lsrsrc IBM.MCP</code>If this returns resources, we are good.
fixrmcconnections.txt:  * Login to HMC and check the Dcap value now<code>lspartition -dlpar | grep -a2 <lparname></code>The Dcap value should be 'non-zero'<code><#37> Partition:<2*8205-E6C*102D67R, taprvio60e50.amer.int.tenneco.com, 10.32.50.71>
fixrmcconnections.txt:       Active:<1>, OS:<AIX, 6.1, 6100-00-00-0000>, DCaps:<0x4f9f>, CmdCaps:<0x1b, 0x1b>, PinnedMem:<2333></code>
flexnet-cadverter-license-install.txt:  * You will need to coment out a line in /etc/inittab so make a copy of it now where yyyymmdd is current date <code> cd /etc </code><code> sudo cp -p inittab inittab-$(date +%Y%m%d-%H:%M:%S)</code>
flexnet-cadverter-license-install.txt:  * Edit the the inittab file <code>sudo vi inittab </code>
flexnet-cadverter-license-install.txt:  * Comment out the following line <and save the file. Note in the inittab a ":" is the comment character of choice, but a "#" will also work.  <code>flexlmtheorem:2:respawn:/opt/FLEXnet/cadverter/daemon_theorem start >/dev/null 2>&1 </code> 
flexnet-cadverter-license-install.txt:  * Now tell the init command to re-examine the /etc/inittab file Note in AIX the telint and init commands are identical in purpose. See https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.cmds5/telinit.htm <code> telinit q</code>
flexnet-cadverter-license-install.txt:  * Change to the cadverter directory <code>cd /opt/FLEXnet/cadverter </code>
flexnet-cadverter-license-install.txt:  * Save the current license as backup where yyyymmdd is current date <code>sudo cp -p license.lic license.lic-$(date +%Y%m%d-%H:%M:%S)</code>  
flexnet-cadverter-license-install.txt:  * Copy the new licene <code>sudo cp -p {new license location} ./license.lic</code>
flexnet-cadverter-license-install.txt:  * Copy the license.lic file to theorem.lic.<code> sudo cp -p license.lic theorem.lic</code>
flexnet-cadverter-license-install.txt:  * Owner & group of theorem.lic should be root:system If they are not correct fix them now <code> chown root:system theorem.lic </code>
flexnet-cadverter-license-install.txt:  * Change the permissions on the therom.lic file <code>sudo chmod 666 theorem.lic</code>
flexnet-cadverter-license-install.txt:  * Invoke the new license <code>sudo ./lmutil lmreread -c ./license.lic</code>
flexnet-cadverter-license-install.txt:  * <code> sudo ./daemon_theorem start</code>
flexnet-cadverter-license-install.txt: i* Edit the the inittan file <code>sudo vi initab </code>
flexnet-cadverter-license-install.txt:  * Uncomment out the following line (you commented this out earlier) and save the file.  <code>flexlmtheorem:2:respawn:/opt/FLEXnet/cadverter/daemon_theorem start >/dev/null 2>&1 </code>
flexnet-cadverter-license-install.txt:  * Now tell the init command to re-examine the /etc/inittab file Note in AIX the telint and init commands are identical in purpose. See https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.cmds5/telinit.htm <code> telinit q</code>
freshinstallation.txt:  - Define the target server **xagi3p01** on NIM<code>nim -o define -t standalone -a platform=chrp \
freshinstallation.txt:xagi3p01</code>
freshinstallation.txt:    - AIX 6<code>nim -o bos_inst -a source=rte -a spot=610TL07-05_spot -a lpp_source=610TL07-05_lppsrc -a no_client_boot=yes -a accept_licenses=yes xagi3p01</code>
freshinstallation.txt:    - AIX 7<code>nim -o bos_inst -a source=rte -a spot=710TL02-02_spot -a lpp_source=710TL02-02_lppsrc -a no_client_boot=yes -a accept_licenses=yes penmsv01</code>
freshinstallation.txt:  - Install SSH after the base installation is completed. Login as root<code>mkdir -p /mnt/aixupdates
freshinstallation.txt:mount <nimserver>:/path/to/lppsrc /mnt/aixupdates</code>Install it<code>installp -acX -d /mnt/aixupdates openssh.base.client openssh.base.server openssh.license openssh.man.en_US openssh.msg.en_US</code>
freshinstallation.txt-2015-03-31.cs:  - Define the target server **xagi3p01** on NIM<code>nim -o define -t standalone -a platform=chrp \
freshinstallation.txt-2015-03-31.cs:xagi3p01</code>
freshinstallation.txt-2015-03-31.cs:    - AIX 6<code>nim -o bos_inst -a bosinst_data=aixmigration-bosinst -a source=rte -a spot=610TL07-05_spot -a lpp_source=610TL07-05_lppsrc -a no_client_boot=yes -a accept_licenses=yes -a script=postinstallCloning xagi3p01</code>
freshinstallation.txt-2015-03-31.cs:    - AIX 7<code>nim -o bos_inst -a source=rte -a spot=710TL02-02_spot -a lpp_source=710TL02-02_lppsrc -a no_client_boot=yes -a accept_licenses=yes penmsv01</code>
fscreation-aix.txt:  * Create tsbivg01<code>sudo mkvg -B -s 512 -y tsbivg01 hdisk26 hdisk27 hdisk28 hdisk29 hdisk30</code>
fscreation-aix.txt:  - The storage request looked like this<code>/oracle/TSBI           10g
fscreation-aix.txt:/oracle/TSBI/112_64    10g</code>
fscreation-aix.txt:  - Prepare commands to create logicalvolumes<code>cat /var/tmp/tsbiinfo | sed -e "s;/oracle;ora;g" -e "s;/;;g" \
fscreation-aix.txt:|sed "s;g$;;g" |  awk '{print $1,$2*1024/512}' | awk '{print "mklv -tjfs2 -y "$1,"tsbivg01",$NF}' > /var/tmp/cr_lv_cmds</code>
fscreation-aix.txt:  - Check the script<code>mklv -tjfs2 -y oraTSBI tsbivg01 80
fscreation-aix.txt:mklv -tjfs2 -y oraTSBI112_64 tsbivg01 80</code>
fscreation-aix.txt:  - Create the logical volumes<code>sudo ksh -x /var/tmp/cr_lv_cmds
fscreation-aix.txt:oraTSBI112_64</code>
fscreation-aix.txt:  - Increase the Maximum allocation for LV where seems needed<code>for lv in lv1 lv2 .......
fscreation-aix.txt:done</code>
fscreation-aix.txt:  - Create filesystems<code>cat /var/tmp/tsbiinfo | awk '{print $1}' > /var/tmp/fsnames
fscreation-aix.txt:cat /var/tmp/cr_lv_cmds | awk '{print $4}' > /var/tmp/lvnames</code>Get the commands<code>paste /var/tmp/lvnames /var/tmp/fsnames \
fscreation-aix.txt:| awk '{print "crfs -vjfs2 -d "$1,"-A yes -t no -m "$NF}' > /var/tmp/cr_fs.tsbi</code>
fscreation-aix.txt:  - Create filesystems<code>root on taitc102:/root>sudo ksh -x /var/tmp/cr_fs.tsbi
fscreation-aix.txt:New File System size is 20971520</code>
fscreation-aix.txt:  - Mount the filesystems<code>for fs in $(lsvgfs tsbivg01 | sort )
fscreation-aix.txt:done</code>
fscreation-aix.txt:  - Set permissions for filesystems<code>for fs in $(lsvgfs tsbivg01 | sort )
fscreation-aix.txt:done</code>
ftp1.tenneco.con_remove_user.txt:  - Remove the users unique group<code>sudo rmgroup '-p' {user login here}</code>
ftp1.tenneco.con_remove_user.txt:  - Remove the users home directory from /prod/ftp<code>cd /prod/ftp</code>Then<code>sudo rm -r {user login here}</code>
ftp1.tenneco.con_remove_user.txt:  - Modify ssh config file to remove the user id from the appropriate stanza in /etc/ssh/sshd_config<code>sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.$(date +%Y%m%d-%H:%M:%S).yn</code><code>sudo vi /etc/ssh/sshd_config</code>Remove the username to the end of the stanza "Example of overriding settings on a per-user basis"
ftp1.tenneco.con_remove_user.txt:  - Save the file and restart the ssh daemon so the change takes effect <code>sudo kill -HUP $(lssrc -a |grep sshd | awk '{print $3}')</code>
ftp1.tenneco.con_user_setup.txt:    - Change the user shell from /usr/bin/ksh to /usr/sbin/sftp-server <code> sudo chuser shell='/usr/sbin/sftp-server' {user login here} </code> 
ftp1.tenneco.con_user_setup.txt:    - Change the users home directory from /home/user to /prod/ftp/user <code> sudo chuser home='/prod/ftp/{user login here}' {user login here} </code>
ftp1.tenneco.con_user_setup.txt:    - Change the users rlogin to false <code>sudo  chuser rlogin='false' <user login here> </code>
ftp1.tenneco.con_user_setup.txt:    - Set the users password with specified/ requested on one you have generated and documented <code> sudo passwd {user login here}</code>
ftp1.tenneco.con_user_setup.txt:    - Set Password to not request change at first login <code>sudo  pwdadm -c {user login here}</code>
ftp1.tenneco.con_user_setup.txt:    - Set the password to not expire <code> sudo chuser maxage=0 {user login here) </code>
ftp1.tenneco.con_user_setup.txt:    - Get the users UID from /etc/password <code> sudo  grep {user name} /etc/passwd | awk -F: '{print $3}' </code>
ftp1.tenneco.con_user_setup.txt:    - Set so user can only see his own data <code> sudo  mkgroup -'A' id='{UID from step above}' users='{user login here}' {user login here} </code><code> sudo chuser pgrp='{user login here}' {user login here}</code> <code> sudo chuser groups='{user login here}' {user login here} </code>
ftp1.tenneco.con_user_setup.txt:    - Move the users home directory to /prod/ftp <code> cd /prod/ftp </code> <code> sudo mv /home/{user login here} . </code>
ftp1.tenneco.con_user_setup.txt:    - Set the users ownership and group permissions <code> sudo chown {user login here}:{user login here} {user login here} </code>
ftp1.tenneco.con_user_setup.txt:    - Set the permissions so others can not see or cd to user <code>sudo chmod 700 {user login here} </code>
ftp1.tenneco.con_user_setup.txt:   Edit the /etc/ftpusers file and remove the user from the file. <code> sudo vi /etc/ftpusers </code> Delete the users ID and save the file.
ftp1.tenneco.con_user_setup.txt:<code> cd /etc/ssh </code> <code> sudo  cp -p  sshd_config sshd_config-$(date +%Y%m%d-%H:%M:%S).yn </code>
ftp1.tenneco.con_user_setup.txt:<code> sudo vi sshd_config </code> Add the username to the end of the stanza "Example of overriding settings on a per-user basis"
ftp1.tenneco.con_user_setup.txt:    - Save the file and restart the ssh daemon so the change takes effect <code> sudo kill -HUP $(lssrc -a |grep sshd | awk '{print $3}')</code>
ftpfailover-new.txt:  - Open a console session to both the servers from pgnmsv01<code>sudo getconsole paft3p01
ftpfailover-new.txt:sudo getconsole paft3p02</code>
ftpfailover-new.txt:    * paft3p01<code>sudo tar cf /var/tmp/paft3p01.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover-new.txt:sudo rm /var/tmp/paft3p01.ssh.keys.tar</code>
ftpfailover-new.txt:    * paft3p02<code>sudo tar cf /var/tmp/paft3p02.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover-new.txt:sudo rm /var/tmp/paft3p02.ssh.keys.tar</code>
ftpfailover-new.txt:    * At the console execute these commands<code>sudo cp /etc/inetd.conf /etc/inetd.conf.$(date +%m%d%y)
ftpfailover-new.txt:sudo stopsrc -s sshd</code>
ftpfailover-new.txt:    * Disable the FTP daemons<code>cp -p /etc/inittab /etc/inittab.$(date +%m%d%y) 
ftpfailover-new.txt:grep fwder /etc/inittab | sed "s;respawn;off;g" | xargs -n1 echo sudo chitab</code>Execute the commands one at a time.
ftpfailover-new.txt:  - Disable the refresh job on paft3p02. Comment this script<code>01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover-new.txt:  - Perform last sync. Run this script on paft3p02<code>sudo /usr/local/bin/backup.ksh</code>
ftpfailover-new.txt:  - Remove the NFS mount and refresh process on paft3p02<code>sudo umount /taedi61-ftpserv1
ftpfailover-new.txt:sudo crontab -e</code>
ftpfailover-new.txt:  - Backup hosts file on both the servers<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%y)</code>
ftpfailover-new.txt:    * On paft3p01's console<code>sudo ifconfig en4 down detach</code>
ftpfailover-new.txt:    * On paft3p02's console<code>sudo ifconfig en6 down detach</code>
ftpfailover-new.txt:    * On paft3p01's console, Change IP, hostname, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p02' -a'170.64.0.69' -m'255.255.255.192' -i'en4' \
ftpfailover-new.txt:sudo shutdown -Fr</code>
ftpfailover-new.txt:    * On paft3p02's console, Change IP, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p01' -a'170.64.0.68' -m'255.255.255.192' -i'en6' \
ftpfailover-new.txt:sudo shutdown -Fr</code>
ftpfailover-new.txt:  - Enable FTP service and SFTP on paft3p01<code>sudo perl -i -p -e 's/^#mailbox_lm/mailbox_lm/' /etc/inetd.conf
ftpfailover-new.txt:sudo refresh -s inetd</code>
ftpfailover-new.txt:  - Enable FTP daemons<code>cp -p /etc/inittab /etc/inittab.$(date +%m%d%y)
ftpfailover-new.txt:grep fwder /etc/inittab | sed "s;off;respawn;g" | xargs -n1 echo sudo chitab</code>**Execute the resulting commands one at a time carefully.**
ftpfailover-new.txt:  - Enable refresh process on paft3p02<code>sudo mount /taedi61-ftpserv1
ftpfailover-new.txt:sudo crontab -e</code>Un-comment this script<code>#01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover-new.txt:  - Update the information on the console database @ pgnmsv01 <code>sudo vi /prod/images/etc/unix_sys_console</code>
ftpfailover.txt:  - Open a console session to both the servers from pgnmsv01<code>sudo getconsole paft3p01
ftpfailover.txt:sudo getconsole paft3p02</code>
ftpfailover.txt:    * paft3p01<code>sudo tar cf /var/tmp/paft3p01.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover.txt:sudo rm /var/tmp/paft3p01.ssh.keys.tar</code>
ftpfailover.txt:    * paft3p02<code>sudo tar cf /var/tmp/paft3p02.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover.txt:sudo rm /var/tmp/paft3p02.ssh.keys.tar</code>
ftpfailover.txt:    * At the console execute these commands<code>sudo cp /etc/inetd.conf /etc/inetd.conf.$(date +%m%d%y)
ftpfailover.txt:sudo stopsrc -s sshd</code>
ftpfailover.txt:    * Disable the FTP daemons<code>cp -p /etc/inittab /etc/inittab.$(date +%m%d%y) 
ftpfailover.txt:grep fwder /etc/inittab | sed "s;respawn;off;g" | xargs -n1 echo sudo chitab</code>Execute the commands one at a time.
ftpfailover.txt:  - Disable the refresh job on paft3p02. Comment this script<code>01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover.txt:  - Perform last sync. Run this script on paft3p02<code>sudo /usr/local/bin/backup.ksh</code>
ftpfailover.txt:  - Remove the NFS mount and refresh process on paft3p02<code>sudo umount /taedi61-ftpserv1
ftpfailover.txt:sudo crontab -e</code>
ftpfailover.txt:  - Backup hosts file on both the servers<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%y)</code>
ftpfailover.txt:    * On paft3p01's console<code>sudo ifconfig en4 down detach</code>
ftpfailover.txt:    * On paft3p02's console<code>sudo ifconfig en6 down detach</code>
ftpfailover.txt:    * On paft3p01's console, Change IP, hostname, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p02' -a'170.64.0.69' -m'255.255.255.192' -i'en4' \
ftpfailover.txt:sudo shutdown -Fr</code>
ftpfailover.txt:    * On paft3p02's console, Change IP, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p01' -a'170.64.0.68' -m'255.255.255.192' -i'en6' \
ftpfailover.txt:sudo shutdown -Fr</code>
ftpfailover.txt:  - Enable FTP service and SFTP on paft3p01<code>sudo perl -i -p -e 's/^#mailbox_lm/mailbox_lm/' /etc/inetd.conf
ftpfailover.txt:sudo refresh -s inetd</code>
ftpfailover.txt:  - Enable FTP daemons<code>cp -p /etc/inittab /etc/inittab.$(date +%m%d%y)
ftpfailover.txt:grep fwder /etc/inittab | sed "s;off;respawn;g" | xargs -n1 echo sudo chitab</code>**Execute the resulting commands one at a time carefully.**
ftpfailover.txt:  - Enable refresh process on paft3p02<code>sudo mount /taedi61-ftpserv1
ftpfailover.txt:sudo crontab -e</code>Un-comment this script<code>#01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover.txt:  - Update the information on the console database @ pgnmsv01 <code>sudo vi /prod/images/etc/unix_sys_console</code>
ftpfailover.txt-20130321.cs:  - Open a console session to both the servers from taitc118<code>sudo getconsole paft3p01
ftpfailover.txt-20130321.cs:sudo getconsole paft3p02</code>
ftpfailover.txt-20130321.cs:    * paft3p01<code>sudo tar cf /var/tmp/paft3p01.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover.txt-20130321.cs:sudo rm /var/tmp/paft3p01.ssh.keys.tar</code>
ftpfailover.txt-20130321.cs:    * paft3p02<code>sudo tar cf /var/tmp/paft3p02.ssh.keys.tar /etc/ssh/ssh_host*
ftpfailover.txt-20130321.cs:sudo rm /var/tmp/paft3p02.ssh.keys.tar</code>
ftpfailover.txt-20130321.cs:    * At the console execute these commands<code>sudo cp /etc/inetd.conf /etc/inetd.conf.$(date +%m%d%y)
ftpfailover.txt-20130321.cs:sudo stopsrc -s sshd</code>
ftpfailover.txt-20130321.cs:    * Disable the FTP daemons<code>sudo chitab advftp:23456789:off:/taedi61/gentran/fwder/advanftp-fwd.sh
ftpfailover.txt-20130321.cs:sudo chitab almaftp:23456789:off:/taedi61/gentran/fwder/almaftp-fwd.sh</code>Check any processes are left and kill them<code>ps -ef | grep ftp</code>
ftpfailover.txt-20130321.cs:  - Disable the refresh job on paft3p02. Comment this script<code>01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover.txt-20130321.cs:  - Perform last sync. Run this script on paft3p02<code>sudo /usr/local/bin/backup.ksh</code>
ftpfailover.txt-20130321.cs:  - Remove the NFS mount and refresh process on paft3p02<code>sudo umount /taedi61-ftpserv1
ftpfailover.txt-20130321.cs:sudo crontab -e</code>
ftpfailover.txt-20130321.cs:  - Backup hosts file on both the servers<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%y)</code>
ftpfailover.txt-20130321.cs:    * On paft3p01's console<code>sudo ifconfig en4 down detach</code>
ftpfailover.txt-20130321.cs:    * On paft3p02's console<code>sudo ifconfig en6 down detach</code>
ftpfailover.txt-20130321.cs:    * On paft3p01's console, Change IP, hostname, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p02' -a'170.64.0.69' -m'255.255.255.192' -i'en4' \
ftpfailover.txt-20130321.cs:sudo shutdown -Fr</code>
ftpfailover.txt-20130321.cs:    * On paft3p02's console, Change IP, make changes in /etc/hosts and reboot<code>sudo /usr/sbin/mktcpip -h'paft3p01' -a'170.64.0.68' -m'255.255.255.192' -i'en6' \
ftpfailover.txt-20130321.cs:sudo shutdown -Fr</code>
ftpfailover.txt-20130321.cs:  - Enable FTP service and SFTP on paft3p01<code>sudo perl -i -p -e 's/^#mailbox_lm/mailbox_lm/' /etc/inetd.conf
ftpfailover.txt-20130321.cs:sudo refresh -s inetd</code>
ftpfailover.txt-20130321.cs:  - Enable FTP daemons<code>sudo chitab advftp:23456789:respawn:/taedi61/gentran/fwder/advanftp-fwd.sh
ftpfailover.txt-20130321.cs:sudo chitab almaftp:23456789:respawn:/taedi61/gentran/fwder/almaftp-fwd.sh</code>
ftpfailover.txt-20130321.cs:  - Enable refresh process on paft3p02<code>sudo mount /taedi61-ftpserv1
ftpfailover.txt-20130321.cs:sudo crontab -e</code>Un-comment this script<code>#01 * * * * /usr/local/bin/backup.ksh 1>/dev/null 2>&1</code>
ftpfailover.txt-20130321.cs:  - Update the information on the console database @ taitc118 <code>sudo vi /prod/images/etc/unix_sys_console</code>
full_file_systems.txt:  - Do a df -g on the suspect file system. This will capture the initial state.  <code> df -g {file system}</code> 
full_file_systems.txt:  - Change direcory to the offending file system <code> cd [file system}</code>
full_file_systems.txt:  - List the files in most recient order of access <code> ls -liat | more </code>
full_file_systems.txt:  - Check for the user writing to the file  displayed above <code> fuser -fu {file name}</code>
full_file_systems.txt:  - Use the find command to locate large files in the file system/directory to see if they canbe cleaned up. <code> find . -depth -size 10000c -exec ls -l {} \;</code>
full_file_systems.txt:  - Another tool is the List Open Files tool lsof. There are several excellent options to assist in determining the process id (pid) and user that is writing to the file.<code> lsof +d {file system}</code><code>lsof +D {file system}</code><code> lsof +d {file system}</code><code>lsof +d {file system} +r</code>
handle-storage-request-on-vio.txt:  - Run cfgmgr on the VIO server on which the guest is running to identify the newly added disks.<code>
handle-storage-request-on-vio.txt:    diff lsdiskcfg.out.before lsdiskcfg.out.after</code>
handle-storage-request-on-vio.txt:  - Allocate pvid, set reservation policy and enable round_robin for the disks on that VIOS server.<code>
handle-storage-request-on-vio.txt:    sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -a pv=yes -l hdisk</code>
handle-storage-request-on-vio.txt:  - Now run cfgmgr on rest of the two VIO servers and enable reservation policy, round_robin for the newly added disks. (Verify the correct disks by looking at the pvid's) <code>
handle-storage-request-on-vio.txt:    sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -l hdisk </code>
handle-storage-request-on-vio.txt:  - Add the disks to the guest from the VIO server where it is present<code>
handle-storage-request-on-vio.txt:    sudo extendvg vgname hdiskx hdisky </code>
hmc.txt:  - List all the frames on an HMC <code> lssyscfg -r sys -F name </code>
hmc.txt:  - List all lpars on a frame <code> lssyscfg -r lpar -m <frame_name> </code>
hmc.txt:  - Turn on an lpar<code>chsysstate -m taitc111-9111-520-SN10B49FD -r lpar -o on -n taitc111-reverseauction</code>
hmc.txt:  - Turn off/on an lpar from NIM server pgnmsv01<code>/usr/local/scripts/manage_lpar <lpar_name> <on/off></code>If you have a bunch of lpars to power off immediately<code>/usr/local/scripts/manage_lpar <lpar_name> <on/off> force</code>
hmcreleaseupgrade.txt:4) Once the HMC hackup has completed log on to the HMC as hscroot. Clear the old log files by entering the following command <code>
hmcreleaseupgrade.txt: chhmcfs -o f -d 0 </code>
hmcreleaseupgrade.txt:<code> 
hmcreleaseupgrade.txt:getupgfiles -h pgnmsv01.amer.int.tenneco.com -u root -d /prod/images/HMC-Code/V7R7.6.0M0/ </code>
hmcreleaseupgrade.txt:6. Once the files have been copied Enter the following at the HMC command line <code> 
hmcreleaseupgrade.txt:chhmc -c altdiskboot -s enable --mode upgrade </code>
hmcreleaseupgrade.txt:7. Finally,reboot the HMC and start the upgrade.<code>
hmcreleaseupgrade.txt:  hmcshutdown -r -t now </code>
housekeeppcdcunxlxap03.txt:    * Login to pcdcunxlxap03<code>ssh pcdcunxlxap03</code>cd to the RDA directory<code>cd /var/www/html/RDA_DATA</code>Housekeep all files older than 90 days.<code>sudo find . -mtime +90 -type f -exec rm  {} \;</code>
how_to_create_ssl_cert_key.txt:  - Check if openssl package is installed.<code>
how_to_create_ssl_cert_key.txt:                                      EFIXLOCKED</code>
how_to_create_ssl_cert_key.txt:  - Run command to generate the SSL KEY & CERT together.<code>openssl req -x509 -nodes -days 999 -newkey rsa:2048 -keyout path.key -out path.crt </code>eg:-<code>openssl req -x509 -nodes -days 999 -newkey rsa:2048 -keyout /opt/freeware/etc/httpd/conf/extra/unixdocsssl.key -out /opt/freeware/etc/httpd/conf/extra/unixdocsssl.crt</code>
how_to_create_ssl_cert_key.txt:  - After generating the SSL KEYS & CERT which needs to be inserted in the *.conf file (eg:- /opt/freeware/etc/httpd/conf/extra/unixdocs.conf)<code><VirtualHost *:80>
how_to_create_ssl_cert_key.txt:</VirtualHost></code> 
how_to_create_ssl_cert_key.txt:<code>LoadModule ssl_module modules/mod_ssl.so
how_to_create_ssl_cert_key.txt:</code>
how_to_create_ssl_cert_key.txt:<code>
how_to_create_ssl_cert_key.txt:# Include conf/extra/httpd-ssl.conf</code>
how_to_create_ssl_cert_key.txt:<code>
how_to_create_ssl_cert_key.txt:  Include conf/extra/httpd-ssl.conf</code>
howtocrrandomperl.txt:  - Store the username in a variable<code>export user_name="x1kxk630"</code>
howtocrrandomperl.txt:  - Set random password in a variable<code>export pass_word=$(perl -le 'print map { (a..z,A..Z,0..9,qw{- _ / & ?})[rand 67] } 0..10')</code>
howtocrrandomperl.txt:  - Encrypt it<code>export pass_word_crypt=$(</code>
hpux-rsync.txt:  - Login to pgnmsv01 and copy the packages to the target server<code>sudo scp -r /prod/images/hpux/rsync/ <hostname>:/var/tmp/</code>
hpux-rsync.txt:  - Login to the target and install the dependencies and rsync.<code>sudo swinstall sudo swinstall -s /var/tmp/popt-1.16-ia64-11.31.depot popt\
hpux-rsync.txt:sudo swinstall -s /var/tmp/rsync-3.1.0-ia64-11.31.depot rsync</code>
hpux-rsync.txt:  - Setup a soft link in /usr/bin<code>sudo ln -s /usr/local/bin/rsync /usr/bin/rsync</code>
hpux-ssh.txt:  - The depot files for HP-UX are here<code>x1kxk630 on pgnmsv01:/home/x1kxk630 $ ls -l /prod/images/hpux
hpux-ssh.txt:-rw-r--r--    1 root     system       839680 Dec 06 2012  zlib-1.2.7-ia64-11.31.depot</code>
hpux-ssh.txt:  - Login to pgnmsv01 and copy the depot file to the target server<code>scp /prod/images/hpux/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot taitc114:/tmp/</code>
hpux-ssh.txt:  - Login to the target system and list the contents of the depot.<code>sudo swlist -d -s /tmp/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot</code>.You should see something like this<code>x1kxk630 on taitc114:/home/x1kxk630 $ sudo swlist -d -s /tmp/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot
hpux-ssh.txt:  SecureShell   A.06.20.012    HP-UX Secure Shell</code>
hpux-ssh.txt:  - Take a look at the current product that is installed<code>sudo swlist -l product SecureShell</code>You should see something like this<code>x1kxk630 on taitc114:/home/x1kxk630 $ sudo swlist -l product SecureShell
hpux-ssh.txt:  SecureShell.Secure_Shell      A.05.30.009    HP-UX Secure Shell</code>
hpux-ssh.txt:  - Perform the upgrade/install<code>sudo swinstall -s /tmp/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot SecureShell</code>You sould expect something like this on the terminal<code>x1kxk630 on taitc114:/home/x1kxk630 $ sudo swinstall -s /tmp/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot SecureShell
hpux-ssh.txt:         (jobid=taitc114-1030)</code>
hpux-ssh.txt:  - Verify ssh is working in & out.<code>ssh pgnmsv01</code>Login to pgnmsv01<code>ssh taitc114</code>
hpux-ssh.txt:  - Cleanup the installation files<code>sudo rm -i /tmp/HP_UX_11i_v3_SecureShell_A.06.20.012_HP-UX_B.11.31_IA_PA.depot</code>
hpuxlvm.txt:  - Document the request<code>To create a new filesystem /oracle/DOMU/data1 of 20g 
hpuxlvm.txt:And extend the filsesystem /oracle/DOMU/data2 by 10g</code>
hpuxlvm.txt:    - a. Find the disks allocated to the system<code>
hpuxlvm.txt:/dev/disk/disk52</code>
hpuxlvm.txt:    - b. Scan for the newly added disk<code>
hpuxlvm.txt:/dev/rdisk/disk63        /dev/rdsk/c16t0d5 /dev/rdsk/c23t0d5 /dev/rdsk/c18t0d5 /dev/rdsk/c22t0d5</code>
hpuxlvm.txt:    - Make sure you have selected the right disk. **Be extremely careful here, HPUX is not forgiving as AIX  it will wipe out a disk that is in use** . Anyways start with checking the size of the disk. We requested for 34G<code>
hpuxlvm.txt:   bytes per sector: 512</code><code>
hpuxlvm.txt:   35354880/1024/1024 is 33.71 -- so yes we have a 34G LUN and we are able to read it.</code>
hpuxlvm.txt:  - Now prepare the disk for LVM And add the disk to the Volume group<code>x1shukla on taitc114:/home/x1shukla $ sudo pvcreate /dev/rdisk/disk63
hpuxlvm.txt:Physical volume "/dev/rdisk/disk63" has been successfully created.</code><code>
hpuxlvm.txt:Volume Group configuration for /dev/vgOVD has been saved in /etc/lvmconf/vgOVD.conf</code>
hpuxlvm.txt:    - create a new FS /oracle/DOMU/data1 of 20g<code>
hpuxlvm.txt:sudo newfs -F vxfs /dev/vgOVD/rlvol11</code>
hpuxlvm.txt:    - Make a new directory to mount the filesystem and mount it<code>
hpuxlvm.txt:sudo mount /oracle/DOMU//data1</code>
hpuxlvm.txt:    - Check it<code>
hpuxlvm.txt:/dev/vgOVD/lvol23 20971520   71784 19593510    0% oracle/DOMU//data1</code>
hpuxlvm.txt:    - Make a entry in /etc/fstab<code>
hpuxlvm.txt:/dev/vgOVD/lvol23 /oracle/DOMU/data1 vxfs rw,suid,largefiles,delaylog,datainlog 0 2</code>
hpuxlvm.txt:    - Extend logical volume /oracle/DOMU/data2 by 10g<code>
hpuxlvm.txt:Volume Group configuration for /dev/vgOVD has been saved in /etc/lvmconf/vgOVD.conf</code>
hpuxlvm.txt:    - Now extend the file system.<code>
hpuxlvm.txt:UX:vxfs fsadm: INFO: V-3-25942: /dev/vgOVD/rlvol1 size increased from 41943040 sectors to 57671680 sectors</code>
hpuxpatches.txt:  * From pgnmsv01, either nfs mount OR scp the file to the target server<code>cd /prod/images/hpux
hpuxpatches.txt:scp hpux_11.31_01140520.tgz taitc114:/opt/oracle</code>
hpuxpatches.txt:  * Logon to the server on it's console.<code>telnet taitc114-gsp</code>Login as Admin.  **Do not use the console to install patches - the console messages will messup the window. Always patch from a ssh session **
hpuxpatches.txt:  * Unzip and untar the patches<code>cd /opt/oracle
hpuxpatches.txt:tar xf hpux_11.31_01140520.tar</code>
hpuxpatches.txt:  * Perform a sanity reboot - This is to make sure that the server is working okay as of now. These servers are rebooted very rarely, hence it is a good idea to reboot it once.<code>shutdown -r -y now</code>
hpuxpatches.txt:  * Create the patch depot<code>cd /opt/oracle
hpuxpatches.txt:./create_depot_hpux.11.31</code>
hpuxpatches.txt:  * Install the patches<code>export LC_ALL=C.en_US
hpuxpatches.txt:swinstall -s /opt/oracle/depot</code>
hpuxsan.txt:  * List Fibre HBAs<code>ioscan -fnkC fc</code>
hpuxsan.txt:  * List WWNs<code>sudo ioscan -fnkC fc 2>/dev/null| grep /dev | xargs -n1 sudo fcmsutil 2>/dev/null \
hpuxsan.txt:|grep "N_Port Port" </code>
hpuxsan.txt:  * SYMINQ<code>sudo /usr/local/scripts/inq.hpux64</code>
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-aix.txt:  - Create users<code>sudo mkuser "id=6885" "pgrp=sapteam"  "home=/home/x1dnyata" "gecos=Dnyanesh Tamboli"  x1dnyata
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-aix.txt:sudo mkuser "id=6331" "pgrp=sapteam"  "home=/home/x1deeps3" "gecos=Deepshikha Sharma" x1deeps3</code>
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-aix.txt:  - Set their initial password<code>echo "x1dnyata:saZs.XXp59b2Q" | sudo /usr/bin/chpasswd -e
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-aix.txt:echo "x1deeps3:saZs.XXp59b2Q" | sudo /usr/bin/chpasswd -e</code>
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-rhel.txt:  - Create Users and set password<code>sudo /usr/sbin/useradd -g sapteam -d /home/x1dnyata -c "Dnyanesh Tamboli"  -m -u 6885 x1dnyata
imoaixbuildclonefordriv-networkisolated-accenturebasisusers-rhel.txt:echo "x1michxi:saZs.XXp59b2Q" | sudo /usr/sbin/chpasswd -e</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Export a variable to store the system name<code>export hmc=cdcvilhmc003
imoaixbuildclonefordriv-networkisolated.txt:export tgtsystem=name_of_the_system</code>
imoaixbuildclonefordriv-networkisolated.txt:    - The manual way<code>sudo vi /prod/images/etc/unix_sys_console</code>Add an entry similar to this<code>pcdcna3axap01.driv.com:lpar-ibm:cdcvilhmc003.fmmotorparts.com:Powervm42-9009-42A-7823D50:pcdcna3axap01::tauxrpt</code>
imoaixbuildclonefordriv-networkisolated.txt:      - Export this function<code>function create_unixconsole {
imoaixbuildclonefordriv-networkisolated.txt:}</code>
imoaixbuildclonefordriv-networkisolated.txt:      - Prepare the output<code>create_unixconsole ${hmc} ${tgtsystem} | sudo tee -a /prod/images/etc/unix_sys_console</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Find our the Frame and HMC, store them in variables<code>export frame=$(grep -i ^${tgtsystem} /prod/images/etc/unix_sys_console | awk -F: '{print $4}' )
imoaixbuildclonefordriv-networkisolated.txt:export hmc=$(grep -i ^${tgtsystem} /prod/images/etc/unix_sys_console | awk -F: '{print $3}' )</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Power on the lpar<code>ssh ${hmc} "chsysstate -r lpar -o on -b sms -m ${frame} -n ${tgtsystem}"</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Access console and look for boot devices and boot from one of the Bootable disks<code>sudo /usr/local/scripts/getconsole ${tgtsystem}</code>
imoaixbuildclonefordriv-networkisolated.txt:  - First change the hostname to avoid any further confusions and accidentally doing harm to production<code> chdev -l inet0 -a hostname=<new_host_name></code>
imoaixbuildclonefordriv-networkisolated.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
imoaixbuildclonefordriv-networkisolated.txt:done</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Remove openview software<code>/usr/lpp/OV/bin/opcagt -version | grep -q -e "^11." -e "^12."
imoaixbuildclonefordriv-networkisolated.txt:esac</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Remove cron<code>rmitab cron</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Disable NFS exports<code>[[ -f /etc/exports ]] && mv /etc/exports /etc/exports.imoclone</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Configure fiber channel HBAs<code>for FSCSI in $(lscfg | grep fscsi | awk '{print $2}' )
imoaixbuildclonefordriv-networkisolated.txt:done</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Set the boot list<code>lspv | grep -w rootvg | awk '{print $1}' | xargs -n1 sudo bootlist -m normal</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Disable DNS<code>mv /etc/resolv.conf /etc/resolv.conf.$(date +%Y%m%d)</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Make a backup of filesystems<code>cp /etc/filesystems /etc/filesystems.$(date +%Y%m%d)</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Remove NFS filesystems<code>for NFS in $(grep -p nfs /etc/filesystems | grep : | sed "s;:;;g" )
imoaixbuildclonefordriv-networkisolated.txt:done</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Shutdown the server<code>shutdown -F</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Connect to console<code>sudo getconsole <system name></code>
imoaixbuildclonefordriv-networkisolated.txt:    - Configure the front end IP address on en0 interface<code>/usr/sbin/mktcpip -h <hostname> -a a.b.c.d -m 255.255.255.0 -i en0 -g a.b.c.d -A no -s</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Cleanup MPIO devices in the ODM<code>lsdev -Cc disk | grep -i defined | awk '{print $1}' | awk '{print $1}' | xargs -n1 sudo rmdev -dl</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Login to pcdcunxaxap01 and define a variable pointing to the system you are building<code>export tgtsystem=<host_name></code>
imoaixbuildclonefordriv-networkisolated.txt:  - Install standard motd<code>sudo scp /prod/images/etc/motd.driv ${tgtsystem}:/etc/motd</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Enable DNS<code>sudo scp /prod/images/etc/resolv.conf.driv ${tgtsystem}:/etc/resolv.conf</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Install a poroper syslog.conf<code>sudo scp /prod/images/etc/syslog.conf.driv ${tgtsystem}:/etc/syslog.conf</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Enable NTP<code>sudo scp /prod/images/etc/ntp.conf.aix.imoclone.driv ${tgtsystem}.driv.com:/etc/ntp.conf
imoaixbuildclonefordriv-networkisolated.txt:sudo ssh ${tgtsystem}.driv.com "ntpdate -u cdcvildns001.fmmotorparts.com"</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Login to the host you are building<code>ssh ${tgtsystem}.driv.com</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Fix hosts file<code>cat << EOF | sudo tee /etc/hosts
imoaixbuildclonefordriv-networkisolated.txt:host $(uname -n) | awk '{print $3"\t"$1"\t"$1"h"}' | sed "s;,;;g" | sed "s;.driv.comh;;g" | sudo tee -a /etc/hosts</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Adjust .information file<code>sudo ex -sc "/mksysbhost/s/pgnmsv01/pcdcunxaxap01/|x" /var/adm/.information
imoaixbuildclonefordriv-networkisolated.txt:sudo ex -sc "/location/s/Lincolnshire/Elk Grove - CDC - DRiV/|x" /var/adm/.information</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Configure the backup network<code>sudo chdev -l en1 -a netaddr=$(host "$(uname -n)bck" | awk '{print $NF}') -a netmask=255.255.254.0 -a state=up</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Remove cron jobs for application accounts<code>for file in $(sudo ls -1 /var/spool/cron/crontabs | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
imoaixbuildclonefordriv-networkisolated.txt:done</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Remove these unwanted cron jobs from root's cron<code>sudo crontab -e</code>Remove these<code>/usr/ibm/common/acsi/bin/collectbatch.sh > fsout.log 2>&1
imoaixbuildclonefordriv-networkisolated.txt:/usr/local/scripts/clean_open-scan.sh > /dev/null 2>&1</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Enable cron<code>sudo mkitab cron:23456789:respawn:/usr/sbin/cron</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Remove old mksysb files<code>sudo rm /bkpmksb/bos.obj.*</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Setup the correct SMTP server<code>sudo cp /etc/sendmail.cf /etc/sendmail.cf.$(date +%d%m%Y)
imoaixbuildclonefordriv-networkisolated.txt:sudo ex -sc "/^DS/s/DS/DSsmtp.driv.com/|x" /etc/sendmail.cf</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Look for another 138G device that is not allocated to any volume group<code>sudo /usr/local/scripts/lsvpcfg.sh</code>
imoaixbuildclonefordriv-networkisolated.txt:    - Remove existing alt_disk and Create a new alt_disk_copy<code>sudo alt_disk_install -X altinst_rootvg
imoaixbuildclonefordriv-networkisolated.txt:sudo alt_disk_copy -B -d hdiskX</code>
imoaixbuildclonefordriv-networkisolated.txt:      - On standalone systems, these will be permanent alias(s)<code>sudo chdev -l en0 -a alias4=a.b.c.d,255.255.255.0</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Change hard coded hostnames from herald<code>sudo chsec -f /etc/security/login.cfg -s /dev/console -a herald=""
imoaixbuildclonefordriv-networkisolated.txt:sudo chsec -f /etc/security/login.cfg -s default -a herald=""</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Create solarwinds account for monitoring<code>sudo mkuser id=6851 pgrp=staff groups=staff home=/home/solwinds shell=/usr/bin/ksh gecos="Solarwinds - ssh monitoring account" solwinds
imoaixbuildclonefordriv-networkisolated.txt:sudo /usr/local/scripts/unlockuser solwinds > /dev/null 2>&1</code>
imoaixbuildclonefordriv-networkisolated.txt:  - Perform a final reboot<code>sudo shutdown -Fr</code>
imoaixbuildclonefordriv.txt:  - For ease of documentation, export variables for source and target systems<code>export srcsystem=<system_of_which_you_plan_to_use_mksysb_from>
imoaixbuildclonefordriv.txt:export tgtsystem=<system_which_you_plan_to_built></code>
imoaixbuildclonefordriv.txt:  - Copy the mksysb to a temp location and umcompress it<code>sudo cp /mksysb-images/bos.obj.${srcsystem}.gz /preupgrade/mksysb/
imoaixbuildclonefordriv.txt:cd /preupgrade/mksysb/ ; sudo gunzip bos.obj.${srcsystem}.gz</code>
imoaixbuildclonefordriv.txt:  - Define a mksysb resource<code>sudo nim -o define -t mksysb -a server=master -a location=/preupgrade/mksysb/bos.obj.${srcsystem} ${srcsystem}-mksysb</code>If NIM complains there is an existing resource with that name, please remove it<code>sudo nim -o remove ${srcsystem}-mksysb</code>
imoaixbuildclonefordriv.txt:  - Find out the OSLEVEL on the system that we plan to clone<code>ssh ${srcsystem} oslevel -s
imoaixbuildclonefordriv.txt:7100-05-02-1810	</code>
imoaixbuildclonefordriv.txt:  - Find out the correct Spot and LPPSRC for the above AIX release level. In this case they are,<code>710TL05-02_spot
imoaixbuildclonefordriv.txt:710TL05-02_lppsrc</code>Export them as variables<code>export lppsrc="710TL05-02_lppsrc"
imoaixbuildclonefordriv.txt:export spot="710TL05-02_spot"</code>
imoaixbuildclonefordriv.txt:  - Add systems to /etc/hosts file because the reverse lookups don't work.<code>host ${tgtsystem}.driv.com | awk '{print $NF"\t"$1}' | sed "s;.driv.com;;g" | sudo tee -a /etc/hosts</code>
imoaixbuildclonefordriv.txt:  - Define system on NIM<code>sudo nim -o define -t standalone -a platform=chrp -a if1="find_net ${tgtsystem} 0" -a netboot_kernel=mp ${tgtsystem}</code>
imoaixbuildclonefordriv.txt:  - Prepare for a NIM installation<code>sudo nim -o bos_inst \
imoaixbuildclonefordriv.txt:${tgtsystem}</code>
imoaixbuildclonefordriv.txt:    - Change the bootp config to send traffic to 10.32.60/24 subnet<code>sudo ex -sc "/${tgtsystem}/s/10.0.48.12/10.32.60.60/|x" /etc/bootptab</code>
imoaixbuildclonefordriv.txt:  - Add the server to the console database **/prod/images/etc/unix_sys_console**<code>sudo vi /prod/images/etc/unix_sys_console</code>
imoaixbuildclonefordriv.txt:    - A regular lpar on a P Series frame<code>pgnmsv01:lpar-ibm:taitc051:pgnmsv01-9111-520-SN10B4F8D:pgnmsv01:2:hscroot</code>
imoaixbuildclonefordriv.txt:    - Find out the frame<code>export frame=$(grep -i ^${tgtsystem} /prod/images/etc/unix_sys_console | awk -F: '{print $4}' )</code>
imoaixbuildclonefordriv.txt:    - Power on <code>ssh cdcvilhmc003.fmmotorparts.com "chsysstate -r lpar -o on -b sms -m ${frame} -n ${tgtsystem}"</code>
imoaixbuildclonefordriv.txt:  - Open up a console session to the new server. On pgnmsv01<code>sudo getconsole ${tgtsystem}</code>
imoaixbuildclonefordriv.txt:    - Details you need<code>Client IP : The IP address of the host you are building
imoaixbuildclonefordriv.txt:Def Route : 10.128.40.1 (MP AIX systems), 10.32.60.1 (LDC Clones)</code>
imoaixbuildclonefordriv.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
imoaixbuildclonefordriv.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
imoaixbuildclonefordriv.txt:done</code>
imoaixbuildclonefordriv.txt:    - Run cfgmgr<code>cfgmgr</code>
imoaixbuildclonefordriv.txt:    - Configure the front end IP address on en0 interface<code>/usr/sbin/mktcpip -h <hostname> -a a.b.c.d -m 255.255.255.0 -i en0 -g a.b.c.d -A no -s</code>
imoaixbuildclonefordriv.txt:  - Once done, disconnect from the console, get back to NIM server and remove the temporary /etc/hosts entry<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%Y)
imoaixbuildclonefordriv.txt:sudo ex -sc "/${tgtsystem}/d|x" /etc/hosts</code>
imoaixbuildclonefordriv.txt:  - Login to pgnmsv01 and define a variable pointing to the system you are building<code>export tgtsystem=<host_name></code>
imoaixbuildclonefordriv.txt:  - Disable DNS, push hosts file, NTP etc<code>sudo ssh ${tgtsystem}.driv.com rm /etc/resolv.conf
imoaixbuildclonefordriv.txt:sudo ssh ${tgtsystem}.driv.com "ntpdate -u cdcvildns001.fmmotorparts.com"</code>
imoaixbuildclonefordriv.txt:  - Login to the host you are building<code>ssh ${tgtsystem}.driv.com</code>
imoaixbuildclonefordriv.txt:  - Disable cron jobs for application accounts<code>sudo ls -1 /var/spool/cron/crontabs \
imoaixbuildclonefordriv.txt:| egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$" | sudo tee -a /var/adm/cron/cron.deny</code>
imoaixbuildclonefordriv.txt:  - Enable cron<code>sudo mkitab cron:23456789:respawn:/usr/sbin/cron</code>
imoaixbuildclonefordriv.txt:  - Disable production VLANs using dummy VLAN tagged interfaces<code>for dummyvlan in 500 501 502 503 504 505
imoaixbuildclonefordriv.txt:done</code>Then discover new devices<code>sudo cfgmgr</code>Configure dummy IPs to production subnets<code>inum=2
imoaixbuildclonefordriv.txt:done</code>
imoaixbuildclonefordriv.txt:    - Look for another 138G device that is not allocated to any volume group<code>sudo /usr/local/scripts/lsvpcfg.sh</code>Create a alt_disk_copy<code>sudo alt_disk_copy -B -d hdiskX</code>
imoaixbuildclonefordriv.txt:  - Some systems are part of clusters. Let's change the automount and autovarryon values<code>lsvg | grep -v rootvg | xargs -n1 sudo chvg -a y
imoaixbuildclonefordriv.txt:done</code>
imoaixbuildclonefordrivpermanent.txt:  - For ease of documentation, export variables for source and target systems<code>export srcsystem=<system_of_which_you_plan_to_use_mksysb_from>
imoaixbuildclonefordrivpermanent.txt:export tgtsystem=<system_which_you_plan_to_built></code>
imoaixbuildclonefordrivpermanent.txt:  - Copy the mksysb to a temp location and umcompress it<code>sudo cp /mksysb-images/bos.obj.${srcsystem}.gz /preupgrade/mksysb/
imoaixbuildclonefordrivpermanent.txt:cd /preupgrade/mksysb/ ; sudo gunzip bos.obj.${srcsystem}.gz</code>
imoaixbuildclonefordrivpermanent.txt:  - Define a mksysb resource<code>sudo nim -o define -t mksysb -a server=master -a location=/preupgrade/mksysb/bos.obj.${srcsystem} ${srcsystem}-mksysb</code>If NIM complains there is an existing resource with that name, please remove it<code>sudo nim -o remove ${srcsystem}-mksysb</code>
imoaixbuildclonefordrivpermanent.txt:  - Find out the OSLEVEL on the system that we plan to clone<code>ssh ${srcsystem} oslevel -s
imoaixbuildclonefordrivpermanent.txt:7100-05-02-1810	</code>
imoaixbuildclonefordrivpermanent.txt:  - Find out the correct Spot and LPPSRC for the above AIX release level. In this case they are,<code>710TL05-02_spot
imoaixbuildclonefordrivpermanent.txt:710TL05-02_lppsrc</code>Export them as variables<code>export lppsrc="710TL05-02_lppsrc"
imoaixbuildclonefordrivpermanent.txt:export spot="710TL05-02_spot"</code>
imoaixbuildclonefordrivpermanent.txt:  - Add systems to /etc/hosts file because the reverse lookups don't work.<code>host ${tgtsystem}.driv.com | awk '{print $NF"\t"$1}' | sed "s;.driv.com;;g" | sudo tee -a /etc/hosts</code>
imoaixbuildclonefordrivpermanent.txt:  - Define system on NIM<code>sudo nim -o define -t standalone -a platform=chrp -a if1="find_net ${tgtsystem} 0" -a netboot_kernel=mp ${tgtsystem}</code>
imoaixbuildclonefordrivpermanent.txt:  - Prepare for a NIM installation<code>sudo nim -o bos_inst \
imoaixbuildclonefordrivpermanent.txt:${tgtsystem}</code>
imoaixbuildclonefordrivpermanent.txt:    - Change the bootp config to send traffic to 10.32.60/24 subnet<code>sudo ex -sc "/${tgtsystem}/s/10.0.48.12/10.32.60.60/|x" /etc/bootptab</code>
imoaixbuildclonefordrivpermanent.txt:  - Add the server to the console database **/prod/images/etc/unix_sys_console**<code>sudo vi /prod/images/etc/unix_sys_console</code>
imoaixbuildclonefordrivpermanent.txt:    - A regular lpar on a P Series frame<code>pgnmsv01:lpar-ibm:taitc051:pgnmsv01-9111-520-SN10B4F8D:pgnmsv01:2:hscroot</code>
imoaixbuildclonefordrivpermanent.txt:    - Find out the frame<code>export frame=$(grep -i ^${tgtsystem} /prod/images/etc/unix_sys_console | awk -F: '{print $4}' )</code>
imoaixbuildclonefordrivpermanent.txt:    - Power on <code>ssh cdcvilhmc003.fmmotorparts.com "chsysstate -r lpar -o on -b sms -m ${frame} -n ${tgtsystem}"</code>
imoaixbuildclonefordrivpermanent.txt:  - Open up a console session to the new server. On pgnmsv01<code>sudo getconsole ${tgtsystem}</code>
imoaixbuildclonefordrivpermanent.txt:    - Details you need<code>Client IP : The IP address of the host you are building
imoaixbuildclonefordrivpermanent.txt:Def Route : 10.128.40.1 (MP AIX systems), 10.32.60.1 (LDC Clones)</code>
imoaixbuildclonefordrivpermanent.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
imoaixbuildclonefordrivpermanent.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
imoaixbuildclonefordrivpermanent.txt:done</code>
imoaixbuildclonefordrivpermanent.txt:    - Run cfgmgr<code>cfgmgr</code>
imoaixbuildclonefordrivpermanent.txt:    - Configure the front end IP address on en0 interface<code>/usr/sbin/mktcpip -h <hostname> -a a.b.c.d -m 255.255.255.0 -i en0 -g a.b.c.d -A no -s</code>
imoaixbuildclonefordrivpermanent.txt:  - Once done, disconnect from the console, get back to NIM server and remove the temporary /etc/hosts entry<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%Y)
imoaixbuildclonefordrivpermanent.txt:sudo ex -sc "/${tgtsystem}/d|x" /etc/hosts</code>
imoaixbuildclonefordrivpermanent.txt:  - Login to pgnmsv01 and define a variable pointing to the system you are building<code>export tgtsystem=<host_name></code>
imoaixbuildclonefordrivpermanent.txt:  - For some of our favorite team members, we also copy the ssh keys for them.<code>for user in x1kousra sxp8856 x1jhz999 jhf1625 pawetkac tauxrpt x1kxk630 x1shukla x1vasuna x1rzb826 x1cxs952 snowscan rajhsubr raghk
imoaixbuildclonefordrivpermanent.txt:done</code>
imoaixbuildclonefordrivpermanent.txt:  - Login to the host you are building<code>ssh ${tgtsystem}.driv.com</code>
imoaixbuildclonefordrivpermanent.txt:  - Update time<code>sudo ntpdate -u cdcvildns001.fmmotorparts.com</code>
imoaixbuildclonefordrivpermanent.txt:  - Cleanup cron jobs<code>for file in $(sudo ls -1 /var/spool/cron/crontabs | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
imoaixbuildclonefordrivpermanent.txt:done</code>
imoaixbuildclonefordrivpermanent.txt:  - Inspect cron jobs and remove what is not needed**Check root user's for NIM build**<code>sudo ls -l /var/spool/cron/crontabs</code>
imoaixbuildclonefordrivpermanent.txt:  - Enable cron<code>sudo mkitab cron:23456789:respawn:/usr/sbin/cron</code>
imoaixbuildclonefordrivpermanent.txt:    - Look for another 138G device that is not allocated to any volume group<code>sudo /usr/local/scripts/lsvpcfg.sh</code>Create a alt_disk_copy<code>sudo alt_disk_copy -B -d hdiskX</code>
imochangebasissidadmpasswd.txt:  - Login to ''pcdcunxaxap01'' and run this script to change their password to something that they know ''or atleast Leandro knows''<code>for host in $(cat /prod/images/etc/allhosts.driv )
imochangebasissidadmpasswd.txt:</code>
imolinuxbuldclone.txt:  * IMO clones are built by Wintel team, so secure the map or search in the MP vCEnter<code>cdcvilms156.fmmp.fmmotorparts.com</code>Use the standard FAT client, the Web based UI isn't all good at that version.
imolinuxbuldclone.txt:  - Details you need<code>
imolinuxbuldclone.txt:Def Route   : a.b.c.d</code>
imolinuxbuldclone.txt:  - Remove DNS client<code>rm /etc/resolv.conf</code>
imolinuxbuldclone.txt:  - Remove hosts file<code>rm /etc/hosts</code>
imolinuxbuldclone.txt:  - List available NICs<code>ip link show</code>You should see a "ens192" adapter -- that is what we need.
imolinuxbuldclone.txt:  - Configure an IP on it, so that we can perform rest of the work from a putty session<code>ifconfig ens192 a.b.c.d netmask 255.255.255.0 up</code>
imolinuxbuldclone.txt:  - Configure a default route<code>route add -net 0.0.0.0 gw a.b.c.1</code>
imolinuxbuldclone.txt:  - Login to pgnmsv01 and define a variable pointing to the system you are building<code>export targethost=<host_name></code>
imolinuxbuldclone.txt:  - Disable DNS, push hosts file, NTP etc<code>sudo scp /prod/images/etc/hostsfile.imoclone ${targethost}:/etc/hosts
imolinuxbuldclone.txt:sudo ssh ${targethost} "/usr/sbin/ntpdate -u 10.43.8.130"</code>
imolinuxbuldclone.txt:  - Push a standard information file<code>sudo scp /prod/images/etc/.information.rhel.imoclone ${targethost}:/var/adm/.information</code>
imolinuxbuldclone.txt:  - Push IMO clone services file<code>sudo scp /prod/images/etc/services.imoclone ${targethost}:/etc/services.imoclone</code>
imolinuxbuldclone.txt:  - Change hostname of the targethost<code>ssh ${targethost} "echo ${targethost} | sudo tee /etc/hostname"</code>
imolinuxbuldclone.txt:    - Create<code>echo "DEVICE=ens192"                                                                           >  /var/tmp/${targethost}.ifcfg
imolinuxbuldclone.txt:echo "ONBOOT=yes"                                                                              >> /var/tmp/${targethost}.ifcfg</code>
imolinuxbuldclone.txt:    - Copy<code>sudo scp /var/tmp/${targethost}.ifcfg ${targethost}:/var/tmp/ifcfg.imoclone</code>
imolinuxbuldclone.txt:  - Login to the host you are building<code>ssh ${targethost}</code>
imolinuxbuldclone.txt:  - Remove openview client<code>sudo /opt/OV/bin/OpC/install/oasetup.sh -remove</code>
imolinuxbuldclone.txt:  - Delete application cron jobs<code>for file in $(sudo ls -1 /var/spool/cron | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
imolinuxbuldclone.txt:done</code>
imolinuxbuldclone.txt:  - Add additional services entries<code>cat /etc/services.imoclone | sudo tee -a /etc/services</code>
imolinuxbuldclone.txt:  - Define a meaningful PS1 variable<code>sudo vi /etc/profile</code>Append this to the end<code>HNAME=$(uname -n)
imolinuxbuldclone.txt:readonly TMOUT</code>
imolinuxbuldclone.txt:  - Remove old configurations for network<code>sudo rm /etc/sysconfig/network-scripts/ifcfg-eth*</code>
imolinuxbuldclone.txt:  - Configure primary network interface<code>sudo cp /var/tmp/ifcfg.imoclone /etc/sysconfig/network-scripts/ifcfg-ens192</code>
imolinuxbuldclone.txt:  - Configure a permanent default route<code>grep ^NETWORK /etc/sysconfig/network-scripts/ifcfg-ens192 | awk -F "=" '{print $2}' |\
imolinuxbuldclone.txt:awk -F"." '{print "GATEWAY="$1"."$2"."$3".1"}' | sudo tee /etc/sysconfig/network</code>
imolinuxbuldclone.txt:  - Shutdown the VM<code>sudo init 0</code>
imolinuxbuldclone.txt:  - ssh to the system<code>ssh ${targethost}</code>
imolinuxbuldclone.txt:  - Check the new interface name<code>sudo ip link show</code>It should show ens224, if not -- change the name in the following steps
imolinuxbuldclone.txt:    - Configure the master interface<code>echo "DEVICE=ens224"  | sudo tee    /etc/sysconfig/network-scripts/ifcfg-ens224
imolinuxbuldclone.txt:echo "ONBOOT=yes"     | sudo tee -a /etc/sysconfig/network-scripts/ifcfg-ens224</code>
imolinuxbuldclone.txt:    - Configure the dummy addresses<code>for dummyvlan in 600 601 602 603 604 605
imolinuxbuldclone.txt:done</code>
imolinuxbuldclone.txt:  - Set a variable pointing to new and old names<code>export oldsid=PTA
imolinuxbuldclone.txt:export newsid=ENP</code>Massage it<code>export oldsidlowercase=$(echo ${oldsid} | tr [A-Z] [a-z])
imolinuxbuldclone.txt:export newsiduppercase=$(echo ${newsid} | tr [a-z] [A-Z])</code>
imolinuxbuldclone.txt:  - Rename the service accounts, if the oracle user is not there than it will give you error so ignore it<code>sudo usermod -l ora${newsidlowercase} ora${oldsidlowercase}
imolinuxbuldclone.txt:sudo mv /home/${oldsidlowercase}adm /home/${newsidlowercase}adm</code>If it shows resource busy ignore it as we will be renaming in later steps.
imolinuxbuldclone.txt:  - Set a generic password for Database and SAP accounts<code>
imolinuxbuldclone.txt:echo "${newsidlowercase}adm:sapGnLWHKGvf6" | sudo chpasswd -e</code>
imolinuxbuldclone.txt:    - Terminate SAP processes if any<code>ps -ef | grep sap | grep -v grep | awk '{print $2}' | xargs -n1 sudo kill -9</code>
imolinuxbuldclone.txt:    - Unmount all local filesystems<code>grep datavg /etc/fstab | grep -v -e "/usr/openv" -e "/users/unispool" | awk '{print $2}' | sort -r  | xargs -n1 sudo umount</code>
imolinuxbuldclone.txt:    - Cleanup fstab<code>grep -v nfs /etc/fstab > fstab.1
imolinuxbuldclone.txt:cat fstab.1 | sed -e "s;${oldsidlowercase};${newsidlowercase};g" -e "s;${oldsiduppercase};${newsiduppercase};g" > fstab.2</code>
imolinuxbuldclone.txt:    - Install the new fstab<code>sudo cp fstab.2 /etc/fstab</code>
imolinuxbuldclone.txt:    - Prep for LV rename<code>sudo lvs | grep datavg | awk '{print $1}' > lvs.1
imolinuxbuldclone.txt:sudo lvs | grep datavg | awk '{print $1}' | sed -e "s;${oldsidlowercase};${newsidlowercase};g" -e "s;${oldsiduppercase};${newsiduppercase};g" > lvs.2</code>
imolinuxbuldclone.txt:    - Rename the logical volumes<code>paste lvs.1 lvs.2 | while read line
imolinuxbuldclone.txt:done</code>
imolinuxbuldclone.txt:    - Mount all filesystems<code>for fs in $(grep datavg /etc/fstab | awk '{print $2}' | sort )
imolinuxbuldclone.txt:done</code>
imolinuxbuldclone.txt:  - Perform a final reboot<code>sudo init 6</code>
imolnxbuildclonefordriv-networkisolated.txt:    - Legacy FMMP vCenter<code>export vcenter=cdcvilms156.fmmp.fmmotorparts.com</code>
imolnxbuildclonefordriv-networkisolated.txt:    - DRiV vCenter<code>export vcenter=egdcilms010.driv.com</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Export a variable pointing to the hostname to be built<code>export tgtsystem=name_of_the_system</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Add the system to console database<code>echo "${tgtsystem}:std-vmware-vsphere:${vcenter}:ADACCOUNT" | sudo tee -a /prod/images/etc/unix_sys_console</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Change hostname<code>hostname <new_host_name>
imolnxbuildclonefordriv-networkisolated.txt:echo "new_host_name" > /etc/hostname</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Remove network definitions<code>rm -i /etc/sysconfig/network-scripts/ifcfg-e*</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Remove openview software<code>/opt/OV/bin/OpC/install/oasetup.sh -remove</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Disable crond<code>systemctl disable crond</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Shutdown the server<code>init 0</code>
imolnxbuildclonefordriv-networkisolated.txt:    - List the interfaces<code>ip link show</code>You should see something like this<code>1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT
imolnxbuildclonefordriv-networkisolated.txt:    link/ether 00:50:56:98:42:78 brd ff:ff:ff:ff:ff:ff</code>
imolnxbuildclonefordriv-networkisolated.txt:    - Configure IP address<code>ifconfig ens224 a.b.c.d netmask 255.255.255.0 up</code>
imolnxbuildclonefordriv-networkisolated.txt:    - Configure gateway<code>route add -net 0.0.0.0 gw a.b.c.1</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Login to DRiV NIM server pcdcunxaxap01 and define a variable pointing to the system you are building<code>export tgtsystem=<host_name></code>
imolnxbuildclonefordriv-networkisolated.txt:  - Create a hosts file<code>echo "127.0.0.1               loopback localhost" > hostsfile.${tgtsystem}
imolnxbuildclonefordriv-networkisolated.txt:host ${tgtsystem} | awk '{print $3"\t"$1,$1"d"}' | sed "s;.driv.comd;;g" | sed "s;,;;g" >> hostsfile.${tgtsystem}</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Copy the hosts file<code>sudo scp hostsfile.${tgtsystem} ${tgtsystem}:/etc/hosts</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Enable DNS, NTP<code>sudo scp /prod/images/etc/resolv.conf.driv ${tgtsystem}:/etc/resolv.conf
imolnxbuildclonefordriv-networkisolated.txt:sudo ssh ${tgtsystem}.driv.com "systemctl restart ntpd"</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Login to the host<code>ssh ${tgtsystem}</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Configure the primary interface<code>my_ip=$(grep $(uname -n) /etc/hosts | awk '{print $1}' )
imolnxbuildclonefordriv-networkisolated.txt:echo "ONBOOT=yes"                | sudo tee -a /etc/sysconfig/network-scripts/ifcfg-${my_iface}</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Configure default gateway<code>echo ${my_ip} | awk -F "." '{print "GATEWAY="$1"."$2"."$3".1" }' | sudo tee /etc/sysconfig/network</code>Restart network services<code>sudo systemctl restart network</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Remove cron jobs for application accounts<code>for file in $(sudo ls -1 /var/spool/cron/ | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
imolnxbuildclonefordriv-networkisolated.txt:done</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Enable cron<code>sudo systemctl enable crond</code>
imolnxbuildclonefordriv-networkisolated.txt:      - Export a variable to automate<code>virtual_ip="e.f.g.h"</code>
imolnxbuildclonefordriv-networkisolated.txt:      - Create the configuration<code>my_iface=$(sudo ip link show | grep ^2: | awk '{print $2}'  | sed "s;:;;g")
imolnxbuildclonefordriv-networkisolated.txt:echo "ONBOOT=yes"                  | sudo tee -a /etc/sysconfig/network-scripts/ifcfg-${my_iface}:0</code>Bring up the interface<code>sudo ifup ${my_iface}:0 ; sudo systemctl restart network</code>
imolnxbuildclonefordriv-networkisolated.txt:    - Reconfigure syslog<code>sudo cp /etc/rsyslog.conf /etc/rsyslog.conf.$(date +%M%d%Y)
imolnxbuildclonefordriv-networkisolated.txt:sudo systemctl restart rsyslog</code>
imolnxbuildclonefordriv-networkisolated.txt:      - Remove all NFS mounts from fstab<code>sudo cp /etc/fstab /etc/fstab.$(date +%m%d%Y)
imolnxbuildclonefordriv-networkisolated.txt:sudo cp 1 /etc/fstab</code>Check fstab<code>cat /etc/fstab</code>
imolnxbuildclonefordriv-networkisolated.txt:      - Add any NFS mounts requested. A sample entry is here<code>qaerdb01:/sapmnt/FTA/exe /sapmnt/FTA/exe nfs    rsize=8192,wsize=8192,timeo=14,intr,soft,proto=tcp,mountproto=tcp</code>Add this to /etc/fstab and mount each filesystem
imolnxbuildclonefordriv-networkisolated.txt:      - Add any NFS exports requested<code>sudo vi /etc/exports</code>A sample entry would be<code>/sapmnt/PS1 pcdcps1axdb01(rw,no_root_squash)</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Create solarwinds account for monitoring<code>sudo useradd -K PASS_MAX_DAYS=-1 -g users -d /home/solwinds -c "Solarwinds - ssh monitoring account" -m -u 6851 solwinds
imolnxbuildclonefordriv-networkisolated.txt:sudo passwd -u solwinds</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Update local repositories to point to the cobbler at DRiV<code>
imolnxbuildclonefordriv-networkisolated.txt:[[ -f /etc/yum.repos.d/saphana.repo ]]   && sudo sed -i 's/pablsv02/pcdcunxlxap01/' /etc/yum.repos.d/saphana.repo</code>
imolnxbuildclonefordriv-networkisolated.txt:  - Perform a final reboot<code>sudo init 6</code>
imounixbuildclone.txt:  - For ease of documentation, export variables for source and target systems<code>export srcsystem=<system_of_which_you_plan_to_use_mksysb_from>
imounixbuildclone.txt:export tgtsystem=<system_which_you_plan_to_built></code>
imounixbuildclone.txt:  - Copy the mksysb to a temp location and umcompress it<code>sudo cp /mksysb-images/bos.obj.${srcsystem}.gz /preupgrade/mksysb/
imounixbuildclone.txt:cd /preupgrade/mksysb/ ; sudo gunzip bos.obj.${srcsystem}.gz</code>
imounixbuildclone.txt:  - Define a mksysb resource<code>sudo nim -o define -t mksysb -a server=master -a location=/preupgrade/mksysb/bos.obj.${srcsystem} ${srcsystem}-mksysb</code>If NIM complains there is an existing resource with that name, please remove it<code>sudo nim -o remove ${srcsystem}-mksysb</code>
imounixbuildclone.txt:  - Find out the OSLEVEL on the system that we plan to clone<code>ssh ${srcsystem} oslevel -s
imounixbuildclone.txt:7100-05-02-1810	</code>
imounixbuildclone.txt:  - Find out the correct Spot and LPPSRC for the above AIX release level. In this case they are,<code>710TL05-02_spot
imounixbuildclone.txt:710TL05-02_lppsrc</code>
imounixbuildclone.txt:  - For clients in the MP AIX subnet '10.128.40.0/24', add systems to /etc/hosts file because the reverse lookups don't work.<code>host ${tgtsystem} | grep -q "10.128.40" ; [[ ${?} -eq 0 ]] &&  host ${tgtsystem} | awk '{print $NF"\t"$1}' | sed "s;.fmmotorparts.com;;g" | sudo tee -a /etc/hosts</code>
imounixbuildclone.txt:  - Define system on NIM<code>host ${tgtsystem} | grep -q "10.32.60" ; [[ ${?} -eq 0 ]] && sudo nim -o define -t standalone -a platform=chrp -a if1="ent-Network6 ${tgtsystem} 0" -a netboot_kernel=mp\
imounixbuildclone.txt: ${tgtsystem} || sudo nim -o define -t standalone -a platform=chrp -a if1="find_net ${tgtsystem} 0" -a netboot_kernel=mp ${tgtsystem}</code>
imounixbuildclone.txt:  - Prepare for a NIM installation<code>sudo nim -o bos_inst -a source=mksysb -a spot=710TL05-02_spot -a lpp_source=710TL05-02_lppsrc -a no_client_boot=yes -a script=postinstallCloningIMO -a\
imounixbuildclone.txt: mksysb=${srcsystem}-mksysb ${tgtsystem}</code>
imounixbuildclone.txt:    - For clients in the MP AIX subnet '10.128.40.0/24', change the bootp config<code>host ${tgtsystem} | grep -q "10.128.40" ; [[ ${?} -eq 0 ]] && sudo ex -sc "/${tgtsystem}/s/10.0.48.12/10.32.60.60/|x" /etc/bootptab</code>
imounixbuildclone.txt:  - Add the server to the console database **/prod/images/etc/unix_sys_console**<code>sudo vi /prod/images/etc/unix_sys_console</code>
imounixbuildclone.txt:    - A regular lpar on a P Series frame<code>pgnmsv01:lpar-ibm:taitc051:pgnmsv01-9111-520-SN10B4F8D:pgnmsv01:2:hscroot</code>
imounixbuildclone.txt:  - Open up a console session to the new server. On pgnmsv01<code>sudo getconsole ${tgtsystem}</code>
imounixbuildclone.txt:    - Details you need<code>Client IP : The IP address of the host you are building
imounixbuildclone.txt:Def Route : 10.128.40.1 (MP AIX systems), 10.32.60.1 (LDC Clones)</code>
imounixbuildclone.txt:    - Down and detach the active interface<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
imounixbuildclone.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
imounixbuildclone.txt:done</code>
imounixbuildclone.txt:    - Run cfgmgr<code>cfgmgr</code>
imounixbuildclone.txt:    - Configure the front end IP address on en0 interface<code>/usr/sbin/mktcpip -h <hostname> -a 10.32.60.X -m 255.255.255.0 -i en0 -g 10.32.60.1 -A no -s</code>
imounixbuildclone.txt:  - Once done, disconnect from the console, get back to NIM server and remove the temporary /etc/hosts entry if applicable<code>sudo cp /etc/hosts /etc/hosts.$(date +%m%d%Y) ; host ${tgtsystem} | grep -q "10.128.40" ; [[ ${?} -eq 0 ]] &&  sudo ex -sc "/${tgtsystem}/d|x" /etc/hosts</code>
imounixbuildclone.txt:  - Login to pgnmsv01 and define a variable pointing to the system you are building<code>export targethost=<host_name></code>
imounixbuildclone.txt:  - Disable DNS, push hosts file, NTP etc<code>sudo ssh ${targethost} rm /etc/resolv.conf
imounixbuildclone.txt:sudo ssh ${targethost} "ntpdate -u 10.43.8.130"</code>
imounixbuildclone.txt:  - Push a standard information file<code>sudo scp /prod/images/etc/.information.aix.imoclone ${targethost}:/var/adm/.information</code>
imounixbuildclone.txt:  - Push IMO clone services file<code>sudo scp /prod/images/etc/services.imoclone ${targethost}:/etc/services.imoclone</code>
imounixbuildclone.txt:  - Delete application cron jobs<code>for file in $(sudo ls -1 /var/spool/cron/crontabs | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
imounixbuildclone.txt:done</code>
imounixbuildclone.txt:  - Enable cron<code>sudo mkitab cron:23456789:respawn:/usr/sbin/cron</code>
imounixbuildclone.txt:  - Add additional services entries<code>cat /etc/services.imoclone | sudo tee -a /etc/services</code>
imounixbuildclone.txt:  - Define a meaningful PS1 variable<code>sudo vi /etc/profile</code>Append this to the end<code>HNAME=$(uname -n)
imounixbuildclone.txt:readonly TMOUT</code>
imounixbuildclone.txt:  - Disable production VLANs using dummy VLAN tagged interfaces<code>for dummyvlan in 500 501 502 503 504 505
imounixbuildclone.txt:done</code>Then discover new devices<code>sudo cfgmgr</code>Configure dummy IPs to production subnets<code>inum=2
imounixbuildclone.txt:done</code>
imounixbuildclone.txt:  - Set a variable pointing to new and old names<code>export oldsid=PTA
imounixbuildclone.txt:export newsid=ENP</code>Massage it<code>export oldsidlowercase=$(echo ${oldsid} | tr [A-Z] [a-z])
imounixbuildclone.txt:export newsiduppercase=$(echo ${newsid} | tr [a-z] [A-Z])</code>
imounixbuildclone.txt:  - Rename the service accounts<code>sudo usermod -l ora${newsidlowercase} ora${oldsidlowercase}
imounixbuildclone.txt:sudo mv /home/${oldsidlowercase}adm /home/${newsidlowercase}adm</code>
imounixbuildclone.txt:  - Set a generic password for Database and SAP accounts<code>
imounixbuildclone.txt:echo "${newsidlowercase}adm:sapGnLWHKGvf6" | sudo chpasswd -e</code>
imounixbuildclone.txt:    - Run cfgmgr<code>sudo cfgmgr</code>
imounixbuildclone.txt:    - Get the disk configuration from rpt_config<code>sudo cat /home/tauxrpt/rpt_config/file_systems.txt |\
imounixbuildclone.txt:|srmvg01|srmvg02|swvg01|tctpvg|testvg01|tmplppvg|transfervg|tsbivg01|veritasvg|zycusvg" > /var/tmp/diskmap.imoclone</code>
imounixbuildclone.txt:    - Recreate the VGs, fsck and mount them<code>for vg in $(awk -F: '{print $NF}' /var/tmp/diskmap.imoclone | sort -u | sort)
imounixbuildclone.txt:done</code>
imounixbuildclone.txt:  - If this is a system with databases, setup symbolic link<code>sudo rm -rf /oracle/${oldsiduppercase}
imounixbuildclone.txt:sudo ln -s /oracle/${newsiduppercase} /oracle/${oldsiduppercase}</code>
imounixbuildclone.txt:    - Look for another 138G device that is not allocated to any volume group<code>sudo /usr/local/scripts/lsvpcfg.sh</code>Create a alt_disk_copy<code>sudo alt_disk_copy -B -d hdiskX</code>
imounixbuildclone.txt:  - Some systems are part of clusters. Let's change the automount and autovarryon values<code>lsvg | grep -v rootvg | xargs -n1 sudo chvg -a y
imounixbuildclone.txt:done</code>
inhousescripts.txt:  - mksysb backups on AIX.<code>Master Copy               pgnmsv01:/prod/images/scripts/mksysb.sh
inhousescripts.txt:On each AIX server        /usr/local/scripts/mksysb.sh</code>CRON entry will be<code>20 23 * * 5 /usr/local/scripts/mksysb.sh 1>/dev/null 2>&1</code>
inhousescripts.txt:  - List disks in detail on AIX<code>Master Copy               pgnmsv01:/prod/images/scripts/lsvpcfg.sh
inhousescripts.txt:On each AIX server        /usr/local/scripts/lsvpcfg.sh</code>
inhousescripts.txt:  - List VIO disks in detail on AIX<code>Master Copy               pgnmsv01:/prod/images/scripts/lsdiskcfg
inhousescripts.txt:On each AIX server        /usr/local/scripts/lsdiskcfg</code>
inhousescripts.txt:  - Cleanup homeless people<code>Master copy - pgnmsv01:/prod/images/scripts/HOME-CLEANER
inhousescripts.txt:On each server /usr/local/scripts/HOME-CLEANER</code>
install-lpar2rrd.txt:  * Change the system wide configuration for file descriptors<code>sudo vi /etc/sysctl.conf</code>Add this<code>fs.file-max = 100000</code>Refresh<code>sudo sysctl -p</code>
install-lpar2rrd.txt:  * Create a user<code>sudo useradd -m lpar2rrd</code>
install-lpar2rrd.txt:  * Configure ulimit for lpar2rrd user<code>sudo vi /etc/security/limits.conf</code>
install-lpar2rrd.txt:  * Install Apache<code>sudo yum -y install httpd</code>
install_ibm_endpoint_manager_agent.txt:  * Login to the target server and create the following directory if it does not already exist. <code> sudo mkdir -p /etc/opt/BESClient </code>
install_ibm_endpoint_manager_agent.txt:  * Mount the soure for the License Tool <code> sudo mkdir -p /mnt/ilmt ; sudo mount pgnmsv01:/prod/images/applications/IBM-License-Tool /mnt/ilmt </code>
install_ibm_endpoint_manager_agent.txt:  * Change directory to the latest vesion. <code>cd /mnt/ilmt/latest</code>
install_ibm_endpoint_manager_agent.txt:  * Install the applicaton <code> sudo installp -agqYXd  ./BESAgent-9.2.xxx.x.ppc_aixxx.pkg  BESClient </code> The results should look like this <code>
install_ibm_endpoint_manager_agent.txt:	BESClient                   9.2.1.48        ROOT        APPLY       SUCCESS </code>
install_ibm_endpoint_manager_agent.txt:  * Copy the config file to the location. <code> sudo cp -p ./actionsite.afxm /etc/opt/BESClient/actionsite.afxm </code>
install_ibm_endpoint_manager_agent.txt:  * Start the License Tool Client <code> sudo /etc/rc.d/rc2.d/SBESClientd start </code> Server will reteun the following <code> Starting IBM Endpoint Manager: BESClient </code>
install_ibm_endpoint_manager_agent.txt:  * Confirm the application has started sucessfully <code>ps -aef | grep -v grep | grep BESClient </code> If applicatio has started successfully the results should look someting like this <code> root  5898376        1   7 13:44:39      -  0:59 /opt/BESClient/bin/BESClient </code>
install_ibm_endpoint_manager_agent.txt:  * Change directory back to your home dicectory and unmount the file system used for installation <code> cd $HOME; sudo umount /mnt/ilmt </code>
install_ibm_endpoint_manager_agent.txt:  * To stop the applicaion <code> sudo  /etc/rc.d/rc2.d/SBESClientd stop </code>
install_ibm_endpoint_manager_agent.txt:  * To uninstall the TEM Client on non-Windows systems the simplest method is using the built in package managers <code> sudo  installp -u BESClient </code>
install_ibm_endpoint_manager_agent.txt:  * Because this is a non standard IBM Licensed Program Product and does not compleatly deinstall by removing all files it has created you will have to manually remove directories left behind. <code> sudo rm -rf /etc/opt/BESClient/ /var/opt/BESClient </code>
install_ibm_firmware.txt:Firmware is located in the main repository on pgnmsv0i:/prod/images/Microcode/{server mode/{release}   Example /prod/images/Microcode/8202-E4C/AL740_163/
install_ibm_firmware.txt:<code>/prod/nim/Microcode/8202-E4C/AL740_163/ </code>  <code>/prod/nim/Microcode/8205-E6C/AL740_163/ </code>
install_ibm_firmware.txt:<code> /firmware/8202-E4C/AL740_163/ </code> <code> /firmware/8205-E6C/AL740_163/ </code>
installothersoftwaresaix.txt:  * If this is not during a system build, define the targethost variable<code>export targethost=<host_name></code>
installothersoftwaresaix.txt:  * Copy the latest sudo RPM from the NIM server ( pcdcunxaxap01) to the server where we need it installed<code>sudo scp /prod/images/rpms/sudo-1.6.9p23-2noldap.aix5.3.ppc.rpm ${targethost}:/tmp</code>
installothersoftwaresaix.txt:  * Install / Upgrade sudo on the target host<code>sudo ssh ${targethost} "rpm -Uvh /tmp/sudo-1.6.9p23-2noldap.aix5.3.ppc.rpm"</code>
installothersoftwaresaix.txt:  * <del>Copy the latest sudoers file to the target server.<code>sudo scp /prod/images/etc/sudoers ${targethost}:/etc/sudoers</code></del>
installothersoftwaresaix.txt:  * Copy the latest RPM from the NIM server ( pcdcunxaxap01) to the server where we need it installed<code>sudo scp /prod/images/rpms/rsync-3.0.6-1.aix5.3.ppc.rpm ${targethost}:/tmp</code>
installothersoftwaresaix.txt:  * Install / Upgrade rsync on the target host<code>sudo ssh ${targethost} "rpm -Uvh /tmp/rsync-3.0.6-1.aix5.3.ppc.rpm"</code>
installothersoftwaresaix.txt:  * Copy the latest RPM from the NIM server ( pcdcunxaxap01) to the server where we need it installed<code>sudo scp /prod/images/rpms/bash-4.2-3.aix6.1.ppc.rpm ${targethost}:/tmp</code>
installothersoftwaresaix.txt:  * Install / Upgrade bash on the target host<code>sudo ssh ${targethost} "rpm -Uvh /tmp/bash-4.2-3.aix6.1.ppc.rpm"</code>
installothersoftwaresaix.txt:  * Add ''/usr/bin/bash'' to ''/etc/security/login.cfg''<code>sudo ssh ${targethost} "chsec -f /etc/security/login.cfg -s usw -a shells=/bin/sh,/bin/bsh,/bin/csh,/bin/ksh,/bin/tsh,/usr/bin/sh,/usr/bin/bsh,/usr/bin/csh,/usr/bin/ksh,/usr/bin/tsh,/usr/sbin/sliplogin,/usr/sbin/uucp/uucico,/usr/sbin/snappd,/usr/bin/rksh,/usr/bin/rksh93,/usr/bin/bash"</code>
installstgdevicedrivers.txt:    - Lincolnshire<code>sudo mkdir -p /mnt/emc ;sudo  mount pgnmsv01:/prod/images/EMC /mnt/emc</code>
installstgdevicedrivers.txt:    - Interexion<code>sudo mkdir -p /mnt/emc ;sudo  mount penmsv01:/prod/images/EMC /mnt/emc</code>
installstgdevicedrivers.txt:  - Remove NAVIAGENT if any, from cloning perhaps ?<code>sudo rm /etc/log/HostIdFile.txt</code>Remove it<code>sudo installp -u NAVIAGENT</code>
installstgdevicedrivers.txt:    - Install NAVIAGENT<code>sudo installp -acX -d /mnt/emc/NAVIAGENT/NaviHostAgent-AIX-32-NA-en_US-6.29.6.0.35-1.lpp NAVIAGENT</code>
installstgdevicedrivers.txt:      - Interexion<code>sudo scp penmsv01:/prod/images/EMC/config/agent.config.int.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - Edenkoben<code>sudo scp penmsv01:/prod/images/EMC/config/agent.config.ede.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - Lincolnshire<code>sudo scp pgnmsv01:/prod/images/EMC/config/agent.config.ldc.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - Monroe<code>sudo scp pgnmsv01:/prod/images/EMC/config/agent.config.mon.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - Rybnik<code>sudo scp penmsv01:/prod/images/EMC/config/agent.config.ryb.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - GrassLake<code>sudo scp pgnmsv01:/prod/images/EMC/config/agent.config.glk.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - St Truiden<code>sudo scp penmsv01:/prod/images/EMC/config/agent.config.str.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:      - Gliwice<code>sudo scp penmsv01:/prod/images/EMC/config/agent.config.glw.clariion /etc/Navisphere/agent.config</code>And start it<code>sudo /etc/rc.agent start</code>
installstgdevicedrivers.txt:    - Install MPIO drivers for EMC Symmetrix / VMAX storage arrays<code>sudo installp -acX -d /mnt/emc/ODM/$(oslevel)-latest EMC.Symmetrix.aix.rte EMC.CLARiiON.aix.rte EMC.CLARiiON.fcp.MPIO.rte EMC.Symmetrix.fcp.MPIO.rte</code>
installstgdevicedrivers.txt:    - Once done, unmount nfs<code>sudo umount /mnt/emc</code>
installstgdevicedrivers.txt:    - Fix the buggy version of inq command<code>for file in /usr/lpp/EMC/CLARiiON/bin/inq.aix32_51 /usr/lpp/EMC/CLARiiON/bin/inq.aix64_51 /usr/lpp/EMC/Symmetrix/bin/inq.aix32_51 /usr/lpp/EMC/Symmetrix/bin/inq.aix64_51
installstgdevicedrivers.txt:done</code>
installstgdevicedrivers.txt:    - Delete all MPIO disks that you can, Ignore errors while deleting root disk<code>lsdev -Ccdisk | grep -i mpio | awk '{print $1}' | xargs -n1 sudo rmdev -dl</code>
installstgdevicedrivers.txt:    - Rediscover the disks<code>sudo cfgmgr</code>
installstgdevicedrivers.txt:    - Enable round robin for MPIO devices.<code>lsdev -Ccdisk | grep MPIO | grep -i EMC | awk '{print $1}' | xargs -n1 sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -Pl</code>
installsysinter.txt:  - Login to the master server pcdcunxaxap01 and set a variable<code>export server_driv=<hostname></code>
installsysinter.txt:  - Make this directory<code>ssh ${server_driv} sudo mkdir -p /usr/local/bin</code>
installsysinter.txt:  - Copy this<code>sudo rsync -avv /prod/images/applications/csi/sysinter.aix5 ${server_driv}:/usr/local/bin/sysinter.aix5</code>
installsysinter.txt:<code> sudo ssh ${targethost} cp -p /etc/services /etc/services-$(date +%Y%m%d-%H:%M:%S)</code>
installsysinter.txt:<code> sudo ssh ${targethost} cp -p /etc/inetd.conf /etc/inetd.conf-$(date +%Y%m%d-%H:%M:%S)</code>
installsysinter.txt:  - Then do this<code>ssh ${server_driv} 'sudo echo "sysinter                40035/tcp" >> /etc/services'</code>
installsysinter.txt:  - Then do this<code>ssh ${server_driv} 'sudo echo "sysinter        stream  tcp     nowait  root    /usr/local/bin/sysinter.aix5" >> /etc/inetd.conf'</code>
installsysinter.txt:  - Now restart inetd<code>ssh ${server_driv} sudo refresh -s inetd</code>
installsysinter.txt:  - If AIX, Add the system to UUMA<code>sudo ssh pcdcunxlxap03 "echo ${targethost} >> /home/oracle/uuma/hosts.txt"</code>
installsysinter.txt:  - Login to the master server pcdcunxaxap01 and set a variable<code>export server_driv=<hostname></code>
installsysinter.txt:  - Make this directory<code>sudo ssh ${server_driv} mkdir -p /usr/local/bin</code>
installsysinter.txt:  - Copy this<code>sudo rsync -avv /prod/images/applications/csi/sysinter.redhat ${server_driv}:/usr/local/bin/sysinter.redhat</code>
installsysinter.txt:  - Then do this<code>sudo ssh ${server_driv} 'echo "sysinter                40035/tcp" | tee -a /etc/services'</code>
installsysinter.txt:  - Then do this<code>sudo rsync -avv /prod/images/applications/csi/sysinter-xinetd ${server_driv}:/etc/xinetd.d/sysinter-xinetd</code>
installsysinter.txt:    - For RHEL6<code>sudo ssh ${server_driv} service xinetd reload</code>
installsysinter.txt:    - For RHEL7<code>sudo ssh ${server_driv} systemctl reload xinetd</code>
installsysinter.txt:    - If AIX, Add the system to UUMA<code>sudo ssh pcdcunxlxap03 "echo ${targethost} >> /home/oracle/uuma/hosts.txt"</code>
inxaccessmethod.txt:    - Type<code>Request</code>
inxaccessmethod.txt:    - Request Classification<code>Security.InterXion Access Request.Emergency.On Call Unix</code>
inxaccessmethod.txt:    - Priority<code>Medium</code>
inxaccessmethod.txt:    - Summary<code>Interexion Datacentre access for EMC Engineer (Sogeti).</code>
inxaccessmethod.txt:    - Description<code>Please grant access for "people and equipment" to perform maintenance task on P Series frame P740 storage array at Interexion DataCenter.
inxaccessmethod.txt:Equipment: move in and out of DC, HDDs</code>
inxaccessmethod.txt:  - Next step is to call the Sogeti Red Line<code>+32 272 21 280</code>
linuxlvm.txt:  * Dont know which host has it hence<code>echo "- - -" | sudo tee /sys/class/scsi_host/host0/scan
linuxlvm.txt:echo "- - -" | sudo tee /sys/class/scsi_host/host2/scan</code>
linuxlvm.txt:  * Check the VGs and find free space<code>sudo vgs</code>
linuxlvm.txt:  * Extend the logical volume<code>sudo lvextend -L 13G /dev/datavg/fslv12</code>
linuxlvm.txt:    * ext filesystem<code>sudo resize2fs  /dev/datavg/fslv12</code>
linuxlvm.txt:    * xfs filesystem<code>sudo xfs_growfs /dev/datavg/fslv12</code>
linuxlvm.txt:  * Create a logical volume<code>sudo lvcreate -L 12G -n fslv26 /dev/datavg</code>
linuxlvm.txt:    * ext filesystem<code>sudo mkfs -t ext4 /dev/datavg/fslv26</code>
linuxlvm.txt:    * xfs filesystem<code>sudo mkfs -t xfs  /dev/datavg/fslv26</code>
linuxlvm.txt:    * ext<code>echo "/dev/mapper/datavg-fslv26   /data/fsname                    ext4    defaults        1 2" | sudo tee -a /etc/fstab</code>
linuxlvm.txt:    * xfs<code>echo "/dev/mapper/datavg-fslv26   /data/fsname                    xfs     defaults        1 2" | sudo tee -a /etc/fstab</code>
linuxlvm.txt:  * Create Mount point and mount the filesystem<code>sudo mkdir -p /data/fsname
linuxlvm.txt:sudo mount /data/fsname</code>
linuxlvm.txt:    * Current state<code>sudo fdisk -l | grep /dev/sd</code>The result looked like<code>Disk /dev/sda: 53.7 GB, 53687091200 bytes
linuxlvm.txt:Disk /dev/sdi: 2 MB, 2949120 bytes</code>
linuxlvm.txt:    * First step is to make sure the Redhat kernel detects the new size.<code>echo "1" | sudo tee /sys/block/sdc/device/rescan</code>
linuxlvm.txt:    * Now when we execute<code>sudo fdisk -l | grep /dev/sd</code>The output now looks like<code>Disk /dev/sda: 53.7 GB, 53687091200 bytes
linuxlvm.txt:Disk /dev/sdi: 2 MB, 2949120 bytes</code>As you see ''/dev/sdc'' is now 107.4 GB or 100G.
linuxlvm.txt:      * Current config<code>sudo pvs</code>And<code>  PV         VG       Fmt  Attr PSize   PFree 
linuxlvm.txt:  /dev/sdc   datavg01 lvm2 a--   20.00g 12.99g</code>
linuxlvm.txt:      * Rescan the PV<code>sudo pvresize /dev/sdc</code>STDOUT prints something like this<code>  Physical volume "/dev/sdc" changed
linuxlvm.txt:  1 physical volume(s) resized / 0 physical volume(s) not resized</code>
linuxlvm.txt:      * Now it shows<code>sudo pvs</code>And<code>  PV         VG       Fmt  Attr PSize   PFree 
linuxlvm.txt:  /dev/sdc   datavg01 lvm2 a--  100.00g 92.99g</code>
linuxlvm.txt:      * The free space is automatically displayed on the VG now<code>sudo vgs</code>And the output looks<code>  VG       #PV #LV #SN Attr   VSize   VFree 
linuxlvm.txt:  sysvg      1   7   0 wz--n-  48.94g 12.94g</code>
linuxlvm.txt:  * List all disks<code>x1kxk630@paitap01:~> sudo lsscsi
linuxlvm.txt:[5:0:1:239]  disk    EMC      SYMMETRIX        5773  /dev/sdk</code>
linuxlvm.txt:  * Remove a disk<code>echo 1 | sudo tee -a /sys/block/sdX/device/delete</code>**sdX** is the device that gets deleted.
linuxlvm.txt:  * Rescan the bus for new disks<code>sudo rescan-scsi-bus.sh -l</code>
linuxlvm.txt:  * Find out which volume group it is on<code>grep /oracle/OEM /etc/fstab</code>It should print something like this<code>/dev/datavg01/oracleOEM /oracle/OEM reiserfs   acl,user_xattr        1 2</code>It is on datavg01
linuxlvm.txt:  * Find out if datavg01 has enough space<code>sudo vgs</code>It prints<code>VG       #PV #LV #SN Attr   VSize  VFree
linuxlvm.txt:  datavg01   1   2   0 wz--n- 20.00G 10.00G</code>That says it has 10 GB free
linuxlvm.txt:  * Extend the logical volume<code>sudo lvextend -L 13G /dev/datavg01/oracleOEM
linuxlvm.txt:  Logical volume fslv12 successfully resized</code>
linuxlvm.txt:  * Extend the filesystem<code>sudo /sbin/resize_reiserfs /dev/datavg01/oracleOEM
linuxlvm.txt:resize_reiserfs: On-line resizing finished successfully.</code>
linuxlvm.txt:  * Create a logical volume<code>sudo lvcreate -L 12G -n fslv26 /dev/datavg
linuxlvm.txt:  Logical volume "fslv26" created</code>
linuxlvm.txt:  * Create a filesystem<code>sudo /sbin/mkreiserfs -f /dev/datavg/fslv26
linuxlvm.txt:ReiserFS is successfully created on /dev/datavg/fslv26.</code>
linuxlvm.txt:  * Make an entry in fstab<code>echo "/dev/datavg/fslv26 /oracle/QCU/11203 reiserfs   acl,user_xattr        1 2" | sudo tee -a /etc/fstab</code>
linuxlvm.txt:  * Create Mount point and mount the filesystem<code>sudo mkdir -p /oracle/QCU/11203
linuxlvm.txt:sudo mount /oracle/QCU/11203</code>
linuxlvm.txt:   * Unmount the file system<code>sudo umount /oracle/TCOG/11203</code>
linuxlvm.txt:   * Remove the logical volume and file system <code>sudo lvremove /dev/datavg/fslv36
linuxlvm.txt:  Logical volume "fslv36" successfully removed </code>
linuxlvm.txt:   * Remove entry from /etc/fstab<code>sudo vi /etc/fstab</code>Delete line for file system <code>/dev/datavg/fslv36 /oracle/TCOG/11203 reiserfs   acl,user_xattr        1 2,</code>
linuxlvm.txt:   * Remove mount point <code>sudo rmdir /oracle/TCOG/11203</code>
linuxnbuclientinstall.txt:  - Create /usr/openv filesystem<code>sudo lvcreate -n openv -L 4G datavg01
linuxnbuclientinstall.txt:sudo mount /usr/openv</code>
linuxnbuclientinstall.txt:  - Download answer file<code>cd /tmp
linuxnbuclientinstall.txt:echo "CLIENT_NAME=`uname -n`.amer.int.tenneco.com" >> NBInstallAnswer.conf</code>
linuxnbuclientinstall.txt:  - Install NBU client<code>sudo yum -y install VRTSnbcfg VRTSnbclt VRTSnbjava VRTSnbjre VRTSnbpck VRTSpbx VRTSpddea</code>
linuxtricks.txt:  * Configuring hostname and default gateway<code>sudo vi /etc/sysconfig/network</code>Add this following<code>NETWORKING=yes
linuxtricks.txt:GATEWAY=10.32.50.1</code>
linuxtricks.txt:  * Configure eth0 interface<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0</code>And add these values<code>DEVICE=eth0
linuxtricks.txt:ONBOOT=yes</code>
linuxtricks.txt:  * Restart the network services<code>sudo service network restart</code>
linuxtricks.txt:  * Mounting AIX NFS on Redhat<code>sudo mount -o ro,vers=2 pgnmsv01:/prod/images/cds/redhat /mnt/images</code>
linuxtricks.txt:  * Loopback mounting an iso<code>sudo mount -r -t iso9660 -o loop -v /mnt/images/rhel-server-6.3-i386-dvd.iso /mnt/cdrom</code>
linuxtricks.txt:    - The SuSE DVDs SP3 are available here<code>root on pgnmsv01:/root>sudo ls -l /prod/images/cds/SLES/*
linuxtricks.txt:-rw-r--r--    1 root     system   6268772352 Oct 18 21:20 /prod/images/cds/SLES/SLES-10-SP3-DVD-x86_64.iso</code>
linuxtricks.txt:    - Mount the DVD as a filesystem on pgnmsv01<code>loopmount -i /prod/images/cds/SLES/SLES-10-SP1-x86_64.iso -l loop0 -o "-V cdrfs -o ro" -m /cdrom</code>
linuxtricks.txt:    - Export the filesystem<code>exportfs -i -o sec=sys:none,ro /cdrom</code>
linuxtricks.txt:    - Mount the filesystem on the target server<code>mount -o ro pgnmsv01:/cdrom /cdrom</code>
linuxtricks.txt:    - Install the RPM from here<code>rmp -Uvh /cdrom/suse/x86_64/glibc-2.4-31.74.1.x86_64.rpm</code>
linuxtricks.txt:    - Cleanup on the target<code>umount /cdrom</code>
linuxtricks.txt:    - Cleanup on pgnmsv01<code>exportfs -u /cdrom
linuxtricks.txt:loopumount -l loop0 -m /cdrom</code>
linuxtricks.txt:  - Configure network<code>/etc/sysconfig/network/ifcfg-ethX</code>Restart the network stack<code>service network restart</code>
linuxtricks.txt:  - Change hostname<code>vi /etc/HOSTNAME</code>
linuxtricks.txt:  - Discover a newly added LUN - VMWare<code>echo "- - -" > /sys/class/scsi_host/host0/scan</code>
linuxtricks.txt:    - Create a PV<code>pvcreate /dev/sdX</code>
linuxtricks.txt:    - Create a VG<code>vgcreate datavg /dev/sdX</code>
linuxtricks.txt:    - Create an LV<code>lvcreate -n <lvname> <vgname> -L <size></code>
linuxtricks.txt:    - Create a filesystem<code>mkfs -t reiserfs /dev/<vgname>/<lvname></code>
linuxtricks.txt:      - Add it to fstab<code>/dev/<vgname>/<lvname>   <mountpoint>          reiserfs   acl,user_xattr        1 2</code>
linuxtricks.txt:      - Create mountpoint<code>mkdir <mountpoint></code>
linuxtricks.txt:      - Mount it<code>mount <mountpoint></code>
linuxtricks.txt:    - entstat for Linux<code>ethtool ethX</code>
lotus-startup-scr.txt:<code>#!/bin/bash
lotus-startup-scr.txt:esac</code>
lotustraveller.txt:  - Create a standard Linux VM with the folowing configuration<code>1 core
lotustraveller.txt:Virtual floppy, cdrom etc</code>
lotustraveller.txt:  - Create user and group<code>sudo groupadd notes
lotustraveller.txt:sudo useradd -g notes -m notes</code>
lotustraveller.txt:  - Configure user limits<code>sudo vi /etc/security/limits.conf</code>Add this<code>notes soft nofile 65535
lotustraveller.txt:notes hard nofile 65535</code>
lotustraveller.txt:  - Create the datavg<code>sudo pvcreate /dev/sdb
lotustraveller.txt:sudo vgcreate datavg /dev/sdb</code>
lotustraveller.txt:  - Create filesystems<code>sudo lvcreate -L15 datavg
lotustraveller.txt:echo "/dev/mapper/datavg-lvol1   /opt/ibm/lotus                   ext4    defaults        1 2" >> /etc/fstab</code>
lotustraveller.txt:  - Mount and set permissions for filesystems<code>echo "/opt/ibm/lotus /lotus/domino/data" | xargs -n1 sudo mkdir -p
lotustraveller.txt:echo "/opt/ibm/lotus /lotus/domino/data" | xargs -n1 sudo chown notes:notes</code>
lotustraveller.txt:  - Configure yum so we can install 32 bit libraries<code>sudo vi /etc/yum.conf</code>Add this<code>multilib_policy=all</code>
lotustraveller.txt:  - Install pre-requisites<code>sudo yum -y  install libgcc-4.4.6-4.el6.i686 libstdc++-4.4.6-4.el6.i686 glibc-2.12-1.7.el6.i686 \
lotustraveller.txt:libXp-1.0.0-15.1.el6.i686 libXft-2.1.13-4.1.el6.i686 libXi-1.3-3.el6.i686</code>
lotustraveller.txt:  - Install VNC server and Xterm<code>sudo yum -y install tigervnc-server xterm</code>
lotustraveller.txt:  - Install Java<code>sudo yum -y install java</code>
lotustraveller.txt:  - Configure startup scripts<code>sudo chmod +x /etc/init.d/domino
lotustraveller.txt:sudo ln -s /etc/init.d/domino /etc/rc3.d/S99domino</code>
lotustraveller.txt:  - Copy the lotus installables from pgnmsv01<code>sudo rsync -avv pgnmsv01:/prod/images/applications/Domino/ /var/tmp/</code>
lotustraveller.txt:  - Install Domino server<code>cd /var/tmp/domino8
lotustraveller.txt:sudo /var/tmp/linux/domino/domino8/install</code>Work with the Lotus notes Guru and complete the questionnaire.
lotustraveller.txt:  - Install Traveler from a VNC connection<code>sudo vncserver :1</code>Connect to taitc059:1 from a VNC viewer and perform these steps
lotustraveller.txt:    * Install<code>mkdir /var/tmp/853
lotustraveller.txt:./TravelerSetup</code>Work with the Lotus notes Guru and complete the questionnaire.
lotustraveller.txt:    * Install traveler patch<code>mkdir /var/tmp/8533
lotustraveller.txt:./TravelerSetup</code>Work with the Lotus notes Guru and complete the questionnaire.
lpar2rrd-os-agent.txt:  - Login to pcdcunxaxap01 and set a variable to define the target system<code>export targethost=<hostname></code>
lpar2rrd-os-agent.txt:  - Copy the rpm to target<code>sudo scp /prod/images/rpms/lpar2rrd/lpar2rrd-agent-5.05-8.ppc.rpm ${targethost}:/var/tmp/</code>
lpar2rrd-os-agent.txt:    - Login to target system<code>sudo ssh ${targethost}</code>
lpar2rrd-os-agent.txt:    - Create the user<code>sudo /usr/bin/mkuser id=2209 pgrp=staff groups=staff home=/home/lpar2rrd shell=/usr/bin/ksh gecos="Micro partition Data collection" lpar2rrd</code>
lpar2rrd-os-agent.txt:    - Install the agent package<code>sudo rpm -Uvh /var/tmp/lpar2rrd-agent-5.05-8.ppc.rpm</code>Cleanup<code>sudo rm /var/tmp/lpar2rrd-agent-5.05-8.ppc.rpm</code>
lpar2rrd-os-agent.txt:    - Enable cron access for lpar2rrd<code>echo "lpar2rrd" | sudo tee -a /var/adm/cron/cron.allow</code>
lpar2rrd-os-agent.txt:    - Add the script to crontab<code>cat << EOF | sudo tee /var/spool/cron/crontabs/lpar2rrd
lpar2rrd-os-agent.txt:EOF</code>
lpar2rrd-os-agent.txt:    - Refresh cron<code>ps -ef | grep cron | grep -v grep | awk '{print $2}' | xargs -n1 sudo kill</code>
lpar2rrd-os-agent.txt:  - Create the user<code>sudo useradd -g users -d /home/lpar2rrd -c "Micro partition Data collection" -m -u 2209 lpar2rrd
lpar2rrd-os-agent.txt:sudo chage -M -1 lpar2rrd</code>
lpar2rrd-os-agent.txt:  - Enable cron access<code>echo "lpar2rrd" | sudo tee -a /etc/cron.allow</code>
lpar2rrd-os-agent.txt:  - Install the client<code>sudo yum -y install lpar2rrd-agent</code>
lpar2rrd-os-agent.txt:  - Install the cron job<code>cat << EOF | sudo tee /var/spool/cron/lpar2rrd
lpar2rrd-os-agent.txt:EOF</code>
lpar2rrd-os-agent.txt:  - Restart cron<code>sudo systemctl restart crond</code>
lvm.txt:  - Mount all filesystems on an AIX server in one line <code> lsvg -o | xargs -n1 lsvgfs | sort | xargs -n1 mount </code>
lvm.txt:  - Unmount all filesystems in one line <code> lsvg -o | xargs -n1 lsvgfs | sort -r | xargs -n1 umount </code>
lvm.txt:  - Unlock a Volume Group so that the VG can be imported on the other host <code> varyonvg -b -u <vg_name> </code> On the remote host do <code> importvg -n -y <vgname> diskname </code>
lvm.txt:  - Create a JFS2 filesystem <code>mklv -t jfs2 -y <lvname> <vgname> <no_of_lps> <hdisk.....> 
lvm.txt:crfs -v jfs2 -d <lvname> -m <mountpoint> -A yes -t no</code>
lvmnotes.txt:  * Create a volume group <code>mkvg -B -s 256 -y <vgname> disk1 .....</code>
lvmnotes.txt:  * Create a logical volume <code>mklv -tjfs2 -y <lvname> <vgname> <no_of_pps></code>
lvmnotes.txt:  * Create a filesystem <code>crfs -v jfs2 -A yes -t no -d <lvname> -m <mountpoint> </code>
lvmnotes.txt:  * Import a Volume Group <code>importvg -n -y <vgname> disk ....</code>
lvmnotes.txt:  * Export a Volume Group <code>vgexport <vgname></code>
lvmnotes.txt:  * Migrate a PV <code>migatepv <sourcepv> <destinpv1> <destinpv2> .....</code>
lvmnotes.txt:  * Migrate a LP <code>migratelp <sourcedisk>:<source_lpno> <destin_disk>:<destin_pp></code> 
manageuuma.txt:  * Start UUMA<code>cd /opt/tomcat7/bin
manageuuma.txt:./deployuuma</code>
manageuuma.txt:<code>If it gets a connection error, SEVERE: Could not contact localhost:8005. Tomcat may not be running.
manageuuma.txt:at java.net.PlainSocketImpl.socketConnect(Native Method) IGNORE IT</code>
manageuuma.txt:  * Start background processes<code>sudo su - oracle
manageuuma.txt:./start_uumad.sh</code>
managingsudo.txt:    - Check if anybody else is working on sudoers<code>[[ -f /var/tmp/I_am_working_on_sudoers ]] && banner DONT</code>**If you see any output here, someone else is working on sudoers -- Do not proceed**
managingsudo.txt:    - Tell others that I am working on sudoers<code>touch /var/tmp/I_am_working_on_sudoers</code>
managingsudo.txt:    - Automating the backup file<code>export backupfile="/apps/logs/pcdcunxaxap01-sudoers-files/pcdcunxaxap01-sudoers-files.$(date +%m%d%y%H%M)"</code>Make a backup copy<code>sudo cp -p /prod/images/etc/sudoers ${backupfile}</code>
managingsudo.txt:  - Edit the master file on pgnmsv01 Here is the link to the visido manual for reference [[https://www.sudo.ws/man/1.8.16/visudo.man.html| visudo manual]]<code>sudo visudo -f/prod/images/etc/sudoers</code>
managingsudo.txt:  - Make the changes, Check the file <code>sudo visudo -f/prod/images/etc/sudoers -c </code> Look for line in output <code>/prod/images/etc/sudoers file parsed OK</code>
managingsudo.txt:  - Diff the files to make sure there are no additional changes or typos we accidentally might have made<code>sudo diff /prod/images/etc/sudoers ${backupfile}</code>
managingsudo.txt:    - Push the file<code>sudo scp /prod/images/etc/sudoers pcdcunxlxap01:/etc/sudoers</code>
managingsudo.txt:    - Test it on pcdcunxlxap01<code>ssh pcdcunxlxap01</code>Test it<code>sudo ls -ld /tmp</code>
managingsudo.txt:  - Tell others that I am done<code>rm /var/tmp/I_am_working_on_sudoers</code>
managingsudo.txt:  - <del>Once tested, copy the file to all the systems. As root,<code>for host in $(cat /prod/images/etc/allhosts.driv)
managingsudo.txt:done</code>Ignore the errors unless it is the server you want it to go.</del>
managingsudo.txt:    - <del>Copy to DRiV NIM<code>sudo scp /prod/images/etc/sudoers pcdcunxaxap01:/prod/images/etc/sudoers</code>
managingsudo.txt:    - Login to DRiV NIM<code>ssh pcdcunxaxap01</code>
managingsudo.txt:    - DO NOT DO THIS   DO NOT Copy to all DRiV servers<code>for host in $(cat /prod/images/etc/allhosts.driv | grep .cdc | grep -v vilp)
managingsudo.txt:done</code>Ignore the errors unless it is the server you want it to go.</del>
managingsudo.txt:  - Enable xxx user for yyy host<code>sudo /prod/images/scripts/manage_sudo enable xxx yyy</code>
migratebadetohmc.txt-ORIGINAL:   - Save your entries<code>
migratebadetohmc.txt-ORIGINAL:Gateway address: 10.0.4.1</code>	
migratebadetohmc.txt-ORIGINAL:    - Find the ibmvmc device's location code.  On the VIOS partition, access oem_setup_env shell, then run the following command as root<code>lscfg | grep ibmvmc0</code> The output shold resemble ibmvmc0 U7998.61X.100113A-V1-C2 Virtual Management Channel. Record the location code in the second column
migratebadetohmc.txt-ORIGINAL:    - Stop IVM In the VIOS partition access oem_setup_env shell, then run the following command as root: <code>/usr/ios/lpm/sbin/lparmgr accessprocess stop</code>
migratebadetohmc.txt-ORIGINAL:    - Remove the ibmvmc device and adapter <code>rmdev -dev ibmvmc0 </code>
migratebadetohmc.txt-ORIGINAL:    - Access oem_setup_env shell, then run the following command as root: <code> drmgr -c slot -r -s drc_name_for_ibmvmc0</code>where drc_name_for_ibmvmc0is the location code found in step 5 I. 
migratebadetohmc.txt-ORIGINAL:    - Wait up to 10 minutes for RMC to go active.  To check status of the RMC connection run the following command: <code>lssyscfg -m <SYSNAME> -r lpar -F rmc_state,rmc_ipaddr --filter lpar_ids=1</code> where <SYSNAME> is the system name. It will show "active" once the connection is established: active,x.x.x.x      
migratebadetohmc.txt-ORIGINAL:   - Check adapter status From the VIOS Command line run the following command <code> $ lsdev -field name status physloc | grep vasi | grep C32</code> The results should be similiar to 
migratebadetohmc.txt-ORIGINAL:     HMC CLI:<code>chsyscfg -m <system name> -r lpar -i lpar_id=1,msp=0</code> <code>chsyscfg -m <system name> -r lpar -i lpar_id=1,msp=1</code>
mksysb.txt:    - Check timezone, date and time after the build process and set them as it used to be. <code> date </code> 
mksysb.txt:    - Configure etherchannel<code> smitty etherchannel </code>
mksysb.txt:    - Configure TCP/IP <code> smitty tcpip </code>
mksysb.txt:    - Check the hostname and set it as what it used to be. <code> hostname </code>
mksysb.txt:    - Configure AIO and set parameters as what it used to be (refer sysdoc) Check ioo for aix Version 6. <code> lsattr -El aio0 </code>
mksysb.txt:    - Configure powerpath devices ( if any ) <code> powermt config </code>
mksysb.txt:    - Import non data Volume groups <code> importvg -y <vg_name> <diskname> or <pvid> </code>
mksysb.txt:    - Enable Powerpath for rootvg <code> pprootdev on </code>
mksysb.txt:    - Check and make sure the boot list is valid <code> bootlist -m normal -o </code>
mksysb.txt:    - Restart the system <code>shutdown -Fr</code>
mount_data_domain.txt:  - Add the following lines to the /etc/filesystems <code> /data_domain:
mount_data_domain.txt:        account         = false </code>
mount_data_domain.txt:  - Now execute the following command to set upDdata Domain for mounting <code> /usr/sbin/nfso -o nfs_use_reserved_ports=1 </code>
mount_data_domain.txt:  - Mount the device <code> mount /data_domain </code>
na_aix_disaster_recovery_os_levels.txt:^Server Name^OS^Operating System Level^Microcode Level^
nbuphysbuild.txt:    - Storage<code>2  * 600G - Raid1 on built in P408i Raid controller
nbuphysbuild.txt:10 * 900G - Raid6 with one spare built in P408i Raid controller</code>**Enable Cache**
nbuphysbuild.txt:    - Network, work with the network resource to configure the ports as follows<code>4 * 1Gbps network interfaces with the following configuration
nbuphysbuild.txt:                     No "native vlan" statement in the interface configurations.</code>
netbackupcmds.txt:  - Shutdown netbackup as root<code>netbackup stop</code>
netbackupcmds.txt:  - Check it is down<code>bpps -a</code>
netbackupcmds.txt:  - Startup netbackup after a startup<code>nbemmcmd -listhost</code>then do this<code>cfgmgr</code>then do this<code>/usr/openv/netbackup/bin/goodies/netbackup stop
netbackupcmds.txt:/usr/openv/netbackup/bin/bpps</code>
nfsnotes.txt:  * Forcefully unmount a filesystem<code>umount -f <fsname> </code>
nfsnotes.txt:    * Unmount all of them<code>grep -p nfs /etc/filesystems | grep : | sed "s;:;;g" | sort -r | xargs -n1 umount -f</code>
nfsnotes.txt:    * Mount all of them <code>grep -p nfs /etc/filesystems | grep : | sed "s;:;;g" | sort | xargs -n1 mount</code>
nfsnotes.txt:    * Check read check on all of them <code> for fs in $(grep -p nfs /etc/filesystems | grep : | sed "s;:;;g")
nfsnotes.txt: done</code>
nim.txt:  - Reset all resources allocated to a host <code> nim -o deallocate -a subclass=all <nim_client_name> </code>
nim.txt:  - Reset a system i.e. all NFS and bootp configuration is removed <code> nim -Fo reset <nim_hostname> </code>
one-off-soft-install.txt:    - Obtain the RPM from NIM server<code>scp pgnmsv01:/prod/images/rpms/VNC/vnc-3.3.3r2-6.aix5.1.ppc.rpm /var/tmp</code>
one-off-soft-install.txt:    - Install the RPM<code>rpm -i /var/tmp/vnc-3.3.3r2-6.aix5.1.ppc.rpm</code>
one-off-soft-install.txt:    - Cleanup the installation files<code>rm /var/tmp/vnc-3.3.3r2-6.aix5.1.ppc.rpm</code>
one-off-soft-install.txt:    - Obtain the RPM from NIM server<code>scp pgnmsv01:/prod/images/rpms/rsync-3.0.6-1.aix5.3.ppc.rpm /var/tmp</code>
one-off-soft-install.txt:    - Install the RPM<code>rpm -i /var/tmp/rsync-3.0.6-1.aix5.3.ppc.rpm</code>
one-off-soft-install.txt:    - Cleanup the installation files<code>rm /var/tmp/rsync-3.0.6-1.aix5.3.ppc.rpm</code>
one-off-soft-install.txt:  - List files off of an rpm<code>rpm -qpl <filename>.rpm</code>
one-off.txt:  - Mounting filesystems on eu/na backup servers ( filesystems on the bcv devices ) <code> /usr/lpp/EMC/Symmetrix/bin/mkbcv -a </code>
one-off.txt:  - Miscellaneous command I ran while migrating vio10/11 to 30/31<code>VIO30
one-off.txt:Fix /etc/hosts ..</code>
pafoap01server.txt:    * Do the round robin to the root disk<code>sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -l hdiskx</code>
pafoap01server.txt:    * Perform NTP sync<code>date
pafoap01server.txt:date</code>
pafoap01server.txt:      * If it is synced then leave it as it is and if it is not synced then do this.<code>sudo ntpdate -u pgntpap01.amer.int.tenneco.com</code>
pafoap01server.txt:    * Login to the pafoap01 and check the number of disks present other then rootvg.<code>sudo lsvpcfg.sh</code>output<code>hdisk5:00ce6b85f8304ba1: : :34526::datavg01</code>
pafoap01server.txt:    * Unmount the filesystems belongs to datavg01<code>sudo umount /oraforms</code>If it doesn't unmount then check which user is using the hdisk<code>sudo fuser -u /oraforms</code>
pafoap01server.txt:    * Varryoff and export the vg<code>sudo varyoffvg datavg01</code><code>sudo exportvg datavg01</code>
pafoap01server.txt:    * Delete the disk from pafoap01<code>sudo rmdev -dl hdisk5</code>
pafoap01server.txt:    * Shutdown the pafoap01 server<code>sudo shutdown -F</code>
pafoap01server.txt:  * Login to taprvio50 and do lsdiskcfg<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out
pafoap01server.txt:grep -i pafoap01 lsdiskcfg.out</code>we just need datavg01 disks to be deleted.
pafoap01server.txt:  * Unmap the disks<code>sudo su - padmin
pafoap01server.txt:rmvdev -vdev hdisk207</code>delete the disk now<code>sudo rmdev -dl hdisk207</code>
pafoap01server.txt:  * Login to taprvio51 and do lsdiskcfg<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out
pafoap01server.txt:grep -i pafoap01 lsdiskcfg.out</code>we just need datavg01 disks to be deleted.
pafoap01server.txt:  * Unmap the disks<code>sudo su - padmin
pafoap01server.txt:rmvdev -vdev hdisk192</code>delete the disk now<code>sudo rmdev -dl hdisk192</code>
pafoap01server.txt:  * Once disk is available login to xpgscdb1<code>sudo lsvpcfg.sh > lsvpcfg.out.before
pafoap01server.txt:diff lsvpcfg.out.before lsvpcfg.out.after</code>
pafoap01server.txt:  * Configure the roundrobin and  reserve_policy<code>sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -Pl hdiskx</code>
pafoap01server.txt:  * Import the datavg01<code>sudo importvg -y datavg01 00ce6b85f8304ba1</code>
pafoap01server.txt:  * Mount the filesystem after importing vg<code>lsvgfs datavg01 | sort | xargs -n1 sudo mount</code>
pafoap01server.txt:  * Create a entry for NFS and add the below entry in /etc/filesystem<code>sudo cp -p /etc/filesystems /etc/filesystems.$(date +%Y%m%d)
pafoap01server.txt:sudo vi /etc/filessytems</code>Add this config<code>/oracle/DFOR/forms:
pafoap01server.txt:        account         = false</code>
pafoap01server.txt:  * Login to xpgscdb1 throug console<code>sudo getconsole xpgscdb1</code>
pafoap01server.txt:  * Change the hostname and IP<code>/usr/sbin/mktcpip -h pafoap01 -a 10.0.48.174 -m 255.255.255.0 -i en0 -g 10.0.48.1 -A no -s</code>
pafoap01server.txt:  * Set backup IP<code>chdev -l en1 -a netaddr=10.0.49.174 -a netmask=255.255.255.0 -a state=up</code>
pafoap01server.txt:  * DO ping test on pafoap01<code>for ip in 10.0.48.1 10.0.49.1
pafoap01server.txt:done</code>
pafoap01server.txt:  * Reconfigure NFS exports<code>sudo cp -p /etc/exports /etc/exports.$(date +%Y%m%d)</code>ADD the below lines in /etc/exports<code>/usr/sap/trans -sec=sys:krb5p:krb5i:krb5:dh,rw
pafoap01server.txt:exportfs -a</code>
pafoap01server.txt:  * Shutdown the pafoap01 server<code>sudo shutdown -F</code>
paft3p01_02.txt:    - remove ADMCHG from /etc/security/passwd file<code> sudo pwdadm -c <usrname></code>
paft3p01_02.txt:    - Add maxage = 0 and rlogin = false to the user section in /etc/security/user file<code> sudo chuser maxage=0 <username></code><code>sudo chuser rlogin='false' <username></code>
paft3p01_02.txt:    - change user shell:<code>sudo usermod -s /usr/sbin/sftp-server <username></code>
paft3p01_02.txt:    - change primary group: <code>sudo usermod -g taedigrp <username></code>
paft3p01_02.txt:    - change user home directory<code>sudo usermod -d /secftp_home/<username> -m <username></code>
paft3p01_02.txt:    - change ownership and permissions:<code>sudo chown -R <username>:taedigrp <username></code><code>sudo chmod -R 775 <username></code>
paft3p01_02.txt:    - <code>cd /taedi61/gentran/fwder/</code><code>sudo cp advanftp-fwd.sh <username>-fwd.sh</code><code>sudo chmod 755 <username>-fwd.sh</code>
paft3p01_02.txt:    - Refresh init process<code>sudo init q</code><code>sudo init Q</code>
paging_space.txt:<code>svmon -P -O sortentity=virtual
paging_space.txt: 6488518 disp+work       108873    10528  1738150  1821095</code>
paging_space.txt:<code>ps gv | head -n 1; ps gv | egrep -v "RSS" | sort +6b -7 -n -r
paging_space.txt:  5570874      - A    69:12 41280 130172 214184 32768 61391 100740  0.4  1.0 dw.sap</code>
performancetuning.txt:  * VMO settings for database. <code> cmo ......... I dont remember the rest </code>
physicalsystembuild.txt:  * Please make a request to the Wintel resource to create a VM for Redhat Linux.<code>Hello Wintel Team,
physicalsystembuild.txt:Options      : ( Set Boot options to 10,000 ms)</code>
physicalsystembuild.txt:  - The following host configuration allows the transfer of host data to the virtual machine.<code>Using VMware vSphere Client:
physicalsystembuild.txt:Scroll down to Misc.GuestLibAllowHostInfo and set the value to 1.</code>
pickthenextuid.txt:  - Login to pgnmsv01<code>ssh pgnmsv01</code>
pickthenextuid.txt:  - For a single uid, Execute this command. **There is no need to run this as root, I recommend running it as your own account(But make sure you have ssh keys setup )**<code>/prod/images/scripts/picknextuid</code>
pickthenextuid.txt:  - If you need multiple, pass an argument<code>/prod/images/scripts/picknextuid <number_of_unique_ids_needed></code>
postinstall.txt:  - Remove the existing network adapter configurations and delete any ethernet devices from kernel<code>ifconfig enX down detach
postinstall.txt:lsdev -C | egrep "ent|en|et" | sort | xargs -n1 rmdev -dl # Repeat this step until all errors go away</code>
postinstall.txt:  - Scan for devices <code>cfgmgr</code>
postinstall.txt:  - configure etherchannel for the public and backup network<code> smitty etherchannel</code>
postinstall.txt:  - Configure TCP/IP and start the TCP/IP subsystems<code>smitty tcpip ===>Initial configuration </code>
postinstall.txt:  - Configure the bck network adapter<code>smitty tcpip ===> Further configuration</code>
postinstall.txt:     - Powerpath <code>powermt config </code>
postinstall.txt:     - MPIO <code>lspath # Make sure each disk has two paths </code>
postinstall.txt:  - Turn on powerpath booting <code>pprootdev on</code>
postinstall.txt:  - Create alt_rootvg <code> alt_disk_copy -d <diskname></code>
postinstall.txt:  - Remove the existing network adapter configurations and delete any ethernet devices from kernel<code>ifconfig enX down detach
postinstall.txt:lsdev -C | egrep "ent|en|et" | sort | xargs -n1 rmdev -dl # Repeat this step until all errors go away</code>
postinstall.txt:  - Scan for devices <code>cfgmgr</code>
postinstall.txt:  - Configure TCP/IP and start the TCP/IP subsystems<code>smitty tcpip ===>Initial configuration </code>
postinstall.txt:  - Configure the bck network adapter<code>smitty tcpip ===> Further configuration</code>
postinstall.txt:  - Mirror rootvg if the system boots from internal disks. <code> extendvg rootvg <diskname>
postinstall.txt:bootlist -m normal <bootdisk> <mirrdisk></code> 
postinstall.txt:     - MPIO <code>lspath # Make sure each disk has two paths in case of VIO clusters </code>
postinstall.txt:  - Create alt_rootvg <code> alt_disk_copy -d <diskname></code>
postinstallationsteps-redhat-nbu.txt:  - Kernel parameters<code>cat << EOF | sudo tee -a /etc/sysctl.conf
postinstallationsteps-redhat-nbu.txt:EOF</code>
postinstallationsteps-redhat-nbu.txt:  - Re-read configuration<code>sudo sysctl -p</code>
postinstallationsteps-redhat-nbu.txt:  - User limits<code>cat << EOF | sudo tee -a /etc/security/limits.conf
postinstallationsteps-redhat-nbu.txt:EOF</code>
postinstallationsteps-redhat-nbu.txt:  - Add netbackup service account<code>sudo groupadd -g 9091 nbwebgrp
postinstallationsteps-redhat-nbu.txt:sudo useradd -g nbwebgrp -c 'NetBackup Web Services account' -d /usr/openv/wmc -m -u 9091 nbwebsvc</code>
postinstallationsteps-redhat-nbu.txt:  - Create Netbackup data volume group<code>sudo pvcreate /dev/sdb
postinstallationsteps-redhat-nbu.txt:sudo vgcreate -s 512M datavg01 /dev/sdb</code>
postinstallationsteps-redhat-nbu.txt:    - If you face any error i.e.<code>sudo pvcreate /dev/sdb
postinstallationsteps-redhat-nbu.txt:pvcreate device /dev/sdb not found (or ignored by filtering)</code>then do the following<code>sudo parted /dev/sdb mklabel gpt
postinstallationsteps-redhat-nbu.txt:Yes/No? y</code><code>sudo file -s /dev/sdb
postinstallationsteps-redhat-nbu.txt:output:- /dev/sdb: x86 boot sector; partition 1: ID=0xee, starthead 0, startsector 1, 4294967295 sectors, extended partition table (last)\011, code offset 0x0</code><code>sudo dd if=/dev/zero of=/dev/sdb bs=1k</code><code>sudo file -s /dev/sdb
postinstallationsteps-redhat-nbu.txt:output:- /dev/sdb: data</code><code>sudo pvcreate /dev/sdb
postinstallationsteps-redhat-nbu.txt:sudo vgcreate -s 512M datavg01 /dev/sdb</code>
postinstallationsteps-redhat-nbu.txt:  - Create netbackup filesystems<code>sudo lvcreate -n inst              -L 50GB   datavg01
postinstallationsteps-redhat-nbu.txt:sudo mount    /msdp/cat</code>
postinstallationsteps-redhat-nbu.txt:  - Remove the configuration on eno1<code>sudo rm /etc/sysconfig/network-scripts/ifcfg-eno1</code>
postinstallationsteps-redhat-nbu.txt:  - Create configuration files<code>cat << EOF | sudo tee /etc/sysconfig/network-scripts/ifcfg-bond0
postinstallationsteps-redhat-nbu.txt:EOF</code>
postinstallationsteps-redhat-nbu.txt:    - VLAN<code>export VLAN=XXX</code>Ask the network team member for the VLAN id.
postinstallationsteps-redhat-nbu.txt:    - IP & MASK<code>IP=$(ifconfig -a | grep inet | grep -v 127.0.0.1 | awk '{print $2}')
postinstallationsteps-redhat-nbu.txt:MASK=$(ifconfig -a | grep inet | grep -v 127.0.0.1 | awk '{print $4}')</code>
postinstallationsteps-redhat-nbu.txt:  - Create the VLAN configuration<code>cat << EOF | sudo tee /etc/sysconfig/network-scripts/ifcfg-bond0.${VLAN}
postinstallationsteps-redhat-nbu.txt:EOF</code>
postinstallationsteps-redhat-nbu.txt:  - Remove IP from eno1 and move to the VLAN interfaces. Do this step exactly as documented and it does take about 30 seconds<code>sudo ifconfig eno1 down ; sudo service network restart</code>
postinstallationsteps-redhat-nbu.txt:  - Add iSCSI VLAN & IP address<code>export VLAN=203
postinstallationsteps-redhat-nbu.txt:export ISCSI_IP=192.168.0.101</code><code>cat << EOF | sudo tee /etc/sysconfig/network-scripts/ifcfg-bond0.${VLAN}
postinstallationsteps-redhat-nbu.txt:EOF</code><code>sudo ifup bond0.${VLAN}</code>Check it now<code>ifconfig bond0.${VLAN}</code>
postinstallationsteps-redhat-nbu.txt:    - check package if it is installed or not<code>rpm -qa | grep -i iscsi*</code>
postinstallationsteps-redhat-nbu.txt:    - Install the package if not installed<code>sudo yum install iscsi-initiator-utils</code>
postinstallationsteps-redhat-nbu.txt:    - And if anyone asks for iscsi Initiator Node then do this<code>cat /etc/iscsi/initiatorname.iscsi</code>
postinstallationsteps-redhat-nbu.txt:  - In order to receive NBU hot catalog backup form giosdatapresalerts@driv.com follow below steps:<code>echo "sender_canonical_maps = hash:/etc/postfix/sender_canonical_maps" >> /etc/postfix/main.cf
postinstallationsteps-redhat-nbu.txt:postfix reload</code>
postinstallationsteps-redhat-nbu.txt:  - test now the hot catalog backup if email recived is from proper sender.<code>bpbackup -I -p HOT_xxx</code>
postinstallationsteps-redhat-nbu.txt:  - If using postfix email. To set the smtp mail relay to use smtp.driv.com make a copy of the mail.cf file. <code>cd /etc/postfix</code> <code> sudo cp -p main.cf main.cf.$(date +%Y%m%d) </code> edit the /etc/postfix/main/cf file and replace the following line <code>#relayhost = [gateway.my.domain]</code> with <code> relayhost = [smtp.driv.com] </code> then restart the postfix mail <code> sudo /bin/systemctl restart postfix.service</code>
postinstallationsteps-redhat-omi.txt:  - Login to the server you are building<code>ssh <hostname></code>
postinstallationsteps-redhat-omi.txt:  - Check /tmp it should be 5GB if not then do this step increase the size accordingly<code>sudo lvextend -L5G /dev/mapper/sysvg-tmp
postinstallationsteps-redhat-omi.txt:sudo resize2fs /dev/mapper/sysvg-tmp</code>
postinstallationsteps-redhat-omi.txt:  - Create users account and provide the password to John ziegler he will change it after first login<code>sudo useradd -K PASS_MAX_DAYS=-1 -s /usr/bin/bash -g ovteam -G ovteam -d /home/omiuser -c "OMI administrator" -m -u 7111 omiuser
postinstallationsteps-redhat-omi.txt:echo "oracle:sanQizA8rxfiI" | sudo chpasswd -e</code>The password is set to 'abcd1234' -- please ask OV team to change.
postinstallationsteps-redhat-omi.txt:  - Create filesystems<code>sudo lvcreate -L 50G -n opt_HP_BSM /dev/datavg01
postinstallationsteps-redhat-omi.txt:sudo chown oracle:dba /oracle/client</code>
postinstallationsteps-redhat-omi.txt:  - Install packages<code>sudo yum install initscripts perl libaio libpng12.x86_64 liberation-sans-fonts.noarch\
postinstallationsteps-redhat-omi.txt: libaio-devel perl-devel</code>
postinstallationsteps-redhat-omi.txt:      - Copy the Oracle client installables<code>sudo rsync -avv /prod/images/cds/oracle/12cclient-rhel64bit/ <server_name>:/tmp/oracle/</code>
postinstallationsteps-redhat-omi.txt:      - Copy the DBD installables<code>sudo rsync -avv /prod/images/cds/perl/perl-Oracle-DBD/DBD-Oracle-1.75_2/ <server_name>:/tmp/DBD-Oracle-1.75_2/</code>
postinstallationsteps-redhat-omi.txt:        - Create response file<code>sudo -u oracle cat /tmp/oracle/oracle_client_rhel_12c.rsp | sed "s;ORA_TENNECO_HOSTNAME;$(uname -n);g" > /tmp/oracle_client_rhel_12c.rsp</code>
postinstallationsteps-redhat-omi.txt:        - Run the installer as oracle<code>sudo -u oracle /tmp/oracle/runInstaller -silent -waitforcompletion -responseFile /tmp/oracle_client_rhel_12c.rsp</code>
postinstallationsteps-redhat-omi.txt:        - Run the root.sh<code>sudo /oracle/client/oraInventory/orainstRoot.sh</code>
postinstallationsteps-redhat-omi.txt:        - Execute these<code>sudo chown -R oracle:dba /tmp/DBD-Oracle-1.75_2</code>Then as oracle user<code>sudo su - oracle
postinstallationsteps-redhat-omi.txt:make</code>Back to root id<code>cd /tmp/DBD-Oracle-1.75_2
postinstallationsteps-redhat-omi.txt:sudo make install</code>
postinstallationsteps-redhat-omi.txt:  - Install a basic tnsnames.ora<code>sudo -u oracle vi /oracle/client/network/admin/tnsnames.ora</code>Add this<code><SID_NAME> =
postinstallationsteps-redhat-omi.txt:  )</code>
postinstallationsteps-redhat-omi.txt:  - Install these additional perl modules<code>sudo yum install perl-Crypt-SSLeay perl-IO-Socket-SSL perl-libwww-perl perl-URI perl-LWP-Protocol-https perl-XML-Parser</code>  
postinstallationsteps-redhat-omi.txt:    - Login to pgnmsv01<code>sudo rsync -avv /prod/images/cds/perl/ <servername>:perlmodules/</code>
postinstallationsteps-redhat-omi.txt:    - Install the modules. Login to the server<code>for dir in MIME-Base64-3.15 MIME-Types-2.13 SOAP-Lite-1.20 Test-Simple-1.302085 Class-Inspector-1.31 ServiceNow-1.01
postinstallationsteps-redhat-omi.txt:done</code>
postinstallationsteps-redhat.txt:    - For DRiV<code>ssh pcdcunxaxap01</code>
postinstallationsteps-redhat.txt:  - Login to the server (as root) you just built<code>sudo ssh <hostname></code>
postinstallationsteps-redhat.txt:  - For DRiV - Login to pcdcunxaxap01<code>ssh pcdcunxaxap01</code>
postinstallationsteps-redhat.txt:  - Copy SSH keys, sudoers, uuma and such<code>sudo /prod/images/scripts/config_tenneco_linux <servername></code>
postinstallationsteps-redhat.txt:  - Shutdown the VM<code>ssh ${server_tenneco}</code>Shutdown<code>sudo init 0</code>
postinstallationsteps-redhat.txt:    - On VMWARE based systems<code>Edit settings on the vSphere client and remove the isofile mapping to Virtual CDROM
postinstallationsteps-redhat.txt:Make it client device</code>Once done --> Power on the VM
postinstallationsteps-redhat.txt:    - On standalone NBU home made appliances<code>ssh LAN@${server_tenneco}rmb</code>Eject the CDROM<code>vm cdrom eject</code>Exit from iLO<code>exit</code>
postinstallationsteps-redhat.txt:  - After the installation check the kickstart logs to make sure there were no errors<code>sudo more /root/ks-pre.log
postinstallationsteps-redhat.txt:sudo more /root/ks-post.log</code>
postinstallationsteps.txt:  - Login to pcscunxaxap01 and store the hostname<code>export targethost=<host></code>'host' is the one being built.
postinstallationsteps.txt:  - For some of our favorite team members, we also copy the ssh keys for them.<code>for user in x1kousra x1jhz999 jhf1625 pawetkac tauxrpt x1kxk630 x1shukla x1vasuna x1rzb826 x1cxs952 snowscan rajhsubr raghk x1nithsa secscan
postinstallationsteps.txt:done</code>
postinstallationsteps.txt:    - North America<code>sudo scp /prod/images/etc/resolv.conf.na ${targethost}:/etc/resolv.conf</code>
postinstallationsteps.txt:    - Europe<code>sudo scp /prod/images/etc/resolv.conf.eu ${targethost}:/etc/resolv.conf</code>
postinstallationsteps.txt:    - AIX<code>sudo scp /prod/images/etc/ntp.conf.aix ${targethost}:/etc/ntp.conf</code>
postinstallationsteps.txt:    - VIOS<code>sudo scp /prod/images/etc/ntp.conf.vios ${targethost}:/home/padmin/config/ntp.conf</code>
postinstallationsteps.txt:    - Refresh the daemons<code>sudo ssh ${targethost} "chrctcp -S -a xntpd"
postinstallationsteps.txt:sudo ssh ${targethost} "ntpdate -u pgntpap01.amer.int.tenneco.com"</code>Check the date and time<code>sudo ssh ${targethost} date</code>
postinstallationsteps.txt:  - Configure default ssh configs<code>sudo scp /prod/images/etc/global_ssh_config ${targethost}:/etc/ssh/ssh_config</code>
postinstallationsteps.txt:  - Configure sysinter<code>sudo ssh ${targethost} "mkdir -p /usr/local/bin"
postinstallationsteps.txt:sudo ssh ${targethost} "refresh -s inetd"</code>
postinstallationsteps.txt:  - Copy the scripts<code>sudo ssh ${targethost} "mkdir -p /usr/local/scripts"
postinstallationsteps.txt:sudo rsync -a /usr/local/scripts/ ${targethost}:/usr/local/scripts/</code>
postinstallationsteps.txt:  - Create a mksysb filesystem<code>sudo ssh ${targethost} "crfs -vjfs2 -g rootvg -m /bkpmksb -A yes -t no -a size=20G"
postinstallationsteps.txt:sudo ssh ${targethost} "mount /bkpmksb"</code>
postinstallationsteps.txt:  - Setup mksysb backup<code>sudo scp /prod/images/etc/id_dsa.mksysb ${targethost}:/usr/local/scripts/id_dsa.mksysb
postinstallationsteps.txt:sudo scp /prod/images/scripts/mksysb.sh ${targethost}:/usr/local/scripts/mksysb.sh</code>
postinstallationsteps.txt:  - If AIX, Add the system to UUMA<code>sudo ssh pcdcunxlxap03 "echo ${targethost} >> /home/oracle/uuma/hosts.txt"</code>
postinstallationsteps.txt:  - If AIX, configure snmpd<code>sudo scp /prod/images/etc/snmpdv3.conf.aix ${targethost}:/etc/snmpdv3.conf</code>
postinstallationsteps.txt:    - Add ODM<code>sudo scp /prod/images/etc/tensyslogadd ${targethost}:/var/tmp/tensyslogadd
postinstallationsteps.txt:sudo ssh ${targethost} "rm /var/tmp/tensyslogadd"</code>
postinstallationsteps.txt:    - Add configurations to syslog<code>sudo ssh ${targethost} "grep ^'*.notice' /etc/syslog.conf | grep -q pglgsv01"
postinstallationsteps.txt:[[ "${config}" = "yes" ]] && sudo ssh ${targethost} 'refresh -s syslogd'</code>
postinstallationsteps.txt:  - Cleanup cron jobs<code>for file in $(sudo ls -1 /var/spool/cron/crontabs | egrep -v "^root$|^adm$|^sys$|^uucp$|^tauxrpt$|^lpar2rrd$|^snowscan$")
postinstallationsteps.txt:done</code>
postinstallationsteps.txt:  - Enable cron if disabled<code>sudo mkitab cron:23456789:respawn:/usr/sbin/cron</code>
postinstallationsteps.txt:  - Add the TMOUT variable to /etc/profile if it wasn't a clone<code>sudo vi /etc/profile</code><code># Automatic logout, include in export line if uncommented
postinstallationsteps.txt:PS1="$LOGNAME on "$(uname -n)":"'$PWD $ '</code>
postinstallationsteps.txt:    - root<code>sudo crontab -e</code>Add these<code># Customized for DRiV
postinstallationsteps.txt:05 * * * * /usr/local/scripts/stales.sh 1>/dev/null 2>&1</code>
postinstallationsteps.txt:    - tauxrpt - Grant cron access<code>sudo crontab -l tauxrpt</code><code>echo "tauxrpt" | sudo tee -a /var/adm/cron/cron.allow</code><code>sudo -u tauxrpt crontab -e</code>Add these<code>30 23 * * 6 /usr/local/scripts/rpt_config_tauxrpt.sh 1>/dev/null 2>&1</code>
postinstallationsteps.txt:    - Check if oracle user has cron access, If not please Grant access<code>sudo crontab -l oracle</code><code>echo "oracle" | sudo tee -a /var/adm/cron/cron.allow</code>
postinstallationsteps.txt:     - Restart Cron<code>ps -ef | grep cron | grep -v grep | awk '{print $2}' | xargs -n1 sudo kill</code>
postinstallationsteps.txt:  - If booting from SAN, Create an alt_disk_copy.<code>sudo alt_disk_copy -B -d hdiskX</code>
postinstallationsteps.txt:    - <code>sudo rmitab "xmdaily"</code>
postinstallationsteps.txt:    - AIX<code>extendvg rootvg hdiskX
postinstallationsteps.txt:sudo bootlist -m normal hdiskX hdiskY</code>
postinstallationsteps.txt:      - Login as padmin Mirror boot disk<code>extendvg -f rootvg hdiskX
postinstallationsteps.txt:mirrorios -f hdiskX</code>**Check the bootlist**
postinstallationsteps.txt:        - <code>oem_setup_env</code><code>bootlist -m normal hdiskX hdiskY</code>
postinstallationsteps.txt:  - If VIOS, Check the root file system "/". If it is 300M, extend it by 1324M<code>df -gt /
postinstallationsteps.txt:sudo chfs -a size=+1324M / </code>
postinstallationsteps.txt:  - Do a final reboot<code>sudo shutdown -Fr</code>
postinstallationsteps.txt:  - Login to the NIM server and perform a NIM client cleanup<code>sudo nim -F -o reset <hostname>
postinstallationsteps.txt:sudo nim -o deallocate -a subclass=all <hostname></code>
postmovework.txt:<code>
postmovework.txt:shutdown -Fr</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>ent0    Available 03-00 PCIe2 2-Port 10GbE Base-T Adapter (e4148e1614109204)
power8-vio-cluster-power8-vio-cluster.txt:ent4    Available       Virtual I/O Ethernet Adapter (l-lan) <=== used to IP the VIO</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>lsdev -C | grep -i defi | grep -E "^en|^et" | awk '{print $1}' | xargs -n1 rmdev -dl</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>mkvdev -lnagg ent0 ent1 -attr mode=8023ad
power8-vio-cluster-power8-vio-cluster.txt:et5</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>mkvdev -sea ent5 -vadapter ent2,ent3 -default ent2 -defaultid 1 -attr ha_mode=sharing 
power8-vio-cluster-power8-vio-cluster.txt:et6</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>mkdir -p /root/.ssh
power8-vio-cluster-power8-vio-cluster.txt:passwd root</code>
power8-vio-cluster-power8-vio-cluster.txt:<code>ssh-dss AAAAB3NzaC1kc3MAAACBAMOaBVrtJGZBDDC1dZxiKrH9hbBJ6KVbU1WMrQMsMLgcUBGMluf81kAXMBOtwU/+jEnGlWn4J0Vca0dOuY4983ttx4GY7uRTwXkKLuQV/oRy7PxGLESQRuI5ZfvAwFCQnbji/Q3os0PaqSl1N/Iauw/QqRVXt4+5fW0yofSGk+FvAAAAFQDoCQjuMUblL4IiyfEENkSmeRPOXQAAAIEAhq4KKO761JxOmOuuJqUO86GknabEqsscowQpe/RilOPim2bBq+Ar2zpcsGtSlWzGWiUBxqelCq6rgyW5pEupS4DDymgIXxul/R/6BP0wYQKPJDhfasQIo/l8ZZd8cVqL7Ql6flmZ3cBxWUXaHDl80sVwTbacLCNwNuHJpak7Je8AAACASXo/ILshYVxAzrhQejz+PHbnPZlSf1kfRSqNNpuU0OXuD3C/xqsIaDng7vHCGzY7y0xbHy/i46dNCSDp5M3Uo2Qxz9U0GiPVji+vDZ/hqtp8BaLnFFhLxnjxywyM/uJgPOWtJl3I8oX1FuFnUl6WNib8ymSgP/yWZVMLCB5Q9b4= root@pgnmsv01</code>
power8_npiv_mapping_rules.txt:<code>if [[ guest == even ]]
power8_npiv_mapping_rules.txt:fi</code>  
power8sysraidsad.txt:  - List all pdisks and hdisks on a given adapter<code>sudo sissasraidmgr -L -l sissas0</code>
power8sysraidsad.txt:  - Prepare a pdisk for array candidacy<code>sudo sissasraidmgr -P -z pdisk2</code>
power8sysraidsad.txt:  - Deletes an array<code>sudo sissasraidmgr -D -d hdiskX</code>
powerpath.txt:  * Configure Powerpath <code> powermt config</code>
powerpath.txt:  * Display Powerpath <code>powermt display</code>
powerpath.txt:  * Display all Powerpath devices <code>powermt display dev=all</code>
powerpath.txt:  * Set adapter offline <code>powermt set adapter <no> offline</code>
powerpath.txt:  * Set adapter to standby <code>powermt set adapter <no> standby</code>
printerprobs.txt:  - Install this shell script on all app server's cron. It will run every 15 mins and enable all printers<code>0,15,30,45 * * * * /usr/local/scripts/enableprinter.sh 1>/dev/null 2>&1</code>Installed on 9/27/2012 on all PTA and PTB app servers.
printers-new.txt:  * Run the menu<code>sudo /root/UPQMS</code>
pta-split-work-cicopy.txt:<code>sudo rsync --delete -axvv /usr/sap/              paerap99:/usr/sap/
pta-split-work-cicopy.txt:sudo rsync --delete -axvv /sapcomm/PTA/ftpgis/   paerap99:/sapcomm/PTA/ftpgis/</code>
purestorage_h1p_backup.txt:    - Login to pehrdb99, take a snapshot of current config<code>sudo lsvpcfg.sh > lsvpcfg.out.6</code>
purestorage_h1p_backup.txt:    - Offline and export the VG<code>lsvgfs datavg01 | xargs -n1 sudo umount
purestorage_h1p_backup.txt:sudo exportvg datavg01</code>
purestorage_h1p_backup.txt:    - Delete the datavg01 disks<code>grep datavg01 lsvpcfg.out.6 | awk -F: '{print $1}' | xargs -n1 sudo rmdev -dl</code>
purestorage_h1p_backup.txt:    - Disconnect the volumes from pehrdb99. Login to pgunap01<code>for volume in {001..021}
purestorage_h1p_backup.txt:done</code>
purestorage_h1p_backup.txt:  -Create an empty protection group<code>${SSH2INXM20} purepgroup create h1pdbstandby2</code>
purestorage_h1p_backup.txt:  - Add all h1p standby database volumes to the protection group<code>for volume in {001..021}
purestorage_h1p_backup.txt:done</code>
purestorage_h1p_backup.txt:  - List the protection group<code>${SSH2INXM20} purepgroup list h1pdbstandby2</code>
purestorage_h1p_backup.txt:  - Take a snapshot of H1P pehrdb98<code>${SSH2INXM20} purepgroup snap --suffix stbyrefresh h1pdbstandby2</code>
purestorage_h1p_backup.txt:  - Copy the snapshot to new volumes.<code>for volume in {001..021}
purestorage_h1p_backup.txt:done</code>
purestorage_h1p_backup.txt:  - Connect the snapshot volumes to pehrdb99<code>for volume in {001..021}
purestorage_h1p_backup.txt:done</code>
purestorage_h1p_backup.txt:  - Login to pehrdb99<code>sudo lsvpcfg.sh > lsvpcfg.out.7
purestorage_h1p_backup.txt:sudo lsvpcfg.sh > lsvpcfg.out.8</code>
purestorage_h1p_backup.txt:  - Recreate VG on pehrdb99<code>ssh pehrdb98 lspv | grep datavg01 | awk '{print $2}' > pehrdb98.datavg01.pvids</code>Document the disks<code>lspv | grep -f pehrdb98.datavg01.pvids | awk '{print $1}' | tr "\n" " "</code>Then recreatevg <code>sudo recreatevg -L/ -Y/ -y datavg01 <list of disks from above comand></code>
purestorage_h1p_backup.txt:  - Run fsck and mount the filesystems<code>for fs in $(lsvgfs datavg01)
purestorage_h1p_backup.txt:done</code>
purestoragemigration-ldc.txt:    - Login to the server<code>ssh <hostname></code>
purestoragemigration-ldc.txt:    - Define this function<code>function find_disks {
purestoragemigration-ldc.txt:}</code>
purestoragemigration-ldc.txt:    - Execute it<code>find_disks</code>
purestoragemigration-ldc.txt:  - Use the following table to figure out if we need Pure ODM drivers<code>Virtualized SCSI disks - Do not install on the Guest( Instead, install them on the VIOS servers )
purestoragemigration-ldc.txt:Direct Connect         - Install the device drivers</code>
purestoragemigration-ldc.txt:    - Check if pure ODM has been installed.<code>lslpp -l devices.fcp.disk.pure.flasharray.mpio.rte</code>You should see this if ODM is installed<code> Fileset                      Level  State      Description         
purestoragemigration-ldc.txt:                                                 Flash Arrays(New Install)</code>If Pure ODM is not installed, you would find something like this<code>lslpp: 0504-132  Fileset devices.fcp.disk.pure.flasharray.mpio.rte not installed.</code>
purestoragemigration-ldc.txt:      - NFS mount the source for packages<code>sudo mkdir -p /mnt/pure ;sudo  mount pgnmsv01:/prod/images/storage /mnt/pure</code>
purestoragemigration-ldc.txt:      - Install the ODM<code>sudo installp -acX -d /mnt/pure/PureODM all</code>It will say reboot, but don't reboot. i.e. Please ignore this message<code>    * * *  A T T E N T I O N  * * *
purestoragemigration-ldc.txt:    and to avoid disruption of current functionality.</code>
purestoragemigration-ldc.txt:      - Unmount the nfs mount<code>sudo umount /mnt/pure</code>
purestoragemigration-ldc.txt:    - Capture the before state<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.1</code>
purestoragemigration-ldc.txt:    - Cfgmgr<code>sudo cfgmgr</code>
purestoragemigration-ldc.txt:    - Capture the after state<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.2</code>
purestoragemigration-ldc.txt:    - Validate the number of required drives are present.<code>diff lsvpcfg.out.1 lsvpcfg.out.2</code>
purestoragemigration-ldc.txt:    - rootvg disk in a variable<code>export targetrootvgdisk="hdiskA"</code>
purestoragemigration-ldc.txt:    - alt_rootvg disk in a variable<code>export targetaltrootvgdisk="hdiskB"</code>
purestoragemigration-ldc.txt:    - Create a file for each VG that needs migration<code>vi datavgmigration.txt</code>Something like this. Syntax is "vgname:target disk"<code>binvg01:hdiskC
purestoragemigration-ldc.txt:datavg01:hdiskF</code>
purestoragemigration-ldc.txt:      - rootvg<code>export currentrootvgdisk=$(lspv | grep -w rootvg | awk '{print $1}' )</code>
purestoragemigration-ldc.txt:      - altinst_rootvg<code>export currentaltinstrootvgdisk=$(lspv | grep -w altinst_rootvg | awk '{print $1}')</code>
purestoragemigration-ldc.txt:  - Execute this command to prepare commands to mirror, migrate, unmirror and reducevg, verify and execute<code>for vgname in $(awk -F: '{print $1}' datavgmigration.txt | sort -u )
purestoragemigration-ldc.txt:done</code>
purestoragemigration-ldc.txt:  - To check progress of mirroring<code>while [ $(ps -ef | grep "syncvg" | grep -v grep | wc -l ) -gt 0 ]
purestoragemigration-ldc.txt:done</code>
purestoragemigration-ldc.txt:  - Prepare commands for delete and communication to Storage team. Carefully examine and execute<code>for vgname in $(awk -F: '{print $1}' datavgmigration.txt | sort -u )
purestoragemigration-ldc.txt:done</code>
purestoragemigration-ldc.txt:    - Mirror rootvg too<code>export LVM_HOTSWAP_BOOTDISK=1
purestoragemigration-ldc.txt:sudo bosboot -ad /dev/${targetrootvgdisk}</code>
purestoragemigration-ldc.txt:    - Migrate the alt_disk. This step does not delete the data off of alt_rootvg<code>sudo alt_disk_install -X altinst_rootvg</code>
purestoragemigration-ldc.txt:    - Delete the old disks<code>sudo rmdev -dl ${currentrootvgdisk}
purestoragemigration-ldc.txt:sudo rmdev -dl ${currentaltinstrootvgdisk}</code>
purestoragemigration-ldc.txt:    - Create a new alt_disk_copy<code>sudo alt_disk_copy -g -B -d ${targetaltrootvgdisk}</code>
purestoragemigration.txt:      - Lincolnshire<code>sudo mkdir -p /mnt/pure ;sudo  mount pgnmsv01:/prod/images/storage /mnt/pure</code>
purestoragemigration.txt:      - Interexion<code>sudo mkdir -p /mnt/pure ;sudo  mount penmsv01:/prod/images/storage /mnt/pure</code>
purestoragemigration.txt:    - Install the ODM<code>sudo installp -acX -d /mnt/pure/PureODM all</code>It will say reboot, but don't reboot. i.e. Please ignore this message<code>    * * *  A T T E N T I O N  * * *
purestoragemigration.txt:    and to avoid disruption of current functionality.</code>
purestoragemigration.txt:    - Unmount the nfs mount<code>sudo umount /mnt/pure</code>
purestoragemigration.txt:    - Capture the before state<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.1</code>
purestoragemigration.txt:    - Cfgmgr<code>sudo cfgmgr</code>
purestoragemigration.txt:    - Capture the after state<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.2</code>
purestoragemigration.txt:    - Validate the number of required drives are present.<code>diff lsvpcfg.out.1 lsvpcfg.out.2</code>
purestoragemigration.txt:    - Mirror rootvg too<code>export LVM_HOTSWAP_BOOTDISK=1
purestoragemigration.txt:sudo bosboot -ad /dev/hdiskY</code>
purestoragemigration.txt:    - Migrate the alt_disk. This step does not delete the data off of alt_rootvg<code>sudo alt_disk_install -X altinst_rootvg</code>
purestoragemigration.txt:    - Delete the old disks<code>sudo rmdev -dl hdiskX # Old root disk
purestoragemigration.txt:sudo rmdev -dl hdiskZ # Old alt_rootvg disk</code>
purestoragemigration.txt:    - Create a new alt_disk_copy<code>sudo alt_disk_copy -g -B -d hdisk13</code>
redhatbonding.txt:** In this example we are bonding(or teaming or etherchanneling) the following devices **<code>eth0 + eth1 = bond0      10.0.48/24
redhatbonding.txt:eth2 + eth3 = bond1      10.0.49/24</code>
redhatbonding.txt:  - Enable bonding devices<code>sudo vi /etc/modprobe.d/bonding.conf</code>Insert the following lines<code>alias bond0 bonding
redhatbonding.txt:alias bond1 bonding</code>
redhatbonding.txt:  - Configure the bond interfaces<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-bond0</code>Insert the following lines for bond0 **change IPs**<code>DEVICE=bond0
redhatbonding.txt:BONDING_OPTS="mode=active-backup fail_over_mac=1"</code>And bond1 **change IPs**<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-bond1</code>these lines<code>DEVICE=bond1
redhatbonding.txt:BONDING_OPTS="mode=active-backup arp_interval=3000 arp_ip_target=xx.xx.xx.xx"</code>**xx.xx.xx.xx is the default router for that subnet**
redhatbonding.txt:    - eth0<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0</code>Add these<code>DEVICE=eth0
redhatbonding.txt:USERCTL=no</code>
redhatbonding.txt:    - eth1<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-eth1</code>Add these<code>DEVICE=eth1
redhatbonding.txt:USERCTL=no</code>
redhatbonding.txt:  - Now that all devices are configured, turn on the devices.<code>sudo service network restart</code>
redhatbonding.txt:  - Check the bonding configuration<code>cat /proc/net/bonding/bond0
redhatbonding.txt:Slave queue ID: 0</code>
redhatkernparam.txt:  - Edit file <code>sudo vi /etc/security/limits.conf</code>Make changes<code>notes soft nofile 65535
redhatkernparam.txt:notes hard nproc  16384</code>Or any changes that you mat need.
redhatkernparam.txt:  - Make the changes active<code>sudo sysctl -p</code>
redhatlunexpansion.txt:      * Current state<code>sudo fdisk -l | grep /dev/sd</code>The result looked like<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors
redhatlunexpansion.txt:Disk /dev/sdb: 32.9 GB, 32949672960 bytes, 83886080 sectors</code>
redhatlunexpansion.txt:     * First step is to make sure the Redhat kernel detects the new size.<code>echo "1" | sudo tee /sys/block/sdc/device/rescan</code>
redhatlunexpansion.txt:     * Now when we execute<code>sudo fdisk -l | grep /dev/sd</code>The output now looks like<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors
redhatlunexpansion.txt:Disk /dev/sdb: 42.9 GB, 42949672960 bytes, 83886080 sectors</code>As you see ''/dev/sdb'' is now 42.9 GB or 40GB.
redhatlunexpansion.txt:      * Current config<code>sudo pvs</code>And<code>  PV         VG       Fmt  Attr PSize  PFree
redhatlunexpansion.txt:  /dev/sdc   pagingvg lvm2 a--  64.00g     0</code>
redhatlunexpansion.txt:      * Rescan the PV<code>sudo pvresize /dev/sdc</code>STDOUT prints something like this<code>  Physical volume "/dev/sdb" changed
redhatlunexpansion.txt:  1 physical volume(s) resized / 0 physical volume(s) not resized</code>
redhatlunexpansion.txt:      * Now it shows<code>sudo pvs</code>And<code>  PV         VG       Fmt  Attr PSize  PFree
redhatlunexpansion.txt:  /dev/sdc   pagingvg lvm2 a--  64.00g     0</code>
redhatlunexpansion.txt:      * The free space is automatically displayed on the VG now<code>sudo vgs</code>And the output looks<code>  VG       #PV #LV #SN Attr   VSize  VFree
redhatlunexpansion.txt:  sysvg      1   5   0 wz--n- 68.94g 23.94g</code>
redhatlunexpansion.txt:  * Execute <code>sudo fdisk -l | grep /dev/sd</code>The output now looks like<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors
redhatlunexpansion.txt:Disk /dev/sdb: 42.9 GB, 42949672960 bytes, 83886080 sectors</code>
redhatlunexpansion.txt:  * Dont know which host has it hence<code>echo "- - -" | sudo tee /sys/class/scsi_host/host0/scan
redhatlunexpansion.txt:echo "- - -" | sudo tee /sys/class/scsi_host/host2/scan</code>
redhatlunexpansion.txt:  * Now when we execute<code>sudo fdisk -l | grep /dev/sd</code>The output now looks like<code>Disk /dev/sda: 75.2 GB, 75161927680 bytes, 146800640 sectors
redhatlunexpansion.txt:Disk /dev/sdd: 42.9 GB, 42949672960 bytes, 83886080 sectors</code>
redhatlunexpansion.txt:  * Create PV<code>sudo pvcreate /dev/sdd</code>
redhatlunexpansion.txt:  * Check PV<code>sudo pvs</code>
redhatlunexpansion.txt:  * Extend the vg<code>sudo vgextend datavg01 /dev/sdd</code>
redhatlunexpansion.txt:  * Check VG<code>sudo vgs</code>
redhatmpio.txt:  - Install device mapper<code>sudo yum install device-mapper-multipath</code>
redhatmpio.txt:  - Create /etc/Multipath.conf<code>sudo mpathconf --enable --with_multipathd y</code>
redhatmpio.txt:  - Start multipath daemon<code>sudo service multipathd start</code>
redhatmpio.txt:    - Using fdisk<code>sudo fdisk -l | grep mpath</code>
redhatmpio.txt:    - Using multipath<code>sudo multipath -ll</code>
redhatnamechange.txt:  - Login to the new server and backup config files<code>mkdir backups
redhatnamechange.txt:sudo cp /etc/sysconfig/network backups/</code>
redhatnamechange.txt:  - Change the IP address<code>sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0</code>
redhatnamechange.txt:  - Change the hostname<code>sudo vi /etc/sysconfig/network</code>
redhatnamechange.txt:  - Change the hosts file<code>sudo vi /etc/hosts</code>
redhatnamechange.txt:  - From the console, restart the network<code>sudo service network restart</code>OR just reboot<code>sudo init 6</code>
redhatnovicolors.txt:To turn off all colors in the vim editor on LINUX create a .vimrc file in your home directory and enter the following lines<code> vi .vimrc </code> Enter the following lines<code>
redhatnovicolors.txt:set t_Co=0</code>
redhatnvicolors.txt:To turn off all colors in the vim editor on LINUX create a .vimrc file in your home directory and enter the following lines<code> vi .vimrc </code> Enter the following lines<code>
redhatnvicolors.txt:set t_Co=0</code>
redhattimezone.txt:  * Delete the localtime file<code>rm /etc/localtime</code>
redhattimezone.txt:  * Link the correct zone file to /etc/localtime<code>ls /usr/share/zoneinfo/US/
redhattimezone.txt:Alaska  Aleutian  Arizona  Central  Eastern  East-Indiana  Hawaii  Indiana-Starke  Michigan  Mountain  Pacific  Samoa</code>
redhattimezone.txt:  * Set the correct one<code>sudo ln -s /usr/share/zoneinfo/US/Central /etc/localtime</code>
redhatvmhangstodo.txt:    - Login to NIM server and execute these commands<code>export failed_server="<hostname_of_the_server>"
redhatvmhangstodo.txt:sudo scp ${failed_server}:/var/log/messages messages.${failed_server}</code>
redhatvmhangstodo.txt:    - If /var/tmp is writable, run sosreport with ''--batch'' option<code>ssh ${failed_server} "sudo /usr/sbin/sosreport --batch"</code>
redhatvmhangstodo.txt:    - If /var/tmp is not writable, run sosreport with ''--tmpdir'' pointing to a writable directory. e.g.<code>ssh ${failed_server} "sudo /usr/sbin/sosreport --batch --tmp-dir /home/x1kxk630"</code>
redhatvmhangstodo.txt:  - Copy the sosreport to NIM server<code>sudo scp ${failed_server}:/var/tmp/sosreport-*.tar.xz .</code>
redhatvmhangstodo.txt:      - Enable dump<code>ssh ${failed_server} "echo 1 | sudo tee /proc/sys/kernel/sysrq"</code>
redhatvmhangstodo.txt:      - Start dump and reboot<code>ssh ${failed_server} "echo c | sudo tee /proc/sysrq-trigger"</code>
remdskviocluster.txt:  * Make a note of the pvids of the disks that needs to be reclaimed from the VIO guest.<code>lspv | egrep "hdiskX|hdiskY......." > /var/tmp/pvstoremove</code>
remdskviocluster.txt:  * Copy that file to both the VIOS servers<code>sudo scp /var/tmp/pvstoremove taprvioXX:/var/tmp/pvstoremove
remdskviocluster.txt:sudo scp /var/tmp/pvstoremove taprvioYY:/var/tmp/pvstoremove</code>
remdskviocluster.txt:  * Remove the disks from the VIO guest<code>sudo rmdev -dl hdiskX</code>
remdskviocluster.txt:    * Document VIO disks map<code>sudo lsdiskcfg > /var/tmp/ldsiskcfg.out.1234</code>Run this on both the VIO servers.
remdskviocluster.txt:    * Get the pvids to be removed<code>awk '{print $2}' /var/tmp/pvstoremove > /var/tmp/pvstoremove.pvids</code>Run this on both the VIO servers
remdskviocluster.txt:    * Get the list of disks to unmap and remove<code>grep -f /var/tmp/pvstoremove.pvids /var/tmp/ldsiskcfg.out.1234 > /var/tmp/diskstounmapandremove</code>Run this on both the servers and make sure they both match ( devicenames, LUN numbers etc etc)
remdskviocluster.txt:  * Unmap LUNs from both VIO servers<code>for disk in $(awk -F: '{print $1}' /var/tmp/diskstounmapandremove)
remdskviocluster.txt:done</code>Run this on both the servers.
remdskviocluster.txt:      * Remove the powerpath devices<code>>/var/tmp/rmdev.out.1
remdskviocluster.txt:done</code>
remdskviocluster.txt:      * Remove the device files<code>cat /var/tmp/rmdev.out.1 | xargs -n1 sudo rmdev -dl</code>
remoterestartpowervm.txt:  - Commands are here **document them neately later **<code>hscroot@tgprhmc6:~> chsysstate -r lpar -o on -m Server-8284-22A-SN215D22V -n taprvio100
remoterestartpowervm.txt:</code>
removeov.txt:  - Stop the OVO agent<code>/usr/lpp/OV/bin/ovc -kill</code>
removeov.txt:  - Kill ov processes<code>ps -ef | grep -i ov</code>kill if there are any.
removeov.txt:  - Check the version<code>/usr/lpp/OV/bin/opcagt -version</code>
removeov.txt:      - Remove the 11.x agent<code>/usr/lpp/OV/bin/OpC/install/oainstall.sh -remove -agent</code>
removeov.txt:      - Delete these directories<code>rm -rf /usr/lpp/OV /usr/lpp/perf /var/opt/OV /var/opt/perf</code>
removeov.txt:      - Remove the OVO agent<code>/usr/lpp/perf/bin/ovpa.remove</code>
removeov.txt:      - Kill perf processes<code>ps -ef | grep perf</code>
removeov.txt:      - Uninstall the OVO agent<code>/usr/lpp/OV/bin/OpC/install/opc_inst -r</code>
removeov.txt:      - Delete these directories<code>rm -rf /usr/lpp/OV /usr/lpp/perf /var/opt/OV /var/opt/perf</code>
reset-server-in-recovery-mode.txt:<code> rstprofdata -m <system name> -l 3 -f backupFile </code>  if that does not work then ty the following <code>  rstprofdata -m <system name> -l 2 -f backupFile </code> where <system name> is the managed system name.
resolv.conf.txt:  - For systems built at FM Motor Parts<code>
resolv.conf.txt:nameserver      134.238.107.252</code>
restorefromsnapshotspure.txt:  - Login to the admin server<code>ssh pgunap01</code>
restorefromsnapshotspure.txt:    - If doing IT0 refresh<code>export INSTANCE="IT0"
restorefromsnapshotspure.txt:export ORAUID=301</code>
restorefromsnapshotspure.txt:    - If doing FTA refresh<code>export INSTANCE="FTA"
restorefromsnapshotspure.txt:export ORAUID=1082</code>
restorefromsnapshotspure.txt:    - If doing H1D refresh<code>export INSTANCE="H1D"
restorefromsnapshotspure.txt:export ORAUID="3210"</code>
restorefromsnapshotspure.txt:    - If doing H1T refresh<code>export INSTANCE="H1T"
restorefromsnapshotspure.txt:export ORAUID="211"</code>
restorefromsnapshotspure.txt:  - export some additional variables<code>export ADMHOST="pgunap01"
restorefromsnapshotspure.txt:export ORAOWNER="ora$(echo ${INSTANCE} | tr '[A-Z]' '[a-z]')"</code>
restorefromsnapshotspure.txt:  - Get the disk to vg map from source system<code>ssh ${SRCHOST} "sudo /usr/local/scripts/lsvpcfg.sh" > lsvpcfg.out.${SRCHOST}</code>Copy to target system<code>scp lsvpcfg.out.${SRCHOST} ${TESTHOST}:lsvpcfg.out.recovery</code>
restorefromsnapshotspure.txt:  - Create Database group <code>ssh ${TESTHOST} "sudo mkgroup id=201 dba"</code>
restorefromsnapshotspure.txt:  - Create Oracle DB Owner<code>ssh ${TESTHOST} "sudo mkuser id=${ORAUID} pgrp=dba groups=dba home=/oracle/${INSTANCE} shell=/bin/csh gecos=\"SAP Database Administrator\" ${ORAOWNER}"</code>
restorefromsnapshotspure.txt:  - List the available snapshots<code>${SSH2PURE} purepgroup list --snap ${PGRP}</code>The output should be like<code>Name            Source       Created                
restorefromsnapshotspure.txt:IT0DAILYBKP.14  IT0DAILYBKP  2017-12-03 22:00:00 CST</code>
restorefromsnapshotspure.txt:  - Pick the last snapshot to restore to<code>export SNAP="IT0DAILYBKP.20"</code>
restorefromsnapshotspure.txt:  - List snapshot volumes<code>${SSH2PURE} purevol list --snap --pgrouplist ${SNAP}</code>The output should be like<code>IT0DAILYBKP.22.it0dbdata_001  512G  it0dbdata_001  2017-12-11 22:00:00 CST  BBABD90D93D542ED000A8ADA
restorefromsnapshotspure.txt:IT0DAILYBKP.22.tedv2d01_009   34G   tedv2d01_009   2017-12-11 22:00:00 CST  BBABD90D93D542ED000A8AD8</code>
restorefromsnapshotspure.txt:    - Export a start number for volume<code>export vol_no=300</code>
restorefromsnapshotspure.txt:    - Store the snapshot volumes in a variable<code>export snapshots=$(${SSH2PURE} purevol list --snap --pgrouplist ${SNAP} --notitle | grep -v 138G | awk '{print $1}' | tr "\n" " ")</code>
restorefromsnapshotspure.txt:    - Copy the snapshots to volumes<code>target_vols=""
restorefromsnapshotspure.txt:done</code>
restorefromsnapshotspure.txt:    - Preserve the target volumes in a file<code>echo ${target_vols} > ${INSTANCE}.poc.volumes</code>
restorefromsnapshotspure.txt:  - Connect the volumes to TEST host<code>${SSH2PURE} purevol connect --host ${TESTHOST} ${target_vols}</code>
restorefromsnapshotspure.txt:  - Login to the target host<code>ssh ${TESTHOST}</code>
restorefromsnapshotspure.txt:  - Take a snapshot of the existing disks<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.1</code>
restorefromsnapshotspure.txt:  - Discover new devices<code>sudo cfgmgr</code>
restorefromsnapshotspure.txt:  - Take a snapshot of the new disks<code>sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.2</code>
restorefromsnapshotspure.txt:  - Recreate the VGs and change the PVIDs<code>cat lsvpcfg.out.recovery | grep hdisk | grep -v rootvg > diskmap</code>
restorefromsnapshotspure.txt:  - fsck and mount them<code>for VG in $(awk -F: '{print $NF}' diskmap | sort -u )
restorefromsnapshotspure.txt:done</code>
restorefromsnapshotspure.txt:  - Login to admin server ''pgunap01''<code>ssh pgunap01</code>
restorefromsnapshotspure.txt:  - Remove fs, vg and devices from the target host.<code>ssh ${TESTHOST}</code><code>for VG in $(lsvg | grep -v rootvg | sort -r )
restorefromsnapshotspure.txt:done</code>
restorefromsnapshotspure.txt:  - Disconnect from target host<code>exit</code>
restorefromsnapshotspure.txt:  - Disconnect the volumes<code>${SSH2PURE} purevol disconnect --host ${TESTHOST} $(cat ${INSTANCE}.poc.volumes ) 
restorefromsnapshotspure.txt:${SSH2PURE} purevol destroy $(cat ${INSTANCE}.poc.volumes )</code>
rhel6to7upgrade.txt:  - Remove all the existing repositories except local.repo<code>sudo rm /etc/yum.repos.d/cobbler-config.repo
rhel6to7upgrade.txt:sudo rm /etc/yum.repos.d/redhat.repo</code>
rhel6to7upgrade.txt:  - Install RHEL 6.8's local.repo<code>sudo vi /etc/yum.repos.d/local.repo</code>Add this <code>[local-rhel-6.8-x86_64]
rhel6to7upgrade.txt:proxy=_none_</code>
rhel6to7upgrade.txt:  - Clean and perform the update<code>sudo yum clean all
rhel6to7upgrade.txt:sudo yum update -y</code>
rhel6to7upgrade.txt:  - Reboot<code>sudo init 6</code>
rhel6to7upgrade.txt:    - Enlarge the "/" filesystem to accommodate contents of ''/usr'' filesystem<code>sudo lvextend -L 7G /dev/sysvg/root
rhel6to7upgrade.txt:sudo resize2fs /dev/sysvg/root</code>Shutdown the server<code>sudo init 0</code>
rhel6to7upgrade.txt:    - Once the system is down, Login to vSphere.<code>Select the VM 
rhel6to7upgrade.txt:                      --> At the boot menu, choose "CDROM"</code>
rhel6to7upgrade.txt:    - Boot through the DVD<code>Select 'Rescue Installed System' --> 
rhel6to7upgrade.txt:      --> Get to the prompt</code>
rhel6to7upgrade.txt:    - Copy /usr filesystem to "/" filesystem<code>rsync -avv /mnt/sysimage/usr/ /mnt/sysimage/usrnew/</code>
rhel6to7upgrade.txt:    - Unmount and rename /usr filesystem<code>cp /mnt/sysimage/etc/fstab /mnt/sysimage/etc/fstab.backup</code>Edit fstab<code>vi /mnt/sysimage/etc/fstab</code>Remove the line that starts with ''/dev/mapper/sysvg-usr''
rhel6to7upgrade.txt:    - Unmount /usr filesystem<code>umount /mnt/sysimage/usr</code>
rhel6to7upgrade.txt:    - Remove the directory<code>rmdir /mnt/sysimage/usr</code>
rhel6to7upgrade.txt:    - Rename "usrnew" directory to "usr"<code>mv -f /mnt/sysimage/usrnew /mnt/sysimage/usr</code>
rhel6to7upgrade.txt:    - Reboot<code>reboot</code>
rhel6to7upgrade.txt:  - Remove all existing repositories<code>sudo rm /etc/yum.repos.d/*.repo</code>
rhel6to7upgrade.txt:  - Enable the RHEL6, extras and optional repositories to perform pre-upgrade tasks<code>sudo vi /etc/yum.repos.d/rhel-6-7-upgrade.repo</code>Add these<code>
rhel6to7upgrade.txt:proxy=_none_</code>
rhel6to7upgrade.txt:  - Re-create yum local cache and cleanup<code>sudo yum clean all</code>
rhel6to7upgrade.txt:  - Install the pre-upgrade packages.<code>sudo yum -y install preupgrade-assistant preupgrade-assistant-ui preupgrade-assistant-el6toel7</code>
rhel6to7upgrade.txt:  - Run preupg command<code>sudo preupg</code>Answer "y" to this question<code>Preupg tool doesn't do the actual upgrade.
rhel6to7upgrade.txt:Do you want to continue? y/n</code>
rhel6to7upgrade.txt:  - Install the upgrade tool<code>sudo yum install redhat-upgrade-tool</code>
rhel6to7upgrade.txt:  - Import the Redhat GPG key<code>sudo rpm --import http://<buildserver>/sources/rhel-6.8-x86_64/RPM-GPG-KEY-redhat-release</code>
rhel6to7upgrade.txt:  - Run the upgrade tool<code>sudo redhat-upgrade-tool --network <the-latest-rhel-7-version> --instrepo ftp://ftp.example.com/pub/rhel7/</code>E.g.<code>sudo redhat-upgrade-tool --network 7.2 --instrepo http://pablsv02/sources/rhel-7.2-x86_64</code>
rhel6to7upgrade.txt:  - Wait until this screen comes<code>Finished. Reboot to start upgrade.</code>Then reboot<code>sudo init 6</code>
rhel6to7upgrade.txt:  - Once the server is up remove the repository<code>sudo rm /etc/yum.repos.d*.repo</code>
rhel6to7upgrade.txt:  - Enable the RHEL7 Repository<code>sudo vi local.repo</code><code>[local-rhel-7.2-x86_64]
rhel6to7upgrade.txt:proxy=_none_</code> 
rhel6to7upgrade.txt:  - On RHEL7<code>sudo yum install -y open-vm-tools</code>
rhel6to7upgrade.txt:  - Disable iptables<code>sudo systemctl disable iptables</code>
rhel6to7upgrade.txt:  - If the server has HTTPD, enable HTTPD service in systemd<code>sudo systemctl enable httpd</code>
rhel6to7upgrade.txt:    - Enable it<code>sudo systemctl enable snmpd</code>
rhel6to7upgrade.txt:    - Enable it<code>sudo systemctl enable xinetd</code>
rhel6to7upgrade.txt:  - Perform a reboot<code>sudo init 6</code>
rhel6upgrade.txt:  - Modify the local.repo file with the latest repository. First make a copy<code>sudo cp /etc/yum.repos.d/local.repo local.repo</code><code>sudo vi /etc/yum.repos.d/local.repo</code>Remove everything except the following depending on the OS and type.
rhel6upgrade.txt:    - RHEL6 64 bit<code>[local-rhel-6.6-x86_64]
rhel6upgrade.txt:gpgcheck=0</code>
rhel6upgrade.txt:    - RHEL6 32 bit<code>[local-rhel-6.5-i386]
rhel6upgrade.txt:gpgcheck=0</code>
rhel6upgrade.txt:  - Install the updates / patches.<code>sudo yum clean all
rhel6upgrade.txt:sudo yum update</code>
rhel6upgrade.txt:  - Reboot the server<code>sudo init 6</code>
rhel7tips.txt:  - init no longer exists. It has been replaced with systemd. Process looks like<code>root         1     0  0 12:03 ?        00:00:01 /usr/lib/systemd/systemd --switched-root --system --deserialize 21</code>
rhel7tips.txt:  - Services are controlled using ''systemd.service''. This means ''chkconfig'' ''service'' commands are being depreciated<code>sudo systemctl start httpd</code>
rhel7upgrade04122017.txt:  - Modify the local.repo file with the latest repository. First make a copy<code>sudo cp /etc/yum.repos.d/local.repo local.repo</code>Add this<code>cat << EOF | sudo tee /etc/yum.repos.d/local.repo
rhel7upgrade04122017.txt:EOF</code>
rhel7upgrade04122017.txt:  - On SAP App servers modify the sap.repo with the latest repository.First make a copy<code>sudo cp /etc/yum.repos.d/sap.repo sap.repo</code>Add this<code>cat << EOF | sudo tee /etc/yum.repos.d/sap.repo
rhel7upgrade04122017.txt:EOF</code>
rhel7upgrade04122017.txt:  - Install the updates / patches.<code>sudo yum clean all
rhel7upgrade04122017.txt:sudo yum update</code>
rhel7upgrade04122017.txt:  - Reboot the server<code>sudo init 6</code>
rhelcobbler.txt:  * Request wintel team to create a VM called pablsv02 with the following specifications<code>Processor  : 1 Virtual CPU
rhelcobbler.txt:Storage    : 1 * 70G (Boot), 1 * 100GB (Data)</code>
rhelcobbler.txt:  * Please create /var/www filesystem of size 50Gig<code>sudo pvcreate /dev/sdb
rhelcobbler.txt:sudo mount /var/www</code>
rhelcobbler.txt:    * Copy the iso to the build server<code>sudo scp rhel-server-6.8-x86_64-dvd.iso pablsv01:/var/tmp/</code>
rhelcobbler.txt:    * Loopback mount the iso file on build server<code>sudo mount /var/tmp/rhel-server-6.8-x86_64-dvd.iso /cdrom -t iso9660 -o loop</code>
rhelcobbler.txt:    * rsync the contents to the sources directory<code>sudo mkdir -p /var/www/html/sources/rhel-6.8-x86_64</code><code>sudo rsync -a /cdrom/ /var/www/html/sources/rhel-6.8-x86_64/</code>
rhelcobbler.txt:    * Create a repository<code>sudo createrepo /var/www/html/sources/rhel-6.8-x86_64</code>
rhelcobbler.txt:    * Import the repository to Cobbler. 64 bit<code>sudo cobbler import --path=/cdrom --name=rhel-6.8-x86_64 --arch=x86_64</code>
rhelcobbler.txt:    * Associate the kickstart file to the profile<code>sudo cobbler profile edit --name rhel-6.8-x86_64 --kickstart=/var/lib/cobbler/kickstarts/tenneco.rhel-6.8.ks</code>
rhelcobbler.txt:    * Modify the local.repo file with the latest repository. First make a copy<code>sudo cp /etc/yum.repos.d/local.repo local.repo</code><code>sudo vi /etc/yum.repos.d/local.repo</code>Remove everything except the following depending on the OS and type.<code>
rhelcobbler.txt:gpgcheck=0</code><code>sudo yum clean all</code><code>sudo yum update</code><code>sudo init 6</code>
rhelcobbler.txt:  * Install createrepo<code>sudo yum install createrepo</code>
rhelcobbler.txt:  * Install http<code>sudo yum install httpd</code><code>sudo service httpd start</code>
rhelcobbler.txt:  * Enable proxy for YUM<code>sudo cp /etc/yum.conf /etc/yum.conf.10042016</code><code>sudo vi /etc/yum.conf</code>Do the entry in the last line of the file<code>proxy=http://170.64.0.72:8080
rhelcobbler.txt:proxy_password=*****</code>
rhelcobbler.txt:  * Export proxy<code>export https_proxy=http://username:password@170.64.0.72:8080/</code>
rhelcobbler.txt:  * Enable epel repositroy<code>sudo rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</code>
rhelcobbler.txt:  * Disable proxy for local repositories. Add this<code>sudo vi /etc/yum.repos.d/local.repo</code><code>proxy=_none_</code>at the end of ''local-rhel-6.8-x86_64'' repository. In the end it would look like this<code>[local-rhel-6.8-x86_64]
rhelcobbler.txt:proxy=_none_</code>
rhelcobbler.txt:  * Install Cobbler<code>sudo yum install cobbler</code>
rhelcobbler.txt:  * Perform cobbler check<code>sudo cobbler check</code>It will show <code>The following are potential configuration items that you may want to fix:
rhelcobbler.txt:Restart cobblerd and then run 'cobbler sync' to apply changes.</code>Resolve the errors it shows in the above points.
rhelcobbler.txt:  * Make a backup and modify the servername parameter in ''/etc/cobbler/settings''<code>sudo cp /etc/cobbler/settings /etc/cobbler/settings.09232016.vn</code>Edit the file /etc/cobbler/settings<code>sudo vi /etc/cobbler/settings</code>search for the line which looks something like this server = 127.0.0.1 and replace it with the server name like it shown here<code>server = pablsv02</code>
rhelcobbler.txt:  * Restart and sync cobbler<code>sudo service cobblerd restart</code>Resync<code>sudo cobbler sync</code>
rhelcobbler.txt:  * Copy the iso to the build server<code>cd /var/tmp/
rhelcobbler.txt:wget http://unixisos/redhat/cds/rhel-server-6.8-x86_64-dvd.iso</code>
rhelcobbler.txt:  * Loopback mount the iso file on build server<code>sudo mount /var/tmp/rhel-server-6.8-x86_64-dvd.iso /cdrom -t iso9660 -o loop</code>
rhelcobbler.txt:  * Copy the contents to the sources directory<code>sudo mkdir -p /var/www/html/sources/rhel-6.8-x86_64</code><code>sudo rsync -a /cdrom/ /var/www/html/sources/rhel-6.8-x86_64/</code>
rhelcobbler.txt:  * Create a RHEL6.8 repository<code>sudo createrepo /var/www/html/sources/rhel-6.8-x86_64</code>
rhelcobbler.txt:  * Import RHEL6.8 distribution to cobbler<code>sudo cobbler import --path=/cdrom --name=rhel-6.8-x86_64 --arch=x86_64</code>
rhelcobbler.txt:  * Cleanup the files<code>sudo umount /cdrom
rhelcobbler.txt:rm /var/tmp/rhel-server-6.8-x86_64-dvd.iso</code>
rhelcobbler.txt:  * Copy the kickstart file from the old build server<code>sudo scp pablsv01:/var/lib/cobbler/kickstarts/tenneco.rhel-6.8.ks /var/lib/cobbler/kickstarts/tenneco.rhel-6.8.ks</code>
rhelcobbler.txt:  * Associate kickstart to the RHEL6.8 profile<code>sudo cobbler profile edit --name rhel-6.8-x86_64 --kickstart=/var/lib/cobbler/kickstarts/tenneco.rhel-6.8.ks</code>
rhelcobbler.txt:  * Point pablsv02 to its own YUM repository and disable proxy<code>sudo vi /etc/yum.repos.d/local.repo</code>Replace the file with this<code>[local-rhel-6.8-x86_64]
rhelcobbler.txt:proxy=_none_</code>
rhelcobbler.txt:  * Copy the iso to the build server<code>cd /var/tmp
rhelcobbler.txt:wget http://unixisos/redhat/cds/rhel-server-7.2-x86_64-dvd.iso</code>
rhelcobbler.txt:  * Loopback mount the iso file on build server<code>sudo mkdir -p /cdrom</code><code>sudo mount /var/tmp/rhel-server-7.2-x86_64-dvd.iso /cdrom -t iso9660 -o loop</code>
rhelcobbler.txt:  * Copy the contents to the sources directory<code>sudo mkdir -p /var/www/html/sources/rhel-7.2-x86_64</code><code>sudo rsync -a /cdrom/ /var/www/html/sources/rhel-7.2-x86_64/</code>
rhelcobbler.txt:  * Create a RHEL7.2 repository<code>sudo createrepo /var/www/html/sources/rhel-7.2-x86_64</code>
rhelcobbler.txt:  * Import RHEL7.2 distribution to cobbler<code>sudo cobbler import --path=/cdrom --name=rhel-7.2-x86_64 --arch=x86_64</code>
rhelcobbler.txt:  * Cleanup the files<code>sudo umount /cdrom
rhelcobbler.txt:rm /var/tmp/rhel-server-7.2-x86_64-dvd.iso</code>
rhelcobbler.txt:  * Create RHEL7 kickstart file<code>sudo vi /var/lib/cobbler/kickstarts/tenneco.rhel-7.ks</code>
rhelcobbler.txt:  * Associate kickstart to the RHEL7.2 profile.<code>sudo cobbler profile edit --name rhel-7.2-x86_64 --kickstart=/var/lib/cobbler/kickstarts/tenneco.rhel-7.ks</code>
rhelcobbler.txt:  * RHEL-6.8 -- Install a test server using the following profile<code>rhel-6.8-x86_64</code>
rhelcobbler.txt:  * RHEL-7.2 -- Install a test server using the following profile<code>rhel-7.2-x86_64</code>
rhelepelenable.txt:  - Enable locally hosted EPEL 7 repository<code>sudo vi /etc/yum.repos.d/localepel.repo</code>Add this<code>[local-epel7]
rhelepelenable.txt:proxy=_none_</code>
rhelepelenable.txt:  - Downloading EPEL repository. Document this <code>x1kxk630 on pablsv02:/home/x1kxk630 $ sudo reposync -p /var/www/html/sources/05-18-2018/epel7 -r epel -l
rhelepelenable.txt:Sqlite DBs complete</code>
rhelpatching-032018.txt:  - Set the build server as a variable<code>export server=pcdcunxlxap01</code>
rhelpatching-032018.txt:    - First make a copy<code>sudo cp /etc/yum.repos.d/local.repo local.repo</code>
rhelpatching-032018.txt:    - **For all RHEL7 systems and SAP App servers -- This will take release level to RHEL 7.4.** Add this<code>cat << EOF | sudo tee /etc/yum.repos.d/local.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:    - **RHEL 7.2 updates for SAP HANA Database servers**<code>cat << EOF | sudo tee /etc/yum.repos.d/local.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:    - **RHEL6 updates -- All RHEL6 systems. This will take the system to RHEL 6.9**<code>cat << EOF | sudo tee /etc/yum.repos.d/local.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:  - Add the standard DRiV packages<code>cat << EOF | sudo tee -a /etc/yum.repos.d/local.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:  - **On SAP App servers modify the sap.repo with the latest repository.**First make a copy<code>sudo cp /etc/yum.repos.d/sap.repo sap.repo</code>Add this<code>cat << EOF | sudo tee /etc/yum.repos.d/sap.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:  - **On SAP HANA servers modify the saphana.repo with the latest repository.** First make a copy<code>sudo cp /etc/yum.repos.d/saphana.repo saphana.repo</code>Add this<code>cat << EOF | sudo tee /etc/yum.repos.d/saphana.repo
rhelpatching-032018.txt:EOF</code>
rhelpatching-032018.txt:  - Install the updates / patches.<code>sudo yum clean all
rhelpatching-032018.txt:sudo yum update</code>
rhelpatching-032018.txt:  - Reboot the server<code>sudo init 6</code>
rhelpatching-032018.txt:  - Login to the server and verify the patches have been installed.<code>cat /etc/redhat-release</code>Expected output<code>Red Hat Enterprise Linux Server release 7.4 (Maipo)</code>
rsync_-_how_to_rsync_something_as_root_yet_send_the_data_through_your_own_ssh_pipe.txt:  - **After much googling and brain picking multiple people here, we got this method that works.**<code>rsync --delete -a ${wikihome}/ --rsync-path="sudo rsync" ${drhost}:${wikihome}/</code>
samplekickstartfile.txt:<code># Kickstart file automatically generated by anaconda.
samplekickstartfile.txt:python-dmidecode
samplekickstartfile.txt:</code>
sap-personas-failover.txt:  * Logon to peerap01.  Su to root as that is where the file containing the scripts to the fasilure is located <code> sudo su - </code>
sap-personas-failover.txt:  * Change Directory to the "clustter" directory <code> cd cluster</code>
sap-personas-failover.txt:  * Run the following script to remove the Floating IP Address from peerap01 <code> unalias-sapwebdspch01.sh </code>
sap-personas-failover.txt:  * su to root <code> sudu su - </code>
sap-personas-failover.txt:  * Change Directory to the "clustter" directory <code> cd cluster</code>
sap-personas-failover.txt:  * Run the following command to add the Floating IP Addres to the server <code> alias-sapwebdspch04.sh </code>
sap-personas-failover.txt:  * Logon to peerap04.  Su to root as that is where the file containing ththe scripts to the fasilure is located <code> sudo su - </code>
sap-personas-failover.txt:  * Change Directory to the "clustter" directory <code> cd cluster</code>
sap-personas-failover.txt:  * Run the following script to remove the Floating IP Address from peerap04 <code> unalias-sapwebdspch04.sh </code>
sap-personas-failover.txt:  * su to root <code> sudu su - </code>
sap-personas-failover.txt:  * Change Directory to the "clustter" directory <code> cd cluster</code>
sap-personas-failover.txt:  * Run the following command to add the Floating IP Addres to the server <code> alias-sapwebdspch01.sh </code>
sap-rhel7-poc-configuration.txt:  - Rename /etc/resolv.conf as whatever changes made in the file should be removed<code>sudo mv /etc/resolv.conf /etc/resolv.conf.old</code>
sap-rhel7-poc-configuration.txt:  - Add /etc/hosts from xaerdb03 and include pablsv02s IP in /etc/hosts<code>sudo vi /etc/hosts</code>Add these lines to the file<code>10.0.48.54      xaerdb03.amer.int.tenneco.com   xaerdb03
sap-rhel7-poc-configuration.txt:10.32.6.112     pablsv02.amer.int.tenneco.com pablsv02</code>
sap_webdispatcher_java.txt: - Mount the /prod/images/Java/Java14_64 from pgnmsv01 to the server <code> sudo mkdir -p /mnt/java ; sudo mount pgnmsv01:/prod/images/Java/Java14_64 /mnt/java </code>
sap_webdispatcher_java.txt: - Change Directory to /mnt/java <code> sudo cd /mnt/java </code> Invoke smitty </code> sudo smitty install_all </code>Then select "."
sap_webdispatcher_java.txt:        * SOFTWARE INSTALL - Press F4 and select the following <code> Java14_64.license ALL </code> and <code> Java14_64.sdk   ALL </code>
sap_webdispatcher_java.txt: -  After installation completes update the .profile in root with the following entry <code> sudo mv .profile .profile-OLD </code> <code> sudo vi .profile </code> and add the following to the PATH vaitrable <code> :/usr/java14_64/jre/bin </code>
sap_webdispatcher_java.txt: -  Here is the environment documentation shoud the Basis Team question the java Version.  Note thsy have seversl environment vaitables set within their user SAP profiles that will result in slightly different that standatrd expectred output.  These environment variables are dcumented below. <code> setenv PATH JAVA_HOME </code> <code>setenv JAVA_HOME /usr/java14_64/jre </code> <code> setenv IBM_JAVA_OPTIONS '-Xmx256M -Xj9' </code> If they have any questins please ask them to consult their documentation and set the appriporate environment vairables. 
seafailover-manual.txt:  * To failover a SEA interface, login to the VIOS server whose SEA is primary at this time and designate it's role to standby<code>sudo chdev -l entX -a ha_mode=standby</code>entX is the SEA adapter name
seafailover-manual.txt:  * To failback, <code>sudo chdev -l entX -a ha_mode=auto</code>
seafailover-manual.txt:  * To check<code>sudo entstat -d ent6 | grep -e "  Priority" -e "Virtual Adapter" -e "  State:" -e "High Availability Mode"</code>
security-rapid7.txt:  - Create the splunk filesystem<code>sudo pvcreate -f /dev/sdb
security-rapid7.txt:sudo mount /opt/rapid7</code>
security-rapid7.txt:  - Create security accounts, groups for service and team members<code>sudo groupadd -g 6786 hg_dm
security-rapid7.txt:sudo useradd -g secteam -d /home/ses8739                   -c "Steven E Satkiewicz" -m -u 6145 ses8739</code>
security-rapid7.txt:  - Set an initial password for security team<code>for user in nxpgsql nexpose jhahn kevimitc abdumush hg_dm ses8739
security-rapid7.txt:done</code>
security-splunk.txt:  - Create the splunk filesystem<code>sudo pvcreate -f /dev/sdb
security-splunk.txt:sudo mount /opt/splunk</code>
security-splunk.txt:  - Create security accounts, groups for service and team members<code>sudo groupadd -g 6786 hg_dm
security-splunk.txt:sudo useradd -g secteam -d /home/ses8739  -c "Steven E Satkiewicz" -m -u 6145 ses8739</code>
security-splunk.txt:  - Set an initial password for security team<code>for user in splunk jhahn kevimitc abdumush hg_dm ses8739
security-splunk.txt:done</code>
security-splunk.txt:  - Disable Transparent hugepages<code>sudo vi /etc/default/grub</code>Add this to the end of the line that starts with ''GRUB_CMDLINE_LINUX ''<code>transparent_hugepage=never</code>
security-splunk.txt:    - Or use this short cut<code>sudo ex -sc "/GRUB_CMDLINE_LINUX/s/\"$/ transparent_hugepage=never\"/|x" /etc/default/grub</code>
security-splunk.txt:  - Rebuild the grub.cfg file<code>sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code>
security-splunk.txt:  - Update limits for splunk user<code>cat << EOF | sudo tee -a /etc/security/limits.conf
security-splunk.txt:EOF</code>
security-splunk.txt:  - Install EPEL repositories<code>cat << EOF | sudo tee -a /etc/yum.repos.d/epel-rhel7.repo
security-splunk.txt:EOF</code>
security-splunk.txt:  - Install Splunk repositories<code>cat << EOF | sudo tee -a /etc/yum.repos.d/splunk.repo
security-splunk.txt:EOF</code>
security-splunk.txt:  - Install splunk and syslog-ng packages<code>sudo yum clean all
security-splunk.txt:sudo yum install splunk syslog-ng</code>
servermigration.txt:  - Get on to the console. Login to pgnmsv01<code>getconsole <servername></code>
servermigration.txt:  - Get a list of running processes<code>ps -ef > /root/psef.$(date +%m%d%y)</code>
servermigration.txt:  - Get a list of mounted filesystems<code>df -k > /root/mountedfs.$(date +%m%d%y)</code>
servermigration.txt:  - Get a list of disks and vgs pagingspace etc<code>lsvg > /root/lsvg.$(date +%m%d%y)
servermigration.txt:lsps -a > /root/lsps.$(date +%m%d%y)</code>
servermigration.txt:  - Check the bootlist against the last booted device<code>bootlist -o -m normal > /root/bootlist.$(date +%m%d%y)
servermigration.txt:bootinfo -b > /root/bootinfob.$(date +%m%d%y)</code>
servermigration.txt:  - Copy the files to pgnmsv01<code>ssh pgnmsv01 mkdir /var/tmp/tspr1d01
servermigration.txt:scp /root/*.$(date +%m%d%y) pgnmsv01:/var/tmp/tspr1d01</code>
servermigration.txt:  - Disable all NFS mounts and NFS exports<code>vi /etc/filesystems
servermigration.txt:mv /etc/exports /etc/exports.OLD</code>
servermigration.txt:  - List of disks to be migrated<code>0000aaca591d50df        altinst_rootvg
servermigration.txt:0000aacae23b3df1        datavg01</code>Saved this file as /var/tmp/sourcedisks.tgpretl1 on taprvio40 and taprvio41
servermigration.txt:  - Make a note of the IP addresses<code>en4    10.32.6.128
servermigration.txt:en5    10.32.51.128</code>
servermigration.txt:    - Check first<code>lsdiskcfg | egrep "hdisk4|hdisk5|hdisk6|hdisk7|hdisk9|hdisk10|hdisk19|hdisk20|hdisk27|hdisk29|hdisk33"</code>   
servermigration.txt:    - Unmap the disks from taprvio3<code>for disk in hdisk4 hdisk5 hdisk6 hdisk7 hdisk9 hdisk10 hdisk19 hdisk20 hdisk27 hdisk29 hdisk33
servermigration.txt:done</code>
servermigration.txt:  - Remove the disks from taprvio3<code>echo "hdisk4 hdisk5 hdisk6 hdisk7 hdisk9 hdisk10 hdisk19 hdisk20 hdisk27 hdisk29 hdisk33" | xargs -n1 rmdev -dl</code>
servermigration.txt:    - Configure devices<code>cfgmgr
servermigration.txt:lspv | grep -wf /var/tmp/sourcedisks.tgpretl1.pvid > /var/tmp/viodisks.tgpretl1</code>
servermigration.txt:    - Make sure these disks are not in use(Impossible but still )<code>awk '{print $1}' /var/tmp/viodisks.tgpretl1 > /var/tmp/viodisks.tgpretl1.pvs
servermigration.txt:lsdiskcfg | grep -f /var/tmp/viodisks.tgpretl1.pvs</code>
servermigration.txt:    - Check if the devices are readable<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs)
servermigration.txt:done</code>
servermigration.txt:    - Turn off reserve lock<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs)
servermigration.txt:done</code>
servermigration.txt:    - Configure devices<code>cfgmgr
servermigration.txt:lspv | grep -wf /var/tmp/sourcedisks.tgpretl1.pvid > /var/tmp/viodisks.tgpretl1</code>
servermigration.txt:    - Make sure these disks are not in use(Impossible but still )<code>awk '{print $1}' /var/tmp/viodisks.tgpretl1 > /var/tmp/viodisks.tgpretl1.pvs
servermigration.txt:lsdiskcfg | grep -f /var/tmp/viodisks.tgpretl1.pvs</code>
servermigration.txt:    - Check if the devices are readable<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs)
servermigration.txt:done</code>
servermigration.txt:    - Turn off reserve lock<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs)
servermigration.txt:done</code>
servermigration.txt:  - On taprvio40, Map the devices<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs )
servermigration.txt:done</code>
servermigration.txt:  - On taprvio41, Map the devices<code>for dev in $(cat /var/tmp/viodisks.tgpretl1.pvs )
servermigration.txt:done</code>
servermigration.txt:  - Boot tgpretl1<code>ssh hscroot@taitc051
servermigration.txt:chsysstate -r lpar -o on -b sms -m MES-Dev-QA-8205-E6B-SN1048EEP -n tgpretl1 -f tgpretl1</code>
servermigration.txt:  - At the console make sure we booted from the correct disk<code>lspv | grep rootvg</code>
servermigration.txt:    - Down detach all the interfaces<code>ifconfig $(ifconfig -a | grep : | grep -v lo0 |grep RUNNING | awk '{print $1}' | sed "s;:;;g") down detach</code>
servermigration.txt:    - Remove all network device files<code>for dev in $(lsdev -Ccif | grep ^en | awk '{print $1}' | sed "s;en;;g")
servermigration.txt:done</code>
servermigration.txt:    - Run cfgmgr<code>cfgmgr</code>
servermigration.txt:    - Create etherchannel is required for both the front end and backup adapters<code>mkdev -c adapter -s pseudo -t ibm_ech -a adapter_names='ent0'  -a backup_adapter='ent1'  -a netaddr='10.32.50.1'  -a num_retries='2' -a retry_time='2'</code>
servermigration.txt:    - Run cfgmgr<code>cfgmgr</code>
servermigration.txt:    - Configure the front end IP<code>/usr/sbin/mktcpip -h'peerap09' -a'10.32.50.x' -m'255.255.255.0' -i'en3' -n'10.32.8.53' -d'eu.ten' -g'10.32.50.1' -A'no' -t'N/A' -s''</code>
servermigration.txt:    - Configure the backup network<code>chdev -l en2 -a netaddr=10.32.51.x -a netmask=255.255.255.0 -a state=up</code>
servermigration.txt:    - Enable all NFS mounts and NFS exports<code>cp /etc/filesystems.OLD /etc/filesystems
servermigration.txt:mv /etc/exports.OLD /etc/exports</code>
servermigration.txt:  - Update the console database. On pgnmsv01<code>vi /prod/images/etc/unix_sys_console</code>
servermigration.txt:    - If the server has moved from booting internal disks to virtual disks, Install this script<code>59 21 * * 4 /usr/local/scripts/cr_altdisk-nopower.sh 1>/dev/null 2>&1</code>
servermigration.txt:    - Make a note of the pvid of alt_rootvg disk and remove the hdisks that belonged to alt_rootvg<code>alt_root_disk=$(lspv | grep alt_rootvg | awk '{print $2}' | sort -u)
servermigration.txt:lspv | grep alt_rootvg | awk '{print $1}' | xargs -n1 rmdev -dl</code>
servermigration.txt:    - Remove the alt_rootvg<code>alt_disk_install -X alt_rootvg</code>
servermigration.txt:    - Run cfgmgr<code>cfgmgr</code>
servermigration.txt:    - Create a alt_rootvg<code>alt_disk_copy -d $(lspv | grep ${alt_root_disk} | awk '{print $1}' )</code>
servermigration.txt:    - Reboot the server<code>shutdown -Fr</code>
servermigration.txt:    - Make a note of the pvid of old_rootvg disk and remove the hdisks that belonged to it<code>old_root_disk=$(lspv | grep old_rootvg | awk '{print $2}' | sort -u)
servermigration.txt:lspv | grep old_rootvg | awk '{print $1}' | xargs -n1 rmdev -dl</code>
servermigration.txt:    - Remove the old_rootvg<code>alt_disk_install -X old_rootvg</code>
servermigration.txt:    - Run cfgmgr<code>cfgmgr</code>
servermigration.txt:    - Create a alt_rootvg<code>alt_disk_copy -d $(lspv | grep ${old_root_disk} | awk '{print $1}' )</code>
serverrenamingprocess.txt:    - xagi3p01 - IPs<code>en2 - 10.0.49.57
serverrenamingprocess.txt:en3 - 10.0.48.58</code>
serverrenamingprocess.txt:    - dagi3p01 - IPs<code>en2 - 10.0.49.28
serverrenamingprocess.txt:en3 - 10.0.48.191</code>
serverrenamingprocess.txt:  - Backed up the hosts file on both the systems<code>/etc/hosts.Original.10082012</code>
serverrenamingprocess.txt:  - When ready unmount /taedi filesystem on qaap3p01<code>ssh qaap3p01 umount /taedi</code>
serverrenamingprocess.txt:    - xagi3p01<code>getconsole xagi3p01</code>
serverrenamingprocess.txt:    - dagi3p01<code>getconsole dagi3p01</code>
serverrenamingprocess.txt:      - Unexport filesystem from dagi3p01<code>cp /etc/exports /etc/exports.10082012
serverrenamingprocess.txt:rmnfsexp -d /taedi</code>
serverrenamingprocess.txt:  - Unmount all filesystems from dagi3p01<code>df -k | grep : | awk '{print $NF}' | xargs -n1 umount</code>
serverrenamingprocess.txt:  - Unmount all filesystems from xagi3p01<code>df -k | grep : | awk '{print $NF}' | xargs -n1 umount</code>
serverrenamingprocess.txt:  - Backup host ssh keys to pgnmsv01 from dagi3p01<code>tar cf /var/tmp/dagi3p01.ssh.keys.tar /etc/ssh/ssh_host*
serverrenamingprocess.txt:scp /var/tmp/dagi3p01.ssh.keys.tar xagi3p01:/var/tmp/</code>
serverrenamingprocess.txt:  - Backup host ssh keys to pgnmsv01 from xagi3p01<code>tar cf /var/tmp/xagi3p01.ssh.keys.tar /etc/ssh/ssh_host*
serverrenamingprocess.txt:scp /var/tmp/xagi3p01.ssh.keys.tar dagi3p01:/var/tmp/</code>
serverrenamingprocess.txt:  - From the console deconfigure network on dagi3p01<code>ifconfig en2 down detach
serverrenamingprocess.txt:ifconfig en3 down detach</code>
serverrenamingprocess.txt:  - From the console deconfigure network on xagi3p01<code>ifconfig en2 down detach
serverrenamingprocess.txt:ifconfig en3 down detach</code>
serverrenamingprocess.txt:  - From the console change identity of dagi3p01<code>/usr/sbin/mktcpip -h'xagi3p01' -a'10.0.48.58' -m'255.255.255.0' -i'en3' -n'10.32.8.53' -d'amer.int.tenneco.com' -g'10.0.48.1' -A'no' -t'N/A' -s''
serverrenamingprocess.txt:chdev -l en2 -a netaddr=10.0.49.57 -a netmask=255.255.255.0 -a state=up</code>
serverrenamingprocess.txt:  - From the console change identity of xagi3p01<code>/usr/sbin/mktcpip -h'dagi3p01' -a'10.0.48.191' -m'255.255.255.0' -i'en3' -n'10.32.8.53' -d'amer.int.tenneco.com' -g'10.0.48.1' -A'no' -t'N/A' -s''
serverrenamingprocess.txt:chdev -l en2 -a netaddr=10.0.49.28 -a netmask=255.255.255.0 -a state=up</code>
serverrenamingprocess.txt:  - Inspect /etc/hosts on both the systems and make sure that the hosts file has entries like this.<code>egrep "dagi3p01|xagi3p01" /etc/hosts
serverrenamingprocess.txt:10.0.48.58      xagi3p01.amer.int.tenneco.com  xagi3p01</code>
serverrenamingprocess.txt:  - Reboot both the systems<code>shutdown -Fr</code>
serverrenamingprocess.txt:  - Restore SSH keys on dagi3p01<code>tar xf /var/tmp/dagi3p01.ssh.keys.tar</code>
serverrenamingprocess.txt:  - Restore SSH keys on xagi3p01<code>tar xf /var/tmp/xagi3p01.ssh.keys.tar</code>
serverrenamingprocess.txt:  - NFS mount the filesystem on qaap3p01<code>ssh qaap3p01 mount /taedi</code>
serverrenamingprocess.txt:  - On pgnmsv01, update console database<code>sudo vi /prod/images/unix_sys_console</code>
setup-iocp-for-oracle.txt:  - Check the filesets are installed or not<code>lslpp -l bos.iocp.rte</code>The output should look like this<code>    Fileset                     Level     State       Description
setup-iocp-for-oracle.txt:      bos.iocp.rte              5.3.0.50  COMMITTED   I/O Completion Ports API</code>
setup-iocp-for-oracle.txt:  - Check the status of IOCP device<code>lsdev -Cc iocp</code>
setup-iocp-for-oracle.txt:    - If the device is configured, you should see something like this<code>iocp0          Available  I/O Completion Ports</code>
setup-iocp-for-oracle.txt:    - If the device is NOT configured, you should see something like this<code>iocp0          Defined               I/O Completion Ports</code>
setup-iocp-for-oracle.txt:  - If the IOCP port status is **Defined**, change the status to Available. Log in to the server and issue the following command:<code>sudo chdev -l iocp0 -a autoconfig=available</code>Make it available<code>sudo mkdev -l iocp0</code>
setup-iocp-for-oracle.txt:  - Check the device status using lsdev command<code>lsdev -Cc iocp</code>The resulting output should match the following example:<code>iocp0 Available  I/O Completion Ports</code>
setup-maxprocs-for-oracle.txt:  -  Log in to the server and issue the following command:<code>sudo chdev -l sys0 -a maxuproc='16384'</code>
setuplpar2rrdvioivm.txt:    - Create the lpar2rrd user<code>sudo mkuser "id=206" "pgrp=view" "groups=view,staff" "home=/home/lpar2rrd" "shell=/usr/bin/rksh" lpar2rrd</code>
setuplpar2rrdvioivm.txt:    - Create RSA keys<code>sudo su - lpar2rrd
setuplpar2rrdvioivm.txt:ssh-keygen -t rsa</code>Hit enter 3 times
setuplpar2rrdvioivm.txt:    - Add the authorized_keys as root<code>sudo vi /home/lpar2rrd/.ssh/authorized_keys</code>Add this key to it<code>ssh-dss AAAAB3NzaC1kc3MAAACBAI3dOLUfqbZ+0b0WfwHqmYIjkE9YxznLzCRjnbjmRWDqC3lW3CNv6FCeuWQkjmzcktjYZ7FcfZR7P2/hl46LtgPkpxONCYbGPyr0YoYd+AnWngHO6ZBCKU/rvpBJD+hZ4Agl+PLhji87NlFp9p1quBWOuq5Yo+BTp3QXWZvyVVh/AAAAFQCyxS2OpqDWiAKYI9deAOwajJ1xMwAAAIAdV7cKTWcj7t6bOoEFZtEdj0fJ9Bf9kKP5OCAdP4D6qFQEMzZLYElEF5tpw9ejEiHnNAMZH0a0sK3D1iU59zIss2ldgB9jEmCTRJHLQv83yVACmYyCCutHZyL8y5PejWDZeoNxRGTAMmltU1OCeNxkVu1g5CnMID5okxPjrW3TCgAAAIBGWTIRbZsJ+gfU7nA1VP3kTpZeZtv0Oe5hDnW0LpoOjlJR5jMmGIDpaMWNoerJvYto4UHZyIUS7R2gQRZObXerzOYmQf7N56FeqRDrz7OiLQf58P3eN4l89KjE/0QaIFXb2Wc8KYFCjcPkd0UgQzsYRnGMeooEKY4wGQ1A7K3ng== lpar2rrd@taitc118</code>and this<code>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCyS1CIiMYKFMkA/jfgehukXQD5Sce/MOPNZU+9zrM5JXhHXKq4jw+T4Ve9Hc7zfEJt3ChgVlxvNVfZKOqCEOqae3wFDHsPg6B+zd/5AOOZCZ0pDLloUR095D7nX0udeaYk2TGjlSXqpA+r8WG/iuHpzYdbgTJr0n3hB0yiJ6MpebVfsne82qh5pHv2BgOcz+b8E1ci9ejuwhwBI112noS3t+8L9my5Wq/flbrWArB3mkNAJl2iSfjkggZTTxpdJat38pit+gi2tJHuaQhNSd9GtMTqwjB+7OeouwGzfKRDbkO0CITBBHtME1FayVSeIYheRVBppGtBtF1tZioA9zTL lpar2rrd@taitc118</code>
setuplpar2rrdvioivm.txt:    - Edit /etc/environment and add these to the PATH variable<code>sudo vi /etc/environment</code>Add these<code>/usr/ios/cli:/usr/ios/utils:/usr/ios/lpm/bin:/usr/ios/oem:/usr/ios/ldw/bin</code>
setuplpar2rrdvioivm.txt:    - Link the .profile<code>cd /home/lpar2rrd
setuplpar2rrdvioivm.txt:sudo ln -sf /usr/ios/cli/.profile .profile</code>
setuplpar2rrdvioivm.txt:    - Provide view access<code>chuser "roles=ViewOnly" lpar2rrd</code>
setuplpar2rrdvioivm.txt:    - Verify password less login. Logon to pcdcunxlxap02 and su to lpar2rrd<code>sudo su - lpar2rrd</code>Now ssh to the vio server and accept the host key<code>ssh <vioserver> ls</code>
setuplpar2rrdvioivm.txt:    - On pcdcunxlxap02, add the system to the lpar2rrd config file.<code>sudo vi /home/lpar2rrd/lpar2rrd/etc/lpar2rrd.cfg</code>Add here<code># HMC or IVM hostname(s) (you can specify list of hostnames separated by a space, all in double quotes)
setuplpar2rrdvioivm.txt:  HMC_LIST="tgprhmc2 taprvio3 taprvio4 taprvio5 taprvio6 taprvio7 taprvio8 taprvio9 taprvio14 taprvio15 taprvio17 taprvio18"</code>
setuplpar2rrdvioivm.txt:  * Enable data collection on the Managed frame. Login to the HMC and execute this command<code>chlparutil -m Server-8202-E4C-SN101260T -r config -s 60</code>
setupntp.txt:  - Check the time server<code>sudo ntpdate -d pgntpap01.amer.int.tenneco.com</code>If the offset is greater than 1000 seconds, manually adjust the time and run the ntpdate command again.
setupntp.txt:  - Edit the config file. First make a backup copy<code>sudo cp /etc/ntp.conf /etc/ntp.conf.$(date +%Y%m%d)</code>Now make the changes<code>sudo vi /etc/ntp.conf</code>Remove all lines in this file and replace with the following.
setupntp.txt:    - For North American servers - Replace the file with this<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:    - For European servers - Replace the file with this<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:    - For Asia Pacific servers - Replace the file with this<code># Customized for Tenneco
setupntp.txt:server pgntpap03.amer.int.tenneco.com</code>
setupntp.txt:  - Start using the XNTPD daemon now and during system restart<code>sudo stopsrc -s xntpd</code><code>sudo chrctcp -S -a xntpd</code>
setupntp.txt:  - Make sure it is running<code>lssrc -s xntpd</code>
setupntp.txt:  - Check the date<code>date</code>
setupntp.txt:  - If the time is not too far, adjuct the time. **DO NOT CHANGE TIME ON DATABASE SERVERS**<code>date ; sudo ntpdate -u pgntpap01.amer.int.tenneco.com ; date</code>
setupntp.txt:  - Ensure the timeserver is correct<code>sudo xntpdc -l
setupntp.txt:client    pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:  * Enable and start NTPD<code>sudo chrctcp -S -a xntpd</code>
setupntp.txt:  * Disable and stop NTPD<code>sudo chrctcp -S -d xntpd</code>
setupntp.txt:  * Enable but do not start NTPD<code>sudo chrctcp -a xntpd</code>
setupntp.txt:  * Disable but do not stop NTPD<code>sudo chrctcp -d xntpd</code>
setupntp.txt:  - export PATH<code>export PATH=$PATH:/usr/sbin:/sbin:/etc:/usr/bin:/bin</code>Some VIOS root logins don't set PATH variable correct - need to check why
setupntp.txt:  - Check the time server<code>sudo ntpdate -d server pgntpap01.amer.int.tenneco.com</code>If the offset is greater than 1000 seconds, manually adjust the time and run the ntpdate command again.
setupntp.txt:  - Edit the config file<code>sudo vi /etc/ntp.conf</code>
setupntp.txt:    - For North American servers - Replace the file with this<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:    - For European servers - Replace the file with this<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:  - Start using the XNTPD daemon now and during system restart<code>sudo stopsrc -s xntpd</code><code>sudo chrctcp -S -a xntpd</code>
setupntp.txt:  - Make sure it is running<code>lssrc -s xntpd</code>
setupntp.txt:  - Check the date<code>date</code>
setupntp.txt:  - If there is an offset, correct it<code>date ; sudo ntpdate -u pgntpap01.amer.int.tenneco.com ; date</code>
setupntp.txt:  - Ensure the timeserver is correct<code>sudo xntpdc -l
setupntp.txt:client    pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:  - Check the time server<code>sudo ntpdate -d pgntpap01.amer.int.tenneco.com</code>If the offset is greater than 1000 seconds, manually adjust the time and run the ntpdate command again.
setupntp.txt:  - Edit the config file<code>sudo vi /etc/ntp.conf</code>
setupntp.txt:    - North American servers, Add these to the end of the file<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:    - European servers, Add these to the end of the file<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:  - Start using the XNTPD daemon<code>sudo chkconfig ntp 12345 on</code>Check it<code>sudo chkconfig --list ntp
setupntp.txt:ntp                       0:off  1:on   2:on   3:on   4:on   5:on   6:off</code>Start it<code>sudo service ntp start</code>
setupntp.txt:  - Make sure it is running<code>sudo service ntp status</code>
setupntp.txt:  - Check the date<code>date</code>
setupntp.txt:  - If there is an offset, correct it<code>sudo ntpdate -u pgntpap01.amer.int.tenneco.com</code>
setupntp.txt:    - European servers Fill in these<code>sudo vi /etc/ntp.conf</code>Add<code># Customized for Tenneco
setupntp.txt:server pgntpap03.aspa.int.tenneco.com</code>
setupntp.txt:  - Ensure the timeserver is correct<code>sudo ntpdc -l
setupntp.txt:client    pgntpap03.aspa.int.tenneco.com</code>
setupresolv.conf.txt:  - Edit resolv.conf<code>sudo vi /etc/resolv.conf</code>
setupresolv.conf.txt:    * CDC - DRiV<code>domain driv.com
setupresolv.conf.txt:search driv.com amer.int.tenneco.com emea.int.tenneco.com aspa.int.tenneco.com cn.ten eu.ten na.ten fmmotorparts.com federalmogul.com</code>
setupresolv.conf.txt:    * Lincolnshire Datacentre<code>domain amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Lincolnshire DMZ<code>domain tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Interexion(INT)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search eu.ten emea.int.tenneco.com na.ten amer.int.tenneco.com cn.ten</code>
setupresolv.conf.txt:    * Grass Lake(GLK)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Monroe, MI<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Lake Forest, IL(LAK)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Celaya, MEX(CEL)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Cotia, Brazil(COT)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Mogi Mirim, Brazil (MOG)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com , emea.int.tenneco.com, aspa.int.tenneco.com, int.tenneco.com</code>
setupresolv.conf.txt:    * Elkhart, IN<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Ligonier, IN(LIG)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Litchfield, MI(LIT)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Marshall, MI(MAR)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Napoleon, OH(NAP)<code>domain  amer.int.tenneco.com
setupresolv.conf.txt:search amer.int.tenneco.com na.ten eu.ten emea.int.tenneco.com aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Edenkoben, Germany(EDE)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Gent, Belgium(GEN)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Gliwice, Poland(GLW)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Ingolstadt, Germany(ING)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Poznan, Poland(POZ)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Rybnik, Poland(RYB)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * St. Truiden, Belgium(STR)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com eu.ten amer.int.tenneco.com na.ten aspa.int.tenneco.com cn.ten tenneco.com</code>
setupresolv.conf.txt:    * Munich, Germany(MUN)<code>domain  emea.int.tenneco.com
setupresolv.conf.txt:search emea.int.tenneco.com, amer.int.tenneco.com, aspa.int.tenneco.com, int.tenneco.com</code>
setupsshkeysfornim.txt:    - If VIOS<code>oem_setup_env</code>
setupsshkeysfornim.txt:  - Change root user's home directory<code>mkdir -p /root
setupsshkeysfornim.txt:chuser "home=/root" root</code>
setupsshkeysfornim.txt:  - Relogin or just<code>su -</code>
setupsshkeysfornim.txt:  - Create the .ssh folder<code>ssh localhost</code>Answer yes then CTRL+C
setupsshkeysfornim.txt:  - Add these keys to the authorized keys. Login to pgnmsv01<code>sudo scp /root/.ssh/authorized_keys.master <host>:/root/.ssh/authorized_keys</code>
setupsshkeysfornim.txt:  - Test ssh from NIM server. Login to pgnmsv01<code>sudo ssh <server> ls</code>
sitescopemonitoring.txt:  * Create a user called sitescop<code>sudo useradd -u 5069 sitescop</code>
sitescopemonitoring.txt:  * Setup a SSH keys<code>sudo su - sitescop
sitescopemonitoring.txt:chmod 644 authorized_keys</code>
snmpdpublic.txt:    - Version 1<code>[x1kxk630@pablsv02 ~]$ snmpwalk -v1 -c public panmsv02
snmpdpublic.txt:End of MIB</code>This would mean the public string on ON.
snmpdpublic.txt:    - Version 2<code>[x1kxk630@pablsv02 ~]$ snmpwalk -v2c -c public panmsv02
snmpdpublic.txt:End of MIB</code>This would mean the public string on ON.
snmpdpublic.txt:  - Turning off the Version 2 public string<code>sudo vi /etc/snmpdv3.conf</code>And comment out this line<code>COMMUNITY public    public     noAuthNoPriv 0.0.0.0    0.0.0.0         -</code>
snmpdpublic.txt:    - Or simply copy the file from pgnmsv01<code>sudo scp pgnmsv01:/prod/images/etc/snmpdv3.conf /etc/</code>
snmpdpublic.txt:    - And restart snmpd ( refresh is not enough )<code>stopsrc -s snmpd ; sleep 1 ; startsrc -s snmpd</code>
snmpdpublic.txt:  - Try the snmpwalk command from pablsv02 once more and you will see it does not respond anymore.<code>[x1kxk630@pablsv02 ~]$ snmpwalk -v2c -c public panmsv02
snmpdpublic.txt:Timeout: No Response from panmsv02</code>
snmpdpublic.txt:  - Turning off the Version 2 public string<code>sudo vi /etc/snmpdv3.conf</code>And comment out this line<code>COMMUNITY public    public     noAuthNoPriv 0.0.0.0    0.0.0.0         -</code>And restart snmpd ( refresh is not enough )<code>stopsrc -s snmpd ; sleep 1 ; startsrc -s snmpd</code>
snmpdpublic.txt:  - Try the snmpwalk command from pablsv02 once more and you will see it does not respond anymore.<code>[x1kxk630@pablsv02 ~]$ snmpwalk -v2c -c public panmsv02
snmpdpublic.txt:Timeout: No Response from panmsv02</code>
snmpdpublic.txt:  - You may need to install the RPMs that provide these executables<code>snmptrap -v 2c -c oicu812 taitc229 "" 1.3.6.1.2.1.43.18.2.0.1</code>Then ask the OV team and they should find osmething like this on the NNMi server<code>Trap .1.3.6.1.2.1.43.18.2.0.1 at August 22, 2017 11:57:22 AM CDT from pgnetws01.
snmpdpublic.txt:.2.1.43.18.2.0.1</code>
sol8sshinstall.txt:    - Login to pgnmsv01<code>cd /prod/images/Sun/solaris8
sol8sshinstall.txt:wget ftp://sunsite.informatik.rwth-aachen.de/pub/mirror/ftp.sunfreeware.com/sparc/8/openssh-3.1p1-sol8-sparc-local.gz</code>
sol8sshinstall.txt:  - Get the files from NIM server<code>mkdir -p /var/tmp/ssh
sol8sshinstall.txt:mget *</code>Gunzip them<code>gunzip openssl-0.9.6c-sol8-sparc-local.gz
sol8sshinstall.txt:gunzip openssh-3.1p1-sol8-sparc-local.gz</code>
sol8sshinstall.txt:  - Install OpenSSL<code>pkgadd -d openssl-0.9.6c-sol8-sparc-local</code>
sol8sshinstall.txt:  - Install Pseudo Random number generator<code>pkgadd -d prngd-0.9.23-sol8-sparc-local</code>
sol8sshinstall.txt:  - Install ZLIB<code>pkgadd -d zlib-1.1.4-sol8-sparc-local</code>
sol8sshinstall.txt:  - Install OpenSSH<code>pkgadd -d openssh-3.1p1-sol8-sparc-local</code>
sol8sshinstall.txt:  - Cleanup the directory<code>cd 
sol8sshinstall.txt:rm -rf /var/tmp/ssh</code>
sol8sshinstall.txt:  - Create a startup script<code>vi /etc/init.d/sshd</code>Here is the script<code>#! /bin/sh
sol8sshinstall.txt:esac</code>
sol8sshinstall.txt:  - Make it executable<code>chmod +x /etc/init.d/sshd</code>
sol8sshinstall.txt:  - Add it to the RC script<code>ln -s /etc/init.d/sshd /etc/rc2.d/S99sshd</code>
sol8sshinstall.txt:  - Create a startup script for PRNGD<code>vi /etc/init.d/prngd</code>Enter this code<code>#! /bin/sh
sol8sshinstall.txt:esac</code>
sol8sshinstall.txt:  - Make it executable<code>chmod +x /etc/init.d/prngd</code>
sol8sshinstall.txt:  - Add it to RC<code>ln -s /etc/init.d/prngd /etc/rc2.d/S99prngd</code>
sol8sshinstall.txt:  - Make this directory<code>mkdir -p /var/spool/prngd</code>
sol8sshinstall.txt:  - Start prngd<code>/etc/init.d/prngd start</code>
sol8sshinstall.txt:  - Add the DSA keys<code>/usr/local/bin/ssh-keygen -d -f /usr/local/etc/ssh_host_dsa_key -N ""</code>
sol8sshinstall.txt:  - Start SSH<code>/etc/init.d/sshd start</code>
sorted_by_location_aix_operating_system_levels.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |
sorted_by_location_aix_operating_system_levels.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|534|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |
sorted_by_location_aix_operating_system_levels.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |
sorted_by_location_aix_operating_system_levels.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |
sorted_by_model_aix_operating_system_levels.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |
sorted_by_model_aix_operating_system_levels.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|534|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |
sorted_by_model_aix_operating_system_levels.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |
sorted_by_model_aix_operating_system_levels.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |
sorted_by_oslevel_aix_operating_system_levels.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|534|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |
sorted_by_oslevel_aix_operating_system_levels.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |
sorted_by_oslevel_aix_operating_system_levels.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |
sorted_by_oslevel_aix_operating_system_levels.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |
sorted_by_serial_aix_operating_system_levels.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |
sorted_by_serial_aix_operating_system_levels.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|534|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |
sorted_by_serial_aix_operating_system_levels.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |
sorted_by_serial_aix_operating_system_levels.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |
splitvgexperience.txt:  - Add additional disks ( equal in size OR more )<code>sudo extendvg <vgname> <new set of disks></code>
splitvgexperience.txt:  - Mirror the VG<code>sudo mirrorvg <vgname> <new set of disks></code>
splitvgexperience.txt:  - Split the VG<code>sudo splitvg -y <newvgname> -c2 -i <vgname></code>
splitvgexperience.txt:  - Make a note of pvids<code>lspv</code>
splitvgexperience.txt:  - Now you may export that split copy and import it elsewhere.<code>sudo varyoffvg <newvgname>
splitvgexperience.txt:sudo exportvg <newvgname></code>
standalone-install.txt:    * Login to the iLO<code>ssh hscroot@pcdcunxlxap03rmdb</code>Password is the default one with 8 characters.<code>cd /map1/oemhp_vm/cddr
standalone-install.txt:set oemhp_boot=connect</code>
standalone-nbu-dl380.txt:    * Login to the iLO<code>ssh LAN@${shortname}rmb</code>Use the standard password for "LAN".
standalone-nbu-dl380.txt:    * Mount the Media<code>vm cdrom insert http://pcdcunxlxap01.driv.com/servers/HOSTNAME.iso
standalone-nbu-dl380.txt:vm cdrom set connect</code>Replace ''HOSTNAME'' with the actual hostname you are building.
stopopenview.txt:<code>sudo /usr/lpp/OV/bin/ovc -kill</code>
stopopenview.txt:<code>sudo /usr/lpp/perf/bin/ovpa -stop</code>
stopopenview.txt:<code>sudo /usr/lpp/perf/bin/pctl stop</code>
stopopenview.txt:<code>sudo /etc/rc.agent stop</code>
stopopenview.txt: To stop Openview from Starting at Reboot change**__wait__** to **__off__** in te following lines in /etc/inittab<code>
stopopenview.txt:ovpa:2:wait:/etc/rc.ovpa start >/dev/console  # Start OV Performance Agent</code>
stopopenview.txt:<code>sudo /usr/symcli/bin/stordaemon shutdown storwatchd</code>
stopopenview.txt:<code>sudo /usr/symcli/bin/stordaemon shutdown storapid</code>
stopopenview.txt:<code>sudo /usr/emc/API/symapi stop</code>
sudoaccess.txt:  - We get entitlement request(s) to grant a specific user root ( sudo su - ) access, you should have the following data<code>Username : 
sudoaccess.txt:Hostname : </code>
sudoaccess.txt:  - To grant access to a specific user on a host(s)<code>sudo /prod/images/scripts/manage_sudo enable <username> <host1> <host2></code>e.g.<code>sudo /prod/images/scripts/manage_sudo enable x1kxk630 panmsv02
sudoaccess.txt:Granting omnipotent permission for x1kxk630 on panmsv02</code>
sudoaccess.txt:  - To revoke the access<code>sudo /prod/images/scripts/manage_sudo disable <username> <host1> <host2></code>e.g.<code>sudo /prod/images/scripts/manage_sudo disable x1kxk630 panmsv02
sudoaccess.txt:Taking away omnipotent like permissions from x1kxk630 on panmsv02</code>
sudoaccess.txt:    - Disable after 1 day<code>echo "sudo /prod/images/scripts/manage_sudo disable x1kxk630 panmsv02 " | at now + 1 day</code>
sudoaccess.txt:    - Disable after 1 hour<code>echo "sudo /prod/images/scripts/manage_sudo disable x1kxk630 panmsv02 " | at now + 1 hour</code>
sudoaccess.txt:    - Disable after 10 days<code>echo "sudo /prod/images/scripts/manage_sudo disable x1kxk630 panmsv02 " | at now + 10 day</code>
sudoforuers.txt:    * For example if a DBA needs to run '/oracle/SID/11203/root.sh' as root during an Oracle installation or upgrade, Instead of jumping to a 'root shell', they can execute the command as folllows<code>sudo /oracle/SID/11203/root.sh</code>
sudoforuers.txt:  * To list all the commands your user account is entitled to<code>sudo -l</code>
sudoforuers.txt:    * If you need to add something to /etc/motd, a file owned by root. The following code will not work.<code>sudo echo "something" > /etc/motd</code>For security reasons, sudo does not permit re-directions. Instead, this works<code>echo "something" | sudo tee -a /etc/motd</code>
sudoforuers.txt:    *  As an example, "cd" command if used like this, will not work<code>sudo cd /protected-directory</code>Instead use<code>sudo ls -l /protected-directory</code>i.e. Don't "cd" to the directory. You may wonder, what if I need to "cd" to a directory and create a tar ball with relative paths ? Looking up the man page for tar, I found this<code> -C Directory
sudoforuers.txt:            multiple directories that are not related by a close common parent to be archived, using short relative path names.</code>That means, you can execute this command from wherever you are and it will create a tarball with relative path<code>sudo tar cvf mytarfile.tar -C /opt/ibm .</code>
sysbuild.txt:        - Add the system to the console database <code>vi /prod/images/etc/unix_sys_console</code>
sysbuild.txt:        - Register the system to the NIM server <code> smitty nim </code>
sysbuild.txt:        - Open a session to the system console from pgnmsv01 <code>/usr/local/scripts/getconsole hostname</code>
sysbuild.txt:        - Allocate resources and kick off a network installation<code>smitty nim_bosinst</code>
sysbuild.txt:        - Boot the lpar to SMS <code>Using the HMC or HMC CLI, Activate the lpar and boot it to SMS </code>
syslogconfigdriv.txt:  - Create a template<code>vi /var/tmp/tensyslogadd</code>Insert this template<code>errnotify:
syslogconfigdriv.txt:en_method = "logger -pnotice Msg from Error Log: $(errpt -a -l $1 ) ; logger -ttenerrpt $(errpt -l $1 | grep -v ^IDENTIFIER "</code>
syslogconfigdriv.txt:  - Add this to the ''errnotify'' class in ODM<code>sudo odmadd /var/tmp/tensyslogadd</code>Delete the template file<code>rm /var/tmp/tensyslogadd</code>
syslogconfigdriv.txt:  - Add this line to sysllog config so the error loges get shipped out.<code>sudo vi /etc/syslog.conf</code>Add this. **Do not add if there is already a similar line in the file**<code>*.notice           @unixlogs.driv.com</code>
syslogconfigdriv.txt:  - Restart syslogd<code>sudo refresh -s syslogd</code>
syslogconfigtenneco.txt:  - Create a template<code>vi /var/tmp/tensyslogadd</code>Insert this template<code>errnotify:
syslogconfigtenneco.txt:en_method = "logger -pnotice Msg from Error Log: $(errpt -a -l $1 ) ; logger -ttenerrpt $(errpt -l $1 | grep -v ^IDENTIFIER "</code>
syslogconfigtenneco.txt:  - Add this to the ''errnotify'' class in ODM<code>sudo odmadd /var/tmp/tensyslogadd</code>Delete the template file<code>rm /var/tmp/tensyslogadd</code>
syslogconfigtenneco.txt:  - Add this line to sysllog config so the error loges get shipped out.<code>sudo vi /etc/syslog.conf</code>Add this. **Do not add if there is already a similar line in the file**<code>*.notice           @unixlogs.driv.com</code>
syslogconfigtenneco.txt:  - Restart syslogd<code>sudo refresh -s syslogd</code>
systemdunispool.txt:  - Create a generic start/stop script for unispool<code>sudo vi /usr/local/sbin/unispool.sh</code>paste this output it<code>#!/bin/bash
systemdunispool.txt:esac</code>
systemdunispool.txt:  - Make it executable<code>sudo chmod 755 /usr/local/sbin/unispool.sh</code>
systemdunispool.txt:  - Create a config file for systemd/unispool<code>sudo vi /etc/systemd/system/unispool.service</code>Add this content to it<code>[Unit]
systemdunispool.txt:WantedBy=multi-user.target</code>
systemdunispool.txt:    - Start unispool<code>sudo systemctl start unispool</code>
systemdunispool.txt:    - Stop  unispool<code>sudo systemctl stop unispool</code>
systemdunispool.txt:    - Status of unispool<code>sudo systemctl status unispool</code>
systemdunispool.txt:    - Restart of unispool<code>sudo systemctl reload unispool</code>
systemdunispool.txt:    - Enable for automatic start/stop<code>sudo systemctl enable unispool</code>
ta2-planned-outage.txt:  - Add the below two systems in the manual blackouts, before the TA2 outage<code>peerwd00
ta2-planned-outage.txt:tepr2a02</code>
ta2appsrvsetup.txt:  - Create the erappvg on the 34Gig LUN<code>mkvg -s 128 -B -y erappvg01 hdisk0</code>
ta2appsrvsetup.txt:  - Create these logical volumes<code>mklv -t jfs2 -y lv02 erappvg01 8
ta2appsrvsetup.txt:mklv -t jfs2 -y lv13 erappvg01 40</code>
ta2appsrvsetup.txt:  - Create these filesystems on them<code>crfs -v jfs2 -A yes -t no -d lv02 -m /application/CA
ta2appsrvsetup.txt:crfs -v jfs2 -A yes -t no -d lv13 -m /var/avamar</code>
ta2appsrvsetup.txt:  - Mount them<code>mount /application/CA
ta2appsrvsetup.txt:mount /var/avamar</code>
ta2appsrvsetup.txt:  - Set permissions and ownerships<code>chown root:sys /application/CA
ta2appsrvsetup.txt:chmod u=rwx,g=rx,o=rx /var/avamar</code>
ta2appsrvsetup.txt:  - Setup these NFS mounts<code>/sapmnt/TA2:
ta2appsrvsetup.txt:        account         = false</code>
ta2failoverdoc.txt:  - Deconfigure the VIPs<code>cd /root/cluster
ta2failoverdoc.txt:ksh ./del-alias99.sh</code>
ta2failoverdoc.txt:  - Configure the VIPs<code>cd /root/cluster
ta2failoverdoc.txt:ksh ./alias98.sh</code>
ta2failoverdoc.txt:  - Deconfigure VIPs and unexport NFS<code>cd /root/cluster
ta2failoverdoc.txt:ksh ./umount99.sh</code>
ta2failoverdoc.txt:  - Configure the VIPs and export the NFS<code>cd /root/cluster
ta2failoverdoc.txt:ksh ./mount98.sh</code>
taprvio50-51.txt:  -  Take a fresh mksysb and when it completed copy the latest taprvio50.viosbr.bak.nn.tar.gz fle to the directory created in step 1 above <code>ls -liat /home/padmin| grep taprvio50.viosbr | pg </code> <code> cp -p /home//padmin/{Latest taprvio50.viosbr file } . </code>
taprvio50-51.txt:  -  Run script-1<code> hname=`hostname`
taprvio50-51.txt:done</code>
taprvio50-51.txt:  -  Copy the direcory created in step 1 to to the repository on the NIM server pgnmsvo1 <code> scp -r {Directory from step 1} pgnmsv01:/preupgrade/reports </code>
taprvio50-51.txt:  -  copy preserved output from vios_save_env.sh to repository on pgnmsv01 to the back to the vio server <cpde> scp -r /preupgrade/reports/{file to be copied} taprvio50:{location of choice} </code>
taprvio50-51.txt:  -  copy the  taprvio50.viosbr.bak file back to /home/padmin. <code> cp {taprviovi.viosbr.bak file} /home/padmin/
taprvio50-51.txt:  -  run the viosbr comand to recover all the lpard on the server <code> viosbr -restore -file {taprviovi.viosbr.bakfile} -validate -inter </code>
taprvio50-51.txt:  -  run script-2 <code>hname=`hostname`
taprvio50-51.txt:done </code>
taprvio50-51.txt:  -  Remap the disks <code> sh ./{taprvioxx savedenvronment directry}/rempa-disks
taprvio50-51.txt:<code>
taprvio50-51.txt:mkvdev -vadapter vhost3 -vdev hdisk20</code>
tennecorhel7ks.txt:<code>auth  --useshadow  --enablemd5
tennecorhel7ks.txt:%end</code>
theoldoncaldocument.txt:  - Login to taitc113 (OpenView Server) and change the script to generate pages for tickets. You can either login directly on ssh from taitc118 <code> ssh taitc113 </code>
theoldoncaldocument.txt:  - Make a copy of the file <code>sudo cp /var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh /var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh.$(date +%m%d%y)</code>
theoldoncaldocument.txt:  - Edit the file<code>sudo vi /var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code> chnage the **__Phone Number@Carrier__** sequence in the line echo "//To:**__4438783970@tmomail.net__**" >> /var/opt/OV/Tenneco/Oracle_Log/file3.txt// with your data from the table below and save the file. 
timezone.txt:  - Setup the correct timezone. For e.g. North America / Chicago<code>sudo timedatectl set-timezone America/Chicago</code>
timezone.txt:  - Setup the correct timezone. For e.g. Europe / Brussel<code>sudo timedatectl set-timezone Europe/Brussels</code>
timezone.txt:  - Setup the correct timezone. For e.g. Asia / Shanghai<code>sudo timedatectl set-timezone Asia/Shanghai</code>
timezone.txt:  - For TA2 TZ should be setup by appanding the following to:<code>cat << EOF >> /etc/profile
timezone.txt:EOF</code>
timezone.txt:  - For GPDM TZ should be setup by appanding the following to:<code>cat << EOF >> /etc/profile
timezone.txt:EOF</code>
tndv3d01hostmigration.txt:  - On Thursday, March 21, Robert to unmirror the rootvg and perform alt_disk_copy<code>unmirrorvg rootvg hdisk5</code><code>alt_disk_copy -d <134gig_hdiskpower></code><code>bootlist -m normal hdisk0</code><code>mirrorvg rootvg hdisk5</code><code>bosboot -ad hdisk5</code><code>powermt remove dev=134gighdiskpower</code><code>rmdev -dl 134gighdiskpower; rmdev -dl hdiskxx; rmdev -dl hdiskxx;</code>
tndv3d01hostmigration.txt:  - On Thursday, March 21, Robert to assign both LUN's to vhost9 adapter on vio40/41<code>chdev -l hdiskxx -a reserve_policy=no_reserve</code><code>chdev -l hdiskxxx -a pv=yes</code>
tndv3d01hostmigration.txt:  - As padmin do on vio40/41:<code>mkvdev -vdev hdisk -vadapter vhost9</code>
tndv3d01hostmigration.txt:  - On Fiday, March 22 @ 2:20PM, Robert will unmount, varryoff and export all non-rootvg volume groups:<code>lsvg | grep -v rootvg | while read line
tndv3d01hostmigration.txt:</code> 
tndv3d01hostmigration.txt:  - On Fiday, March 22 @ 2:30PM, Kapil to swing the following LUN's from old tndv3d01 to vio40/41 cluster:<code>Disk:PVID:SYM ID:LUN:SIZE:PATHS:VG/VGID
tndv3d01hostmigration.txt:hdiskpower23:00cb962fbf1bdebd:000190103471:0ED9:34522:hdisk28:hdisk53:datavg</code>
tndv3d01hostmigration.txt:  - On Fiday, March 22 @ 2:30PM, Robert to change reserve_lock to no on the above devices on vio40/41.<code>for i in <hdisk list> do
tndv3d01hostmigration.txt:  - done</code>
tndv3d01hostmigration.txt:  - On Fiday, March 22 @ 2:30PM, Robert as padmin to present the devices to vhost9 on vio40/41.<code>for i in <hdisk list>do
tndv3d01hostmigration.txt:done</code>
tspr1d01server.txt:  * 2. Configure the round_robin and reserve_policy to the boot disks.<code>sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -Pl hdiskx</code>
tspr1d01server.txt:  * 3. Perform NTP sync on the build server (xspr1d01)<code>date
tspr1d01server.txt:date</code>
tspr1d01server.txt:    * If it is synced then leave it as it is and if it is not synced then do this.<code>
tspr1d01server.txt:sudo ntpdate -u pgntpap01.amer.int.tenneco.com</code>
tspr1d01server.txt:    * Login to the tspr1d01 server and stop the SAP first and then Database<code>a. Stop the SAP App
tspr1d01server.txt:b. Stop the DB</code>
tspr1d01server.txt:  * 5. Check the number of disks present other then rootvg.<code> sudo lsvpcfg.sh | grep -i srmvg01
tspr1d01server.txt:hdisk45:00ce6b8591359a6d: : :104448::srmvg01</code>
tspr1d01server.txt:  * 6. Unmount the filesystems that belongs to srmvg01<code>lsvgfs srmvg01 | sort -r | xargs -n1 sudo umount</code>
tspr1d01server.txt:  * 7. If any of the FS doesn't unmount then check which user is using that FS using the below command.<code>sudo fuser -u /mount point</code>
tspr1d01server.txt:  * 8. Varyoff and export the VG<code>sudo varyoffvg srmvg01
tspr1d01server.txt:sudo exportvg srmvg01</code>
tspr1d01server.txt:  * Delete the disks which belongs to srmvg01<code>sudo lsvpcfg.sh | grep -i srmvg01 | awk -F: '{print $1}' | xargs -n1 sudo rmdev -dl</code>
tspr1d01server.txt:  * Shutdown tspr1d01 server<code> sudo shutdown -F</code>
tspr1d01server.txt:    * a. Take the snapshot of the disks.<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.before
tspr1d01server.txt:sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.after</code>
tspr1d01server.txt:    * b. Count the number of disks which belongs to srmvg01 using a file which contains the PVID of srmvg disks.<code>grep -f srmvg.pvid lsdiskcfg.out.after | wc -l</code>
tspr1d01server.txt:    * c. Cross verify the disk info and then copy the hdisk name into a file<code>grep -f srmvg.pvid lsdiskcfg.out.after | awk -F: '{print $1}' > tspr1d01.disks</code>
tspr1d01server.txt:    * d. Switch to padmin<code>sudo su - padmin</code>
tspr1d01server.txt:    * e. Unmap the disks from the vhost using a for loop<code>for disk in `cat /home/x1shukla/tspr1d01.disks`;
tspr1d01server.txt:done</code>
tspr1d01server.txt:    * f. Delete the disks<code>for disk in `cat /home/x1shukla/tspr1d01.disks`;
tspr1d01server.txt:done</code>
tspr1d01server.txt:    * a. Take the snapshot of the disks.<code>sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.before
tspr1d01server.txt:sudo /usr/local/scripts/lsdiskcfg > lsdiskcfg.out.after</code>
tspr1d01server.txt:    * b. Count the number of disks which belongs to srmvg01 using a file which contains the PVID of srmvg disks.<code>grep -f srmvg.pvid lsdiskcfg.out.after | wc -l</code>
tspr1d01server.txt:    * c. Cross verify the disk info and then copy the hdisk name into a file<code>grep -f srmvg.pvid lsdiskcfg.out.after | awk -F: '{print $1}' > tspr1d01.disks</code>
tspr1d01server.txt:    * d. Switch to padmin<code>sudo su - padmin</code>
tspr1d01server.txt:    * e. Unmap the disks from the vhost using a for loop<code>for disk in `cat /home/x1shukla/tspr1d01.disks`;
tspr1d01server.txt:done</code>
tspr1d01server.txt:    * f. Delete the disks<code>for disk in `cat /home/x1shukla/tspr1d01.disks`;
tspr1d01server.txt:done</code>
tspr1d01server.txt:  * 12. Once disks are available login to xspr1d01 server, scan and verify the disks<code>sudo lsvpcfg.sh > lsvpcfg.out.before
tspr1d01server.txt:diff lsvpcfg.out.before lsvpcfg.out.after</code>
tspr1d01server.txt:  * 13. Configure the roundrobin and  reserve_policy to the newly added disks and verify them<code>sudo chdev -a algorithm=round_robin -a reserve_policy=no_reserve -l hdiskx
tspr1d01server.txt:lsdev -Ccdisk | awk '{print $1}' | xargs -n1 lsattr -El | grep -e reserve_policy -e algorithm</code>
tspr1d01server.txt:  * 14. Import the srmvg01<code>sudo importvg -y srmvg01 00ce6b85913f5b20</code>
tspr1d01server.txt:  * 15. Mount the Filesystems of srmvg01<code>lsvgfs srmvg01 | sort | xargs -n1 sudo mount</code>
tspr1d01server.txt:  * 16. Create a entry for NFS and add the below entry in /etc/filesystem<code>sudo cp -p /etc/filesystems /etc/filesystems.$(date +%Y%m%d)
tspr1d01server.txt:sudo vi /etc/filessytems</code><code>/usr/sap/trans:
tspr1d01server.txt:        account         = false</code>
tspr1d01server.txt:  * 17. As this is a database server, Configure the iocp<code>lsdev -Cc iocp
tspr1d01server.txt:lsdev -Cc iocp</code>
tspr1d01server.txt:    * a. Login to xspr1d01 through console<code>sudo getconsole xspr1d01 </code>
tspr1d01server.txt:    * b. Change the hostname and IP<code>/usr/sbin/mktcpip -h'tspr1d01' -a'10.32.6.128' -m'255.255.255.0' -i'en0' -n'10.32.8.53' -d'amer.int.tenneco.com' -g'10.32.6.1' -A'no' -t'N/A' -s''</code>
tspr1d01server.txt:    * c. Configure the bck IP<code>chdev -l en1 -a netaddr=10.32.51.128 -a netmask=255.255.255.0 -a state=up</code>
tspr1d01server.txt:    * d. Do a ping test<code>for ip in 10.32.6.1 10.32.51.1
tspr1d01server.txt:done</code>
tspr1d01server.txt:  * 20. Shutdown the server<code>sudo shutdown -F</code>
tweaknimforworl.txt:  - The idea is to use a local server in the same subnet as the container for NIM installation files. For this documentation purpose, I am using taerm055 as the container and taerm057 as the target. IP addresses are as follows<code>taerm055 ---> 10.60.97.55
tweaknimforworl.txt:taerm057 ---> 10.60.97.57</code>
tweaknimforworl.txt:  - Get the bootptab entry from pgnmsv01 and change it as follows<code>grep ^taerm057 /etc/bootptab
tweaknimforworl.txt:taerm057.emea.int.tenneco.com:bf=/tftpboot/taerm057.emea.int.tenneco.com:ip=10.60.97.57:ht=ethernet:sa=10.32.51.118:gw=10.60.97.1:sm=255.255.255.0:</code>Change it as this and add it to the /etc/bootptab on taerm055<code>taerm057.emea.int.tenneco.com:bf=/tftpboot/taerm057.emea.int.tenneco.com:ip=10.60.97.57:ht=ethernet:sa=10.60.97.55:gw=10.60.97.1:sm=255.255.255.0:</code>Note the change from **sa=10.32.51.118** to **sa=10.60.97.55**
tweaknimforworl.txt:  - Create this directory on taerm055<code>sudo mkdir -p /export/nim/scripts</code>
tweaknimforworl.txt:  - Copy these files from pgnmsv01 to taerm055<code>scp /tftpboot/taerm057.emea.int.tenneco.com taerm055:/tftpboot/taerm057.emea.int.tenneco.com
tweaknimforworl.txt:scp /export/nim/scripts/taerm057.script taerm055:/export/nim/scripts/taerm057.script</code>
tweaknimforworl.txt:  - Copy over the LPPSRC and Spot to taerm055<code>cd <lppsrc_dir>
tweaknimforworl.txt:tar cvf - . | gzip - | ssh tamon055 "(cd /prod/nim/resources/spot/610TL07-05_spot/usr ; gunzip - | tar xvf - )"</code>**This needs to be done in advance**
tweaknimforworl.txt:  - NFS export LPPSRC, Spot and the script from taerm055<code>exportfs -i -o ro,root=taerm057.emea.int.tenneco.com,access=taerm057.emea.int.tenneco.com /prod/nim/resources/spot/610TL07-05_spot/usr
tweaknimforworl.txt:exportfs -i -o ro,root=taerm057.emea.int.tenneco.com,access=taerm057.emea.int.tenneco.com /export/nim/scripts/taerm057.script</code>
tweaknimforworl.txt:  - Edit this file on taerm055 and make modifications<code>vi /tftpboot/taerm057.emea.int.tenneco.com.info</code>Change these sections<code>export SPOT=taerm055.emea.int.tenneco.com:/prod/nim/resources/spot/610TL07-05_spot/usr
tweaknimforworl.txt:export NIM_MOUNTS=" taerm055.emea.int.tenneco.com:/prod/nim/resources/lppsrc/610TL07-05:/SPOT/usr/sys/inst.images:dir "</code>Change all references to pgnmsv01 to taerm055 in these sections. **Also do not forget to change the LPPSRC & Spot locations is they are different from NIM server pgnmsv01.**
tweaknimforworl.txt:  - Make sure bootpd and tftpd are uncommented in /etc/inetd.conf<code>egrep "^tftp|^bootp" /etc/inetd.conf</code>
tweaknimforworl.txt:  - Make sure tftpd is running<code>lssrc -s tftpd</code>
unispoolinstallation.txt:  - Create the unispool filesystem<code>sudo lvcreate -n users_unispool -L 2048MB datavg01
unispoolinstallation.txt:sudo mount /users/unispool</code>
unispoolinstallation.txt:  - Download and untar the unispool binaries<code>cd /var/tmp
unispoolinstallation.txt:sudo gtar xzf /var/tmp/unispool.rhel.6.23.gz</code>
unispoolinstallation.txt:  - Cleanup<code>sudo rm /var/tmp/unispool.rhel.6.23.gz</code>
unix_inventory.txt:|dcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|591|551|40|93%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 24576 MB|N/A|Development|Barcode Loftware Lable Development Database Server |Barcode Loftware Lable Development Database Server App Server to balckout taitc546|lincolnshire| cdcvilhmc003|10.128.72.43|6e.6e.3c.af.f0.4| N/A|fcs3>C050760AC42B0052 fcs4>C050760AC42B0054 |Peter Loos,Kamil Owczarek|N/A|ta-unix@tenneco.com|+1-847-482-6440|N/A|GIOS|Active|N/A|N/A|N/A|LDC Datacenter|N/A|1HI17358CA|08/01/2013|07/31/2016|24x7x4|1HI17358CA|08/01/2013|07/31/2016| 24x7x4|IBM|Medium|Medium|yes|vios|pcdcunxaxap01|
unix_inventory.txt:|pcdcbcpaxdb98|AIX|7100-05-02-1810|VM920_080|590|533|56|90%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Standby Production Standby Database Server|Barcode Loftware Lable Standby Production Standby Database Server|lincolnshire| cdcvilhmc003|10.128.44.15|ba.fc.ba.d8.d9.4| N/A|fcs2>C050760AC430003A fcs3>C050760AC430003C |Peter Loos,Kamil Owczarek|N/A|ta-unix@tenneco.com|+1-847-482-6440|N/A|GIOS|Active|N/A|N/A|N/A|LDC Datacenter|N/A|1HI17358CA|08/01/2013|07/31/2016|24x7x4|1HI17358CA|08/01/2013|07/31/2016| 24x7x4|IBM|Critical|Critical|yes|vios|pcdcunxaxap01|
unix_inventory.txt:|pcdcbcpaxdb99|AIX|7100-05-02-1810|VM920_080|690|637|53|92%| IBM,9040-MR9|78AAE8X| PowerPC_POWER9| 2800 MHz|2| 32768 MB|N/A|Production|Barcode Loftware Lable Production Primary Database Server|Barcode Loftware Lable Production Primary Database Server|lincolnshire| cdcvilhmc003|10.128.44.14|6e.6e.39.64.41.4| N/A|fcs2>C050760AC42B004E fcs3>C050760AC42B0050 |Peter Loos,Kamil Owczarek|N/A|ta-unix@tenneco.com|+1-847-482-6440|N/A|GIOS|Active|N/A|N/A|N/A|LDC Datacenter|N/A|1HI17358CA|08/01/2013|07/31/2016|24x7x4|1HI17358CA|08/01/2013|07/31/2016| 24x7x4|IBM|Critical|Critical|yes|vios|pcdcunxaxap01|
unix_inventory.txt:|qcdcbcpaxdb01|AIX|7100-05-02-1810|VM920_080|599|559|39|93%| IBM,9040-MR9|78AAE7X| PowerPC_POWER9| 2800 MHz|2| 12288 MB|N/A|Test Q/A|Barcode Loftware Lable Test Database Server|Barcode Loftware Lable Test Database Server|lincolnshire| cdcvilhmc003|10.128.72.44|ba.fc.ba.9f.67.4| N/A|fcs3>C050760AC430003E fcs4>C050760AC4300040 |Peter Loos,Kamil Owczarek|N/A|ta-unix@tenneco.com|+1-847-482-6440|N/A|GIOS|Active|N/A|N/A|N/A|LDC Datacenter|N/A|1HI17358CA|08/01/2013|07/31/2016|24x7x4|1HI17358CA|08/01/2013|07/31/2016| 24x7x4|IBM|Medium|Medium|yes|vios|pcdcunxaxap01|
unix_on_call.txt:**To change the oncall paging (SMS text from OV), Login to pgnmsv01 as yourself and execute code:**
unix_on_call.txt:    - To put Robert on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt:   - To put Shukant on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt:   - To put Chris on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt:   - To put Vasu on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt:**To redirect on call phone number to yourself, Login to** ''https://voice.google.com/u/0#phones''<code>Username csincus
unix_on_call.txt:Password <standard password with a "1" at the end></code>
unix_on_call.txt-2017-08-24:**To change the oncall paging (SMS text from OV), Login to pgnmsv01 as yourself and execute code:**
unix_on_call.txt-2017-08-24:    - To put Robert on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-08-24:   - To put Shukant on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-08-24:   - To put Chris on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-08-24:   - To put Vasu on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-08-24:**To redirect on call phone number to yourself, Login to** ''https://voice.google.com/u/0#phones''<code>Username csincus
unix_on_call.txt-2017-08-24:Password <standard password with a "1" at the end></code>
unix_on_call.txt-2017-11-10:**To change the oncall paging (SMS text from OV), Login to pgnmsv01 as yourself and execute code:**
unix_on_call.txt-2017-11-10:    - To put Robert on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10:sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10:   - To put Shukant on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10:sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10:   - To put Chris on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10:sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10:   - To put Vasu on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10:sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10:**To redirect on call phone number to yourself, Login to** ''https://voice.google.com/u/0#phones''<code>Username csincus
unix_on_call.txt-2017-11-10:Password <standard password with a "1" at the end></code>
unix_on_call.txt-2017-11-10-valid:**To change the oncall paging (SMS text from OV), Login to pgnmsv01 as yourself and execute code:**
unix_on_call.txt-2017-11-10-valid:    - To put Robert on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10-valid:sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10-valid:   - To put Shukant on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10-valid:sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10-valid:   - To put Chris on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10-valid:sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10-valid:   - To put Vasu on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh
unix_on_call.txt-2017-11-10-valid:sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh pgomgw01:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-11-10-valid:**To redirect on call phone number to yourself, Login to** ''https://voice.google.com/u/0#phones''<code>Username csincus
unix_on_call.txt-2017-11-10-valid:Password <standard password with a "1" at the end></code>
unix_on_call.txt-2017-12-06:**To change the oncall paging (SMS text from OV), Login to pgnmsv01 as yourself and execute code:**
unix_on_call.txt-2017-12-06:    - To put Robert on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1rzb826.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-12-06:   - To put Shukant on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1shukla.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-12-06:   - To put Chris on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1cxs952.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-12-06:   - To put Vasu on call<code>sudo scp /prod/images/scripts/oncallopenviewpaging/x1vasuna.Prod_Send_UNIX_admin.sh taitc113:/var/opt/OV/Tenneco/lbin/Prod_Send_UNIX_admin.sh</code>
unix_on_call.txt-2017-12-06:**To redirect on call phone number to yourself, Login to** ''https://voice.google.com/u/0#phones''<code>Username csincus
unix_on_call.txt-2017-12-06:Password <standard password with a "1" at the end></code>
unixadmintips.txt:    * If it does not exist, create the loopback device<code>sudo mkdev -c loopback -s node -t loopback</code>
unixadmintips.txt:    * Mount an iso<code>sudo loopmount -i /prod/images/cds/SLES-10-SP1-x86_64-DVD1.iso -l loop0 -o "-V cdrfs -o ro" -m /cdrom</code>
unixadmintips.txt:    * Unmount an iso<code>sudo loopumount -l loop0 -m /cdrom</code>
unixadmintips.txt:  * Get to a unix servers console. Login to pgnmsv01<code>sudo getconsole <hostname></code>
unixadmintips.txt:  * Unlock user and reset failed login count <code>sudo chsec -f /etc/security/lastlog -a "unsuccessful_login_count=0" -s <username>
unixadmintips.txt:sudo chuser "account_locked=false" <username></code>
unixadmintips.txt:  * Reset user password <code>sudo pwdadm <username></code>
unixadmintips.txt:    * Using for loop<code>for host in $(cat /prod/images/etc/unix_sys_console | grep -v ^# | grep -v ^$ | awk -F: '{print $1}')
unixadmintips.txt:done</code>
unixadmintips.txt:    * Using shmux<code>cat /prod/images/etc/allhosts.tenneco | /usr/local/bin/shmux -B -M 999 -C 3600s -S all -r ssh -c "uname -a" -</code>
unixadmintips.txt:  * Disable/Enable all printers on a given host<code>for printer in $(grep : /etc/qconfig |grep -v "^*" |  grep -v "@" | sed "s;:;;g")
unixadmintips.txt:done</code>
unixadmintips.txt:  * Restore a single file from mksysb<code>restore -xqdf <mksysbfilename> ./etc/motd</code>The restore is relative
unixadmintips.txt:      * login to serverA<code>rsync -avv /abc/def/ serverB:/abc/def/</code>
unixadmintips.txt:      * login to serverB<code>rsync -avv serverA:/abc/def/ /abc/def/</code>
unixprinting.txt:  - Login to pcdcunxlxap03 and invoke the utility<code>sudo /usr/local/scripts/prtmgr/UPQMS</code> It is menu driven no more documentation required.
unixprintqmgmt.txt:  - Login to pcdcunxlxap03 as root<code>/root/UPQMS</code>
unixtricks.txt:  - AIX sometimes gives an RMC error when you try to DLPAR. When that happens, do this on AIX<code>sudo /usr/sbin/rsct/bin/rmcctrl -z
unixtricks.txt:sudo /usr/sbin/rsct/bin/rmcctrl -p</code>
unixtricks.txt:  - If you have a corrupted block and you cannot copy, then you could potentially use this command  to copy the file ignoring the errors<code>sudo dd if=/directory/filename of=/directory/file2 bs=4096 conv=notrunc,noerror</code>
unixtricks.txt:    - Unmount all filesystems on a system(AIX)<code>lsvg -o | grep -v rootvg | xargs -n1 lsvgfs | sort -r | xargs -n1 sudo umount</code>
unixtricks.txt:    - Print the second column in a comma "," delimited file<code>awk -F"," '{print $2}' filename</code>
unixtricks.txt:    - Print LPs of a LV from 0007 through 0014<code>lslv -m fslv20 | sed -n "/^0007/,/^0014/"p</code>
unixtricks.txt:    - First eject the cdrom from the linux system<code>sudo eject /dev/cdrom</code>Login to the the VSphere Client and then change the device to Client Device on VM
update-pure-odm.txt:<code>  lslpp -l devices.fcp.disk.pure.flasharray.mpio.rte </code>
update-pure-odm.txt:<code> lsdev -Ccdisk | head -4 </code>
update-pure-odm.txt:<code> sudo mkdir -p /mnt/updates ; sudo mount pgnmsv01:/prod/images/storage /mnt/updates </code> 
update-pure-odm.txt:    - Remove the OLD Pure ODM device Driver before installation <code> sudo sudo installp -u devices.fcp.disk.pure.flasharray.mpio.rte </code>
update-pure-odm.txt:    - Install the NEW Pure ODM Device Driver  <code>sudo installp -acxd /mnt/updates/PureODM/1.0.0.7/devices.fcp.disk.pure.flasharray.mpio.rte all</code> 
update-pure-odm.txt:    - Unmount the carrier  <code>sudo umount /mnt/updates </code>
update-pure-odm.txt:    - Double check installation <code> lslpp -l devices.fcp.disk.pure.flasharray.mpio.rte </code>  
update-pure-odm.txt:    - Set hcheck_interval to 30 sec. <code> lsdev -Ccdisk | grep "PURE MPIO Drive" | awk '{print $1}' | xargs -n1 sudo chdev -a hcheck_interval=30 -Pl </code>  
update-pure-odm.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  <code> /usr/sbin/rmnfsexp -d '/prod/images/service-packs/LATEST-SSL-SSH' '-B' </code>
update_blade_firmware.txt:    * JS22<code>sudo rsync -avv /prod/images/Microcode/Blade_Center/Blade_Bios/JS22/latest/ <servername>:/tmp/firmware/</code>
update_blade_firmware.txt:    * PS700<code>sudo rsync -avv /prod/images/Microcode/Blade_Center/Blade_Bios/PS700/latest/ <servername>:/tmp/firmware/</code>
update_blade_firmware.txt:  * On the server find out the firmware filename<code>sudo ls -ld /tmp/firmware/*.img</code>**Make a note of the filename**
update_blade_firmware.txt:  * To Upgrade Firmware on Blades running VIOS logon as padmin.<code>ldfware -file /tmp/firmware/<filename></code>
update_blade_firmware.txt:  * To upgrade firmware on non VIOS Blades<code>sudo /usr/lpp/diagnostics/bin/update_flash -f /tmp/firmware/<filename></code>
update_blade_firmware.txt:  * Cleanup the temporary files<code>sudo rm -rf /tmp/firmware</code>
updateemcodm.txt:    - Lincolnshire<code>mkdir -p /mnt/emc ; mount ptnmsv01:/prod/images/EMC/ODM /mnt/emc</code>
updateemcodm.txt:    - Interexion<code>mkdir -p /mnt/emc ; mount penmsv01:/prod/images/EMC/ODM /mnt/emc</code>
updateemcodm.txt:  - Run update_all<code>install_all_updates -c -d /mnt/emc/$(oslevel)-latest</code>
upgrade-ssl-ssh.txt:<code>  sudo scp -r /usr/local/update {hostname}:/usr/local/ </code>
upgrade-ssl-ssh.txt: Logon to the server to be patchrd and cd to the /usr/local/update directory and run the backup-ssh-ssl.sh script <code> cd /usr/local/update </code> <code> sudo ./backup-ssh-ssl.sh </code>
upgrade-ssl-ssh.txt:    - On the server to be upgraded, <code> /usr/local/update/backup-ssh-ssl.sh </code> Cd to the /usr/local/update direcory and verify that the hstname-SAVED-SSH-timestamp directorywas cuccessfully created <code> cd /usr/local/update </code>
upgrade-ssl-ssh.txt:    - Change directory to the hstname-SAVED-SSH-timestamp direcotey and run the ls -liaR command to verify that the /var/ssl and/etc/ssh directories was succesfully copied.<code>sudo  ls -liatR  </code> The output shoudl look like the following <code> 
upgrade-ssl-ssh.txt:</code>
upgrade-ssl-ssh.txt: - On the Server to be patched, create the target mount point  location<code>sudo mkdir -p /mnt/aixupdates </code>
upgrade-ssl-ssh.txt:    - On the Server to be patched, NFS mount the lppsrc location <code> sudo mount pgnmsv01:/prod/images/service-packs/LATEST-SSL-SSH /mnt/aixupdates </code>  To list all updates that  need to be installed cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to install the updates.
upgrade-ssl-ssh.txt:    - Install the SSL update first <code>sudo installp -aXYd OpenSSL/VRMF-1.0.2.1300_1.0.2m/openssl-1.0.2.1300 openssl</code> The output should look like the following<code> +-----------------------------------------------------------------------------+
upgrade-ssl-ssh.txt:</code>
upgrade-ssl-ssh.txt:    - Install the iFix for ssl <code> sudo emgr -e OpenSSL/VRMF-1.0.2.1300_1.0.2m/iFix/openssl_fix25/102m_ifix.180105.epkg.Z</code> Output should be success<code>Operation Summary
upgrade-ssl-ssh.txt:</code>
upgrade-ssl-ssh.txt:    - Install the SSH update x <code>sudo installp -aXYd OpenSSH/OpenSSH_7.5.102.1100/OpenSSH_7.5.102.1100 openssh </code> A success full installation output shoudl look like this <code> +-----------------------------------------------------------------------------+
upgrade-ssl-ssh.txt:</code>
upgrade-ssl-ssh.txt:    -Execute the following commands to add the  DSA patch to the sshd_config file <code>echo "" | sudo tee -a /etc/ssh/sshd_config
upgrade-ssl-ssh.txt:</code>
upgrade-ssl-ssh.txt:    -Execute the following command to add the  DSA patch to the ssh_config file <code> echo "PubkeyAcceptedKeyTypes=+ssh-dss"  | sudo tee -a  /etc/ssh/ssh_config </code>
upgrade-ssl-ssh.txt:    - Restart SSH to activate the update and the changes to the sshd_config file <code> sudo stopsrc -s sshd </code> <code> sudo startsrc -s sshd </code> 
upgrade-ssl-ssh.txt:  - Unmount the file system <code> cd; sudo umount /mnt/aixupdates</code>
upgrade-ssl-ssh.txt:  - On the NIM Server, remove the exported lppsource file system from the exports list  <code> /usr/sbin/rmnfsexp -d '/prod/images/service-packs/LATEST-SSL-SSH' '-B' </code>
upgrade-ssl-ssh.txt-FIRST-EDITION:<code>  sudo scp -r /usr/local/update {hostname}:/usr/local/ </code>
upgrade-ssl-ssh.txt-FIRST-EDITION: Logon to the server to be patchrd and cd to the /usr/local/update directory and run the backup-ssh-ssl.sh script <code> cd /usr/local/update </code> <code> sudo ./backup-ssh-ssl.sh </code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    - On the server to be upgraded, <code> /usr/local/update/backup-ssh-ssl.sh </code> Cd to the /usr/local/update direcory and verify that the hstname-SAVED-SSH-timestamp directorywas cuccessfully created <code> cd /usr/local/update </code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    - Change directory to the hstname-SAVED-SSH-timestamp direcotey and run the ls -liaR command to verify that the /var/ssl and/etc/ssh directories was succesfully copied.<code> ls -liatR  </code> The output shoudl look like the following <code> 
upgrade-ssl-ssh.txt-FIRST-EDITION:</code>
upgrade-ssl-ssh.txt-FIRST-EDITION: - On the Server to be patched, create the target mount point  location<code>sudo mkdir -p /mnt/aixupdates </code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    - On the Server to be patched, NFS mount the lppsrc location <code> sudo mount pgnmsv01:/prod/images/service-packs/LATEST-SSL-SSH /mnt/aixupdates </code>  To list all updates that  need to be installed cd to the directory you just mounted<code> cd /mnt/aixupdates; ls </code> Use the code that follows to install the updates.
upgrade-ssl-ssh.txt-FIRST-EDITION:    - Install the SSL update first <code>sudo installp -aXYd OpenSSL/VRMF-1.0.2.1300_1.0.2m/openssl-1.0.2.1300 openssl</code> The output should look like the following<code> +-----------------------------------------------------------------------------+
upgrade-ssl-ssh.txt-FIRST-EDITION:</code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    - Install the SSH update x <code>sudo installp -aXYd OpenSSH/VRMF-7.5.102.1100/OpenSSH_7.5.102.1100 openssh </code> A success full installation output shoudl look like this <code> +-----------------------------------------------------------------------------+
upgrade-ssl-ssh.txt-FIRST-EDITION:</code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    -Execute the following commands to add the  DSA patch to the sshd_config file <code>echo "" | sudo tee -a /etc/ssh/sshd_config
upgrade-ssl-ssh.txt-FIRST-EDITION:</code>
upgrade-ssl-ssh.txt-FIRST-EDITION:    - Restart SSH to activate the update and the changes to the sshd_config file <code> sudo stopsrc -s sshd </code> <code> sudo startsrc -s sshd </code> 
upgrade-ssl-ssh.txt-FIRST-EDITION:  - Unmount the file system <code> cd 
upgrade-ssl-ssh.txt-FIRST-EDITION:sudo umount /mnt/aixupdates</code>
upgrade-ssl-ssh.txt-FIRST-EDITION:  - On the NIM Server, remove the exported lppsource file system from the exports list  <code> /usr/sbin/rmnfsexp -d '/prod/images/service-packs/LATEST-SSL-SSH' '-B' </code>
upgrade-to-vios-2.2.2.3.txt:To check for loaded images, run the following command:<code>lsvopt</code>
upgrade-to-vios-2.2.2.3.txt:To unload media images, run the following commands on all Virtual Target Devices that have loaded images.<code>unloadopt -vtd <file-backed_virtual_optical_device ></code>
upgrade-to-vios-2.2.2.3.txt:To verify that all media are unloaded, run the following command again.<code>lsvopt</code> The command output should show No Media for all VTDs.
upgrade-to-vios-2.2.2.3.txt:  - Log in to the VIOS as the user padmin.  If you use one or more File Backed Optical Media Repositories, you need to unload media images before you apply the Update Release. If you use Shared Storage Pools(**we do not use this**), then Shared Storage Pool Services must be stopped.<code>clstartstop -stop -n <cluster_name> -m <hostname></code>
upgrade-to-vios-2.2.2.3.txt:  - Mount the remote directory onto the Virtual I/O Server.<code>mount remote_machine_name:directory /mnt </code>
upgrade-to-vios-2.2.2.3.txt:  - Commit previous updates, by running the updateios command. <code>updateios -commit </code>
upgrade-to-vios-2.2.2.3.txt:  - Verify the updates files that were copied, this step can only be performed if the link to openssl was created.  <code> cp /mnt/ck_sum.bff /home/padmin</code> <code> chmod 755 /home/padmin/ck_sum.bff</code> <code> ck_sum.bff /mnt </code>
upgrade-to-vios-2.2.2.3.txt:  - Apply the update by running the updateios command.<code> updateios -accept -install -dev /mnt</code>
upgrade-to-vios-2.2.2.3.txt:  - Run the following command to set authorization for padmin.</code>swrole - PAdmin</code>
upgrade-to-vios-2.2.2.3.txt:  - To load all changes, reboot the VIOS as user padmin .<code> shutdown -force -restart</code>
upgrade-to-vios-2.2.2.3.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.2.3.<code>ioslevel</code>
upgrade-to-vios-2.2.2.3.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.2.3.<code>ioslevel</code>
upgrade-to-vios-2.2.2.3.txt:  - Commit all the updates <code>updateios -commit</code>
upgrade-to-vios-2.2.2.4.txt:To check for loaded images, run the following command:<code>lsvopt</code>
upgrade-to-vios-2.2.2.4.txt:To unload media images, run the following commands on all Virtual Target Devices that have loaded images.<code>unloadopt -vtd <file-backed_virtual_optical_device ></code>
upgrade-to-vios-2.2.2.4.txt:To verify that all media are unloaded, run the following command again.<code>lsvopt</code> The command output should show No Media for all VTDs.
upgrade-to-vios-2.2.2.4.txt:  - Log in to the VIOS as the user padmin.  If you use one or more File Backed Optical Media Repositories, you need to unload media images before you apply the Update Release. If you use Shared Storage Pools(**we do not use this**), then Shared Storage Pool Services must be stopped.<code>clstartstop -stop -n <cluster_name> -m <hostname></code>
upgrade-to-vios-2.2.2.4.txt:  - Mount the remote directory onto the Virtual I/O Server.<code>mount remote_machine_name:directory /mnt </code>
upgrade-to-vios-2.2.2.4.txt:  - Commit previous updates, by running the updateios command. <code>updateios -commit </code>
upgrade-to-vios-2.2.2.4.txt:  - Verify the updates files that were copied, this step can only be performed if the link to openssl was created.  <code> cp /mnt/ck_sum.bff /home/padmin</code> <code> chmod 755 /home/padmin/ck_sum.bff</code> <code> ck_sum.bff /mnt </code>
upgrade-to-vios-2.2.2.4.txt:  - Apply the update by running the updateios command.<code> updateios -accept -install -dev /mnt</code>
upgrade-to-vios-2.2.2.4.txt:  - Run the following command to set authorization for padmin.</code>swrole - PAdmin</code>
upgrade-to-vios-2.2.2.4.txt:  - To load all changes, reboot the VIOS as user padmin .<code> shutdown -force -restart</code>
upgrade-to-vios-2.2.2.4.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.3.4.<code>ioslevel</code>
upgrade-to-vios-2.2.2.4.txt:  - Run the license acept command for all uprdrates <code> updateios linense -accept</code>
upgrade-to-vios-2.2.2.4.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.3.4.<code>ioslevel</code>
upgrade-to-vios-2.2.2.4.txt:  - Commit all the updates <code>updateios -commit</code>
upgrade-to-vios-2.2.4.22.txt:  - Check if rootvg has atleast 30G of free space<code>lsvg rootvg</code>
upgrade-to-vios-2.2.4.22.txt:  - Mount the remote directory onto the Virtual I/O Server.<code>oem_setup_env</code>Then<code>mkdir /mnt
upgrade-to-vios-2.2.4.22.txt:mount 10.0.48.12:/prod/images/vio/vios2/fixpacks /mnt</code>
upgrade-to-vios-2.2.4.22.txt:  - Login as padmin to commit previous updates, by running the updateios command.<code>su - padmin</code><code>updateios -commit</code>
upgrade-to-vios-2.2.4.22.txt:  - Apply the update by running the updateios command.<code>updateios -accept -install -dev /mnt/VIOS_SP_2.2.4.20</code>Rerun it if bos.rte fileset has been upgraded.
upgrade-to-vios-2.2.4.22.txt:  - To load all changes, reboot the VIOS as user padmin .<code> shutdown -force -restart</code>
upgrade-to-vios-2.2.4.22.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.4.20.<code>ioslevel</code>
upgrade-to-vios-2.2.4.22.txt:  - Run the license acept command for all upgrades<code>license -accept</code>
upgrade-to-vios-2.2.4.22.txt:  - Commit all the updates <code>updateios -commit</code>
upgrade-to-vios-2.2.4.22.txt:  - Mount the remote directory onto the Virtual I/O Server.<code>oem_setup_env</code>Then<code>mount 10.0.48.12:/prod/images/vio/vios2/fixpacks /mnt</code>
upgrade-to-vios-2.2.4.22.txt:  - Login to padmin to commit previous updates, by running the updateios command.<code>su - padmin</code><code>updateios -commit</code>
upgrade-to-vios-2.2.4.22.txt:  - Apply the update by running the updateios command.<code>updateios -accept -install -dev /mnt/VIOS_MP_2.2.4.22</code>Rerun it if bos.rte fileset has been upgraded.
upgrade-to-vios-2.2.4.22.txt:  - To load all changes, reboot the VIOS as user padmin .<code> shutdown -force -restart</code>
upgrade-to-vios-2.2.4.22.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.4.22<code>ioslevel</code>
upgrade-to-vios-2.2.4.22.txt:  - Run the license acept command for all upgrades<code>license -accept</code>
upgrade-to-vios-2.2.4.22.txt:  - Commit all the updates <code>updateios -commit</code>
upgrade-to-vios-2.2.5.10.txt:<code>VIOS 2.1.0.0 VIOS 2.1.0.1 VIOS 2.1.1.0 VIOS 2.1.1.10 VIOS 2.1.2.0 VIOS 2.1.2.10
upgrade-to-vios-2.2.5.10.txt:VIOS 2.2.4.21 VIOS 2.2.4.22 VIOS 2.2.4.23 VIOS 2.2.5.0</code>
upgrade-to-vios-2.2.5.10.txt:  - Please ensure that your rootvg contains at least 30GB free space<code>lsvg rootvg</code>
upgrade-to-vios-2.2.5.10.txt:    - Disable the alt_disk_copy script<code>sudo touch /var/adm/do_not_run_alt_disk_until_removed_tenneco</code>
upgrade-to-vios-2.2.5.10.txt:    - On the server to be patched, find out the NIM server<code>grep mksysb /var/adm/.information
upgrade-to-vios-2.2.5.10.txt:mksysbhost:pgnmsv01</code>In this case, it is pgnmsv01
upgrade-to-vios-2.2.5.10.txt:    - Login to the NIM server we figured out above, make sure a latest copy of mksysb image backup exists<code>sudo ls -l /mksysb-images/bos.obj.<hostname>.gz</code>**Check the timestamp on the file, it has to be less than 3 days old.**  If the mksysb is 3 days old or less Proceed to Step 4
upgrade-to-vios-2.2.5.10.txt:    - On the server to be upgraded create a new mksysb image. When the command has completed proceed to next step<code>sudo /usr/local/scripts/mksysb.sh adhoc</code>
upgrade-to-vios-2.2.5.10.txt:  - On NIM server copy the mksysb image to the repository.<code>sudo cp -p /mksysb-images/bos.obj.<hostname>.gz /preupgrade/mksysb/</code>
upgrade-to-vios-2.2.5.10.txt:    - Find the altinst_rootvg disk <code> lspv | grep altinst_rootvg </code> and set the boot list so the server boots from it<code> bootlist -m normal -o {hdisk from previous command}</code>
upgrade-to-vios-2.2.5.10.txt:  - Perform a reboot at this time<code>sudo shutdown -Fr</code>Verify that the server has booted correctly to the alternate disk. 
upgrade-to-vios-2.2.5.10.txt:  - Reset the bootlist or boot back to the original disk and reboot.<code>lspv | grep old_rootvg </code> and set the boot list so the server boots from it<code> bootlist -m normal -o {hdisk from previous command}</code> and boot back to it <code>sudo shutdown -Fr</code>
upgrade-to-vios-2.2.5.10.txt:    - Login to the respective VIO server and execute this command.<code>oem_setup_env</code>
upgrade-to-vios-2.2.5.10.txt:    - Create a link to openssl<code>ln -s /usr/bin/openssl /usr/ios/utils/openssl</code>
upgrade-to-vios-2.2.5.10.txt:    - Verify the link to openssl was created<code>ls -alL /usr/bin/openssl /usr/ios/utils/openssl</code>
upgrade-to-vios-2.2.5.10.txt:    - Both files should display similar owner and size and then exit<code>exit</code>
upgrade-to-vios-2.2.5.10.txt:  - Create a directory and Mount the remote directory onto the Virtual I/O Server<code>sudo mkdir -p /mnt/viosupdates</code>Then<code>sudo mount 10.0.48.12:/prod/images/vio/vios2/fixpacks /mnt/viosupdates</code>
upgrade-to-vios-2.2.5.10.txt:  - Login as padmin user and commit previous updates by running the updateios command<code>sudo su - padmin</code><code>updateios -commit</code>
upgrade-to-vios-2.2.5.10.txt:  - Install the updates by running the updateios command.<code>updateios -accept -install -dev /mnt/viosupdates/VIOS_FP_2.2.5.10</code>**NOTE: Depending on the VIOs level, one or more of the LPPs below may be reported as "Missing Requisites", and they may be ignored.**<code> MISSING REQUISITES:
upgrade-to-vios-2.2.5.10.txt:bos.svprint.rte 6.1.9.200             # Fileset Update</code>
upgrade-to-vios-2.2.5.10.txt:  - To activate the changes, reboot the VIOS server as user padmin .<code>shutdown -force -restart</code>
upgrade-to-vios-2.2.5.10.txt:  - Verify that the update was successful by checking the results of the updateios command and by running the ioslevel command, which should indicate that the ioslevel is now 2.2.5.10.<code>ioslevel</code>
upgrade-to-vios-2.2.5.10.txt:  - Accept the license command for all upgrades<code>license -accept</code>
upgrade-to-vios-2.2.5.10.txt:  - Commit all the updates <code>updateios -commit</code>
upgrade-to-vios-2.2.5.10.txt:  - Validate the paths are online for all the guests running on that frame<code>for host in host1 host2 host3
upgrade-to-vios-2.2.5.10.txt:done</code>
upgrade-to-vios-2.2.5.10.txt:  - Capture a snap of the upgraded VIOS system, and send it to IBM to generate iFixes<code>sudo su - padmin</code><code>snap -r</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Find out the rootvg<code>lspv | grep rootvg
upgrade-to-vios-2.2.5.10internaldisks.txt:hdiskx          00021ffb513aff90                    rootvg          active</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Unmirror the VG<code>sudo unmirrorvg rootvg hdiskX</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Remove the disk from rootvg<code>sudo reducevg rootvg hdiskX</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Clear the VGDA<code>sudo chpv -c hdiskX</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Set the bootlist to boot from the remaining disk<code>sudo bootlist -m normal hdiskY</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Perform an alt_disk_copy to the alt_rootvg<code>sudo alt_disk_copy -B -d hdiskX</code>
upgrade-to-vios-2.2.5.10internaldisks.txt:  - Check altinsta_rootvg has been created<code>lspv | grep rootvg</code>Make sure you see the altinst_rootvg in the output
upgrade-to-vios-2.2.5.10sandisks.txt:        - Find out the alt_disk<code>lspv | grep rootvg
upgrade-to-vios-2.2.5.10sandisks.txt:hdiskx          00021ffb513aff90                    altinst_rootvg</code>In this case hdisk1 is the alternate boot disk.
upgrade-to-vios-2.2.5.10sandisks.txt:        - Remove the current alt_disk_rootvg<code>sudo alt_rootvg_op -X altinst_rootvg</code>
upgrade-to-vios-2.2.5.10sandisks.txt:        - Create a fresh alt_disk_copy<code>sudo alt_disk_copy -B -d hdiskX</code>-B option makes sure that it does not execute a bootlist - FYI.
upgrade-to-vios-2.2.5.10sandisks.txt:        - Check altinsta_rootvg has been created<code>lspv | grep rootvg</code>Make sure you see the altinst_rootvg in the output
upgrade-to-vios-2.2.6.32.txt:  - Commit previous updates, by running the updateios command. <code>updateios -commit </code>
upgrade-to-vios-2.2.6.32.txt:  - Verify no maps are in place. <code> lsmap -all </code>
upgrade-to-vios-2.2.6.32.txt:  - Exit thte restricted shell <code> oem-setup_env> </code> <code> set -o vi </code> 
upgrade-to-vios-2.2.6.32.txt:  - Change to the /usrlocal/sbin directory  <code> oem_setup_env </code> <code> set -o vi </code> <code> cd /usr/local/sbin </code>
upgrade-to-vios-2.2.6.32.txt:  - Run the checkit script to check VIOS recomended Adapter settings. <code> ./checkit </code> The last line of the output should be similiar to the following.  <code> taprvio110 - CHECKIT completed without issue on Mon Dec 10 11:07:36 CST 2018 </code> If there are any recomendatains run the setit script to correct the settings <code> ./setit </code> Reexecute the checkit script to comdirm that all settings have been updated. 
upgrade-to-vios-2.2.6.32.txt:  - Execute the following script to get the boot disk information. Make a note/save it, you will need later in the installation process. <code> ./get-bootdisk.sh </code> The output will look simiiar to this <code>uname -a
upgrade-to-vios-2.2.6.32.txt:U78A5.001.WIH27C3-P1-C7-L1-T2-W500601653EE01288-L0 </code> This is also captured in the snap output below. it i easier to have it readly availale instead of looking it up.
upgrade-to-vios-2.2.6.32.txt:  - Run the pre_upgrade_snapit.sh command.  This creates a "snap" of the VIOS server. <code> pre_upgrade_snapit.sh </code> The output will be in tHe /usr/local/logs directory and will be in the format Pre_upgrade-{host name}-snapit.   
upgrade-to-vios-2.2.6.32.txt:  - Create a backup of the VIOS infrastructure. This will be used to restore the network etc. after the upgrade. <code> pre_upgrade_viosbr.sh </code> The output will be in the /home/padmin/cfgbackups directory and will be in the format Pre_upgrade-{host name}-viosbr.tar.gz
upgrade-to-vios-2.2.6.32.txt:  - Verify the viosbr <code> viosbr -restore -file /home/padmin/cfgbackups/Pre_upgrade-{host name}-viosbr.tar.gz </code>
upgrade-to-vios-2.2.6.32.txt:  - copy the  snap and viodbr files to the repository. You will need to copy the viosbr output back to the system being upgraded after the upgrade has completed. Adjust toe folloing command accordingly. <code> sudo scp ${host2patch}:/usr/local/logs/Pre_upgrade-${host2patch}-snapit /preupgrade/reports/Pre_upgrade-${host2patch}-snapit </code> <code> sudo scp ${host2patch}:/home/padmin/Pre_upgrade-${host2patch}-viosbr.tar.gz /preupgrade/reports/Pre_upgrade-${host2patch}-viosbr.tar.gz </code>
upgrade-to-vios-2.2.6.32.txt:  - Check and clear any errors in the error report <code> errpt </code> If there are errors then clean them <code> errclear 00 </code>
upgrade-to-vios-2.2.6.32.txt:  - Note the adapter that has the server ip address assigned to it. <code> ifconfig -a </code> Output should resemble the following <code>taprvio110[/home/padmin] ># ifconfig -a
upgrade-to-vios-2.2.6.32.txt:         tcp_sendspace 131072 tcp_recvspace 131072 rfc1323 1</code>
upgrade-to-vios-2.2.6.32.txt:  - Check SEA adapter and put it into backup mode <code> ./chksea |grep SEA | awk -F: '{print $2}'</code> <code> chdev -l {output from previous comand} -a ha_mode=standby </code> 
upgrade-to-vios-2.2.6.32.txt:  - Verifty the SEA is in standby mode <code> lsattr -El {SEA from previous command} | grep ha_mode </code> Output should be similiar to the following <code> ha_mode       standby     High Availability Mode</code>
upgrade-to-vios-2.2.6.32.txt:  - Shutdown the VIOS server <code> shutdown </code> 
upgrade-to-vios-2.2.6.32.txt:  - Update the console database. Login to pgnmsv01<code>sudo vi /prod/images/etc/unix_sys_console</code>Make an entry similar to this<code>taprvio3:blade-ibm:tgprbld1:1:root</code>
upgrade-to-vios-2.2.6.32.txt:  - Login to the respective NIM server and if this is a NEW VIOS server define the VIO server as a NIM client<code>sudo nim -o define -t standalone -a \
upgrade-to-vios-2.2.6.32.txt:platform=chrp -a if1="find_net <vioservername> 0" -a netboot_kernel=mp <viosservername></code>
upgrade-to-vios-2.2.6.32.txt:  - Prepare the NIM client(VIO server) for a NIM bosinst operation<code>sudo nim -o bos_inst -a source=mksysb -a spot=vios_2_2_6_32_spot -a \
upgrade-to-vios-2.2.6.32.txt:no_client_boot=yes -a mksysb=vio-2-2-6-32-gold <vioservername></code>
upgrade-to-vios-2.2.6.32.txt:  - Login to pgnmsv01 and open a console session to the VIO server<code>sudo getconsole <vioservername></code>
upgrade-to-vios-2.2.6.32.txt:  - After the installation the server will reboot. login as padmn and run the followning command <code> license -accept </code> 
upgrade-to-vios-2.2.6.32.txt:  - Exit the restricted shell <code> oem_setup_env </code> <code> set -o vi </code>
upgrade-to-vios-2.2.6.32.txt:  - Export the host name of the server being patched <code> export  host2patch=<host> </code>
upgrade-to-vios-2.2.6.32.txt:  - Log on to the NIM server and copy the viosbr backup you saved in the Pre_upgrade section from /preupgrade/reports/Pre_upgrade-${host2patch}-viosbr.tar.gz to the server you are upgrading <code> scp /preupgrade/reports/Pre_upgrade-${host2patch}-viosbr.tar.gz {host2patch}:/home/padmin/cfgbackups/Pre_upgrade-${host2patch}-viosbr.tar.gz </code>
upgrade-to-vios-2.2.6.32.txt:  - Log back on to the VIOS server being patched as padmin and execute the following command <code>viosbr -restore -file /home/padmin/cfgbackups/Pre_upgrade-${host2patch}-viosbr.tar.gz </code> This creates the initial devices
upgrade-to-vios-2.2.6.32.txt:  - Shutdown and restart the server <code> shutdown -force -restart </code>
upgrade-to-vios-2.2.6.32.txt:  - Run the viosbr resotore command again <code> viosbr -restore -file /home/padmin/cfgbackups/Pre_upgrade-${host2patch}-viosbr.tar.gz </code>  This brings in the virtual devices. 
upgrade-to-vios-2.2.6.32.txt:  - Shutdown and restart the server <code> shutdown -force -restart </code>
upgrade-to-vios-2.2.6.32.txt:  - Run the viosbr resotore command again <code> viosbr -restore -file /home/padmin/cfgbackups/Pre_upgrade-${host2patch}-viosbr.tar.gz </code>  This brings in the remaining SEA devices 
upgrade-to-vios-2.2.6.32.txt:  - Exit the restricted shell <code> oem_setup_env </code> <code> set -o vi </code> Check the status of the SEA and reset it. <code> /usr/local/sbin/chksea |grep SEA | awk -F: '{print $2}'</code>
upgrade-to-vios-2.2.6.32.txt:  - <code>chdev -l {SEA from above command} -a ha_mode=sharing</code>
upgrade-to-vios-2.2.6.32.txt:  - Run the checkit command, it should retrun with no errors <code> /usr/local/sbin/checkit </code>
upgrademksysb.txt:  - Define the target server **xagi3p01** on NIM<code>nim -o define -t standalone -a platform=chrp \
upgrademksysb.txt:xagi3p01</code>
upgrademksysb.txt:  - Deallocate any resources that might have been defined<code>nim -o deallocate -a subclass=all xagi3p01</code>
upgrademksysb.txt:  - Reset the server<code>nim -o reset -aforce=yes xagi3p01</code>
upgrademksysb.txt:  - Create a /prod/images/bosinst.data/aixmigration-bosinst.data file as follows.<code>control_flow:
upgrademksysb.txt:        HDISKNAME =</code>
upgrademksysb.txt:  - Select the correct disk<code>target_disk_data:
upgrademksysb.txt:        HDISKNAME =</code>PVID is the best way to identify the disk. You can do a NIM boot using a Spot to list the disks and if needed allocate a pvid to the root disk.
upgrademksysb.txt:    - From pgnmsv01<code>nim -o maint_boot -a spot=610TL07-05_spot xagi3p02</code>Boot the system to recovery and secure the pvid
upgrademksysb.txt:  - Define a bosinst_data resource<code>nim -o define -t bosinst_data -a server=master -a location=/prod/images/bosinst.data/aixmigration-bosinst.data aixmigration-bosinst</code>
upgrademksysb.txt:  - Allocate the mksysb resource<code>nim -o allocate -a mksysb=mksysb-dagi3p01 xagi3p01</code>
upgrademksysb.txt:  - Perform an rte install<code>nim -o bos_inst -a bosinst_data=aixmigration-bosinst -a source=rte -a spot=610TL07-05_spot -a lpp_source=610TL07-05_lppsrc -a no_client_boot=yes -a accept_licenses=yes -a script=postinstallCloning xagi3p01</code>
upgrademksysb.txt:  - Login to the NIM server and perform a NIM client cleanup<code>sudo nim -F -o reset <hostname>
upgrademksysb.txt:sudo nim -o deallocate -a subclass=all</code> 
usb_file_system.txt:  - The following lpp's need to be installed on the server <code> lslpp -L devices.usbif.08025002.rte </code> <code> lslpp -L devices.common.IBM.usb.rte </code> 
usb_file_system.txt:  - Plug the USB drive / device and run cfgmgr to bring the device into the server  <code> cfgmgr -v </code>
usb_file_system.txt:  - Make a mount point <code> mkdir /usb_mnt </code>
usb_file_system.txt:  - Make in line log file system on USB <code> mkfs -olog=INLINE,ea=v2 -Vjfs2 /dev/usbms0 </code> 
usb_file_system.txt:  - Mount the USB File System <code> mount -V jfs2 -o log=/dev/usbms0 /dev/usbms0 /usb_mnt </code>
usb_file_system.txt:  - Run config manager  Manager to discover USB device <code> sudo cfgmgr -v </code>
usb_file_system.txt:  - Make a mount point <code> sudo mkdir /usb_mnt </code>
usb_file_system.txt:  - Mount the USP File System <code>sudo mount -V jfs2 -o log=/dev/usbms0 /dev/usbms0 /usb_mnt </code>
usersandgroups.txt:  * Create these users<code>sudo mkgroup "id=8086" taunix
usersandgroups.txt:</code>
usersandgroups.txt:  * Create these users<code>sudo groupadd -g 8086 taunix
usersandgroups.txt:</code>
v240rsc.txt:  - Configure the network on RSC. Login as root<code>/usr/platform/`uname -i`/sbin/scadm set if_network true
v240rsc.txt:/usr/platform/`uname -i`/sbin/scadm set netsc_ipgateway 10.34.64.1</code>
v240rsc.txt:  - Check the settings<code>/usr/platform/`uname -i`/sbin/scadm show | grep netsc</code>
v240rsc.txt:  - Set password for the admin user<code>/usr/platform/`uname -i`/sbin/scadm  userpassword admin</code>
v240rsc.txt:  - Reset the ALOM using this command<code>/usr/platform/`uname -i`/sbin/scadm resetrsc</code>
v240rsc.txt:  - Use the console command to get to the console<code>console</code>or<code>console -f</code>
v240rsc.txt:  - Some useful commands are<code>poweron
v240rsc.txt:flashupdate</code>
v240rsc.txt:  - You may need to take the system down to redefine the console sometimes and at the ok prompt<code>diag-console rsc
v240rsc.txt:setenv output-device rsc-console</code>OR do this so the next reboot will take care of it<code>eeprom input-device=rsc-console
v240rsc.txt:eeprom output-device=rsc-console</code>
v71-aixmigration.txt:  - Define the NIM client<code>sudo nim -o define -t standalone -a platform=chrp -a if1="find_net peerap09 0" -a netboot_kernel=mp peerap09</code>
v71-aixmigration.txt:  - Login to the respective NIM server (penmsv01. Note that pgnmsv01 must be used for all systems other than the systems in Interexion). Define a variable with the target servername.<code>export nimclient_to="taerm057"</code>Change the hostname accordingly.
v71-aixmigration.txt:  - Export the v7100-02-02 NFS EFixes from pgnmsv01<code>sudo exportfs -i /prod/images/service-packs/7100-02-02-1316-efixes</code>
v71-aixmigration.txt:  - Prepare the NIM environment for the migration<code>sudo nim -o bos_inst -a source=rte -a lpp_source=710TL02-02_lppsrc -a spot=710TL02-02_spot -a no_client_boot=yes -a accept_licenses=yes ${nimclient_to}</code>
v71-aixmigration.txt:  - At this menu, change the language to the correct one. Set Option 5. "Selece Edition: to standard, and select the right disk Make sure you CHECK THE LANGUAGE Environment  (option 2) You should have checked this during the "Perform the configuration backup section"<code>                            Installation and Settings
v71-aixmigration.txt:>>> Choice [0]:</code>
v71-aixmigration.txt:  - At this installation menu, choose **1**<code>                            Migration Installation Confirmation
v71-aixmigration.txt:>>> Choice [1]:</code>
v71-aixmigration.txt:  - At this menu choose **0**<code>                                  Migration Confirmation
v71-aixmigration.txt:>>> Choice[0]:</code>Ignore the error like this if installing a system outside of Lincolnshire<code>nim_rcmd: getaddrinfo: Hostname and service name not provided or found
v71-aixmigration.txt:   0042-006 nimclient: (To_Master) rcmd Error 0</code>
v71-aixmigration.txt:  - The system reboots after the install. Check the oslevel<code>oslevel -s
v71-aixmigration.txt:7100-02-02-1316</code>
v71-aixmigration.txt:  - Restore the SSH host & root keys you should have saved in Step 2 "Perform the configuration backup"<code>sudo /tmp/Pre_Upgrade/aix_upgrade/./RUNIT ./copy-etcssh-keys.sh</code>
v71-aixmigration.txt:  - Install any EFIXES on the lppsrc.<code>sudo mkdir -p /mnt/Efix ;sudo mount pgnmsv01:/prod/images/service-packs/7100-02-02-1316-efixes /mnt/Efix</code><code>cd /mnt/Efix/NFS-EFIX</code><code>./install.sh</code>
v71-aixmigration.txt:  - Rboot the server as rquired by the Efix installation<code>sudo shutdown -Fr</code>
v71-aixmigration.txt:  - After server reboots checkfor successfull Efix Installation<code>sudo emgr -P</code>Results should be <code>
v71-aixmigration.txt:</code>
v71-aixmigration.txt:    - Login to NIM server pgnmsv01, reset the NIM client and de-allocate all resources<code>nim -F -o reset taerm057
v71-aixmigration.txt:nim -o deallocate -a subclass=all {server you just upgraded}</code>
v71-aixmigration.txt:    - Login to the local server where we setup the temporary NFS server and unexport the filesystems<code>exportfs -u /prod/nim/resources/spot/710TL02-02_spot/usr
v71-aixmigration.txt:exportfs -u /export/nim/scripts/{server you just upgraded}.script</code>
v71-aixmigration.txt:  - Login to the NIM server and perform a NIM client cleanup<code>sudo nim -F -o reset <hostname>
v71-aixmigration.txt:sudo nim -o deallocate -a subclass=all</code>
vhostss.txt:  - List the available virtual adapters<code>lshwres -r virtualio --rsubtype scsi -m ETS-9179-MHB-SN06E6B85</code>
vhostss.txt:  - Add a virtual adapter<code>chhwres -r virtualio -m ETS-9179-MHB-SN06E6B85 -o a -p taprvio50 --rsubtype scsi -s 53 -a "adapter_type=server,remote_lpar_id=any,remote_slot_num=any"</code>
vio.txt:  * Create an SEA adapter <code>mkvdev -sea <etherchannel> -vadapter <virtual_ent> -default <virtual_ent> -defaultid <pvid> -attr ha_mode=auto ctl_chan=<virtual_ctrl_channel> netaddr=<def_gateway>
vio.txt:mkvdev -sea ent17 -vadapter ent21 -default ent21 -defaultid 49 -attr ha_mode=auto ctl_chan=ent19 netaddr=10.0.49.1</code>
vio.txt:  * Assign IP address to the Primary SEA interface <code>mktcpip -hostname <hostname> -inetaddr <ip_addr> -interface <sea_ent> -netmask <mask> -gateway 10.0.49.1 -start
vio.txt:mktcpip -hostname taprvio50 -inetaddr 10.0.49.49 -interface en23 -netmask 255.255.255.0 -gateway 10.0.49.1 -start</code>
vio.txt:  * Assign IP address to additional interfaces <code>mktcpip -hostname <hostname> -inetaddr <ip> -interface <sea> -netmask <mask> </code>
vio.txt:  * List all disks allocated to a vhost <code>lsmap -vadapter <vhostname> </code>
vio.txt:  * List all virtual disks configuration <code>/usr/local/scripts/lsdiskcfg</code>
vioclusterbuild.txt:Turn dynamic tracking on, fine tune the number of commands and other s<code>chdev -l fscsi0 -a dyntrk=yes</code>
vioclusterbuild.txt:Or if it is direct conencted, apply teh changes to ODM only. ( Needs reboot ) <code># chdev -Pl fscsi0 -a dyntrk=yes -a fc_err_recov=fast_fail
vioclusterbuild.txt:</code>
vioclusterbuild.txt:For DMX3/4 <code>
vioclusterbuild.txt:</code>
vioclusterbuild.txt:Paging <code>
vioclusterbuild.txt:</code>
vioclusterbuild.txt:Change the priority on vSCSI , Make sure odd and even hdisks are balanced across the vSCSIs.<code>
vioclusterbuild.txt:chpath -l hdisk0 -p vscsi0 -a priority=2</code>
vioclusterbuild.txt:<code>rmdev -dev vhost1 -ucfg -recursive
vioclusterbuild.txt:</code>
vioclusterbuild.txt:<code>
vioclusterbuild.txt:</code>
vioclusterbuild.txt:<code>root on xeerdb21:/root>for dev in $(lspv | awk '{print $1}')
vioclusterbuild.txt:</code>
vioclusterbuild.txt:  * Capture and document VTD mappings<code>padmin on taprvio20:/home/padmin>viosbr -backup -file backup.today
vioclusterbuild.txt:Backup of this node(taprvio20) successfull</code>
vioclusterbuild.txt:  * Turn pprootdev off<code>pprootdev fix</code>
vioclusterbuild.txt:  * Unmap the devices from VIO server<code>for DEV in `lsmap -all | grep -i backing | awk '{print $NF}' `
vioclusterbuild.txt:vtscsi3 deleted</code>
vioclusterbuild.txt:  * Check powerpath adapters <code> powermt display
vioclusterbuild.txt:   1 fscsi1                        optimal      14      0       -     0      0</code>
vioclusterbuild.txt:  * Put he HBA on standby mode <code>powermt set mode=standby hba=0
vioclusterbuild.txt:   1 fscsi1                    hdisk26   FA  7aA   active  alive      0      0</code>
vioclusterbuild.txt:  * Remove the HBA from powerpath <code># powermt remove hba=0
vioclusterbuild.txt:Proceed? [y|n|a|q] a</code>
vioclusterbuild.txt:  * rmdev -dl on fcs0 <code> # rmdev -R -dl fcs0
vioclusterbuild.txt:</code>
vioclusterbuild.txt:  * Replace the adapter do the magic . And run cfgmgr <code>cfgmgr</code>
vioclusterbuild.txt:  * Set reserve lock off on all shared LUNs (hdiskpower). <code># for dev in hdiskpower8 hdiskpower9 hdiskpower12 hdiskpower13
vioclusterbuild.txt:hdiskpower13 changed</code>
vioclusterbuild.txt:  * Check the reserve_lock and push the vio mappings <code>viosbr -restore -type vscsi -file backup.tod</code>
vioclusterbuild.txt:  * Unconfigure the hdiskpower devices used as backend devices. As padmin, execute this for all vhosts<code>for vhost in $(lsmap -all | grep ^vhost| awk '{print $1}')
vioclusterbuild.txt:done</code>
vioclusterbuild.txt:  * Reboot <code>shutdown -restart</code>
vioclusterbuild.txt:  * Login to the VIO guest and make sure there are two active paths to each LUN <code>for dev in $(lspv | grep hdisk | awk '{print $1}')
vioclusterbuild.txt:done</code>
vioclusterbuild.txt:  * Delete one of the vscsi completely from the ODM <code>rmdev -dl vscsi0 -R</code>
vioclusterbuild.txt:  * Run cfgmgr <code>cfgmgr</code>
vioclusterbuild.txt:  * Make sure we have two active paths<code>for dev in $(lspv | grep hdisk | awk '{print $1}')
vioclusterbuild.txt:done</code>
vioclusterbuild.txt:  * Delete the second vscsi completely.<code>rmdev -dl vscsi1 -R</code>
vioclusterbuild.txt:  * Make sure we have two active paths<code>for dev in $(lspv | grep hdisk | awk '{print $1}')
vioclusterbuild.txt:done</code> 
vios-recovery.txt:  * This makes IVM Accessable <code>ifconfig en0 <ip> netmask <up>  </code> 
vios-recovery.txt:  * Open a browser window to the VIO server  <code> http://taprvioX </code> Where X is the name of the VIO server 
viosnimsetup.txt:  - Mount the DVD - Volume 1 on the NIM server<code>sudo loopmount -i /prod/images/vio/cd/Virtual_IO_Server_V2.2.2.2_DVD_1_of_2_32013.iso -l loop0 -o "-V cdrfs -o ro" -m /cdrom</code>
viosnimsetup.txt:  - Copy the mksysb files from DVD to NIM server<code>sudo mkdir /temp/tempfs-not-mirrored/vios2.2.2.2</code><code>sudo cp /cdrom/usr/sys/inst.images/mksysb_image* /temp/tempfs-not-mirrored/vios2.2.2.2</code>
viosnimsetup.txt:  - Copy the bosinst.data file from DVD<code>sudo cp /cdrom/bosinst.data /temp/tempfs-not-mirrored/vios2.2.2.2</code>
viosnimsetup.txt:  - Unmount first and mount the DVD - Volume 2 on the NIM server<code>sudo loopumount -l loop0 -m /cdrom</code><code>sudo loopmount -i /prod/images/vio/cd/Virtual_IO_Server_V2.2.2.2_DVD_2_of_2_32013.iso -l loop0 -o "-V cdrfs -o ro" -m /cdrom</code>
viosnimsetup.txt:  - Copy the 3rd mksysb file from DVD to NIM server<code>sudo cp /cdrom/usr/sys/inst.images/mksysb_image /temp/tempfs-not-mirrored/vios2.2.2.2/mksysb_image3</code>
viosnimsetup.txt:  - Combine the mksysb files into one<code>cd /temp/tempfs-not-mirrored/vios2.2.2.2</code><code>sudo su</code><code>
viosnimsetup.txt:cat mksysb_image mksysb_image2 mksysb_image3 > /prod/images/vios/vios-2-2-2-2.mksysb</code>
viosnimsetup.txt:  - Define a mksysb resource pointing to the newly created mksysb file<code>sudo nim -o define -t mksysb -a server=master -a location=/prod/images/vios/vios-2-2-2-2.mksysb vios-2-2-2-2-mksysb</code>
viosnimsetup.txt:  - Create a Spot NIM resource using the mksysb<code>sudo nim -o define -t spot -a server=master -a location=/prod/images/vios/spot -a source=vios-2-2-2-2-mksysb vios-2-2-2-2-spot</code>
viosnimsetup.txt:  - Define the bosinst.data NIM resource<code>sudo cp /temp/tempfs-not-mirrored/vios2.2.2.2/bosinst.data /prod/images/vios/2.2.2.2-bosinst.data</code><code>sudo nim -o define -t bosinst_data -a server=master -a location=/prod/images/vios/2.2.2.2-bosinst.data vios-2-2-2-2-bosinst_data</code>
vioupdatesinstall.txt:  - Latest VIOS updates can be found at <code>pgnmsv01:/prod/images/vio/vios2</code>Inspect the level the current server is at as padmin<code>ioslevel</code>Now update the rest. The fixpacks must be installed prior to interim fixes.
vioupdatesinstall.txt:  - Switch to root and NFS mount the updates directory<code>mkdir -p /mnt/viosupdate
vioupdatesinstall.txt:mount pgnmsv01:/prod/images/vio/vios2/fixpacks /mnt/viosupdate</code>
vioupdatesinstall.txt:  - Install the updates as padmin user<code>updateios -commit
vioupdatesinstall.txt:updateios -accept -dev /mnt/viosupdate/{insert latest VIOS level here}</code>
virtualbox.txt:  - Send control alt delete to a Guest<code>vboxmanage controlvm kaps-win7-vm01 keyboardputscancode 1d 38 53 9d b8 d8</code>In this case the VM's name is "kaps-win7-vm01"
virtualbox.txt:  - Create a route so that an external command can enter and get to the guest<code>VBoxManage setextradata kaps-sol-01 "VBoxInternal/Devices/e1000/0/LUN#0/Config/ssh/HostPort" 2222
virtualbox.txt:VBoxManage setextradata kaps-sol-01 "VBoxInternal/Devices/e1000/0/LUN#0/Config/ssh/Protocol" TCP</code>Now if you ssh to the host machine on port "2222", VirtualBox routes it to the guest's port 22. In this example the guest's name is ''kaps-sol-01'' **You have to power off and power on the Guest for this to take effect.**
virtualboxnotes.txt:  * Add a rule for incoming RDP to robert-winxp-vm01<code>vboxmanage setextradata robert-winxp-vm01 "VBoxInternal/Devices/e1000/0/LUN#0/Config/rdp/HostPort" 3389
virtualboxnotes.txt:vboxmanage setextradata robert-winxp-vm01 "VBoxInternal/Devices/e1000/0/LUN#0/Config/rdp/Protocol" TCP</code>
vmbuildsaphanacluster.txt:  * Change the size of ''Hard disk 2'' to the size needed for these filesystems<code>
vmbuildsaphanacluster.txt:/hana/shared              ?        As per the requirement from Basis</code>
vmbuildsaphanacluster.txt:  * Change the size of ''Hard disk 4'' to the size needed for this filesystem. This is normally equal to the memory of the HANA DB server<code>/hana/data</code>
vmbuildsaphanacluster.txt:  * Change the size of ''Hard disk 5'' to the size needed for this filesystem. This is normally half of memory of the HANA DB server<code>/hana/log</code>
vmware-install.txt:    * Login to unixlogs<code>ssh unixlogs</code>Tail the syslog<code>sudo tail -f /prod/unixlog/syslog/syslog.log | grep <server_name></code>
xaerap02crfslinux.txt:  - Look for data disk<code>sudo fdisk -l | grep ^Disk | grep /dev/sd</code>
xaerap02crfslinux.txt:  - Look for currently used pvs<code>sudo pvs</code>
xaerap02crfslinux.txt:  - Prepare disk for LVM<code>sudo pvcreate -f /dev/sdb</code>
xaerap02crfslinux.txt:  - Create datavg01<code>sudo vgcreate datavg01 /dev/sdb</code>
xaerap02crfslinux.txt:  - Create logical volumes<code>sudo lvcreate -n oracle -L 512MB datavg01
xaerap02crfslinux.txt:sudo lvcreate -n users_unispool -L 2048MB datavg01</code>
xaerap02crfslinux.txt:  - Create filesystems<code>sudo mkfs -t ext4 /dev/datavg01/oracle
xaerap02crfslinux.txt:sudo mkfs -t ext4 /dev/datavg01/users_unispool</code>
xaerap02crfslinux.txt:  - Add to /etc/fstab<code>echo "/dev/mapper/datavg01-oracle   /oracle                    ext4    defaults        1 2" | sudo tee -a /etc/fstab
xaerap02crfslinux.txt:echo "/dev/mapper/datavg01-users_unispool   /users/unispool                    ext4    defaults        1 2" | sudo tee -a /etc/fstab</code>
xaerap02crfslinux.txt:  - Mount the filesystems<code>sudo mkdir -p /oracle
xaerap02crfslinux.txt:sudo mkdir -p /comm</code>
xaerap02crfslinux.txt:  - Change the ownership for filesystems as requested<code>sudo chown oracta:dba /oracle
xaerap02crfslinux.txt:sudo chown unispool:unispool /users/unispool</code>
xaerap02crfslinux.txt:  - Create NFS mounts. Add these lines to /etc/fstab<code>sudo vi /etc/fstab</code>Add these to the end<code>xaerdb03:/sapmnt/CTA/exe /sapmnt/CTA/exe nfs    rsize=8192,wsize=8192,timeo=14,intr,soft,proto=tcp,mountproto=tcp
xaerap02crfslinux.txt:daap3p01:/comm /comm nfs    rsize=8192,wsize=8192,timeo=14,intr,soft,proto=tcp,mountproto=tcp</code>
