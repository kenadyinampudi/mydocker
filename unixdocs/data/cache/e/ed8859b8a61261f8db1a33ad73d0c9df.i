a:60:{i:0;a:3:{i:0;s:14:"document_start";i:1;a:0:{}i:2;i:0;}i:1;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:25:"Installing LPAR2RRD agent";i:1;i:1;i:2;i:1;}i:2;i:1;}i:2;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1;}i:3;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:41;}i:4;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:41;}i:5;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:41;}i:6;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:65:" Login to pgnmsv01 and set a variable to define the target system";}i:2;i:45;}i:7;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:28:"export targethost=<hostname>";i:1;N;i:2;N;}i:2;i:115;}i:8;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:151;}i:9;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:151;}i:10;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:151;}i:11;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:151;}i:12;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:23:" Copy the rpm to target";}i:2;i:155;}i:13;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:84:"scp /prod/images/rpms/lpar2rrd/lpar2rrd-agent-5.05-8.ppc.rpm ${targethost}:/var/tmp/";i:1;N;i:2;N;}i:2;i:183;}i:14;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:275;}i:15;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:275;}i:16;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:275;}i:17;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:275;}i:18;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:38:" Install and configure lpar2rrd agent ";}i:2;i:279;}i:19;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:317;}i:20;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:317;}i:21;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:317;}i:22;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:317;}i:23;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:23:" Login to target system";}i:2;i:323;}i:24;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:17:"ssh ${targethost}";i:1;N;i:2;N;}i:2;i:351;}i:25;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:376;}i:26;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:376;}i:27;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:376;}i:28;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:376;}i:29;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:" Create the user";}i:2;i:382;}i:30;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:140:"sudo /usr/bin/mkuser id=2209 pgrp=staff groups=staff home=/home/lpar2rrd shell=/usr/bin/ksh gecos="Micro partition Data collection" lpar2rrd";i:1;N;i:2;N;}i:2;i:403;}i:31;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:551;}i:32;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:551;}i:33;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:551;}i:34;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:551;}i:35;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:26:" Install the agent package";}i:2;i:557;}i:36;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:52:"sudo rpm -Uvh /var/tmp/lpar2rrd-agent-5.05-8.ppc.rpm";i:1;N;i:2;N;}i:2;i:588;}i:37;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:588;}i:38;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:7:"Cleanup";}i:2;i:648;}i:39;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:660;}i:40;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:41:"rm /var/tmp/lpar2rrd-agent-5.05-8.ppc.rpm";i:1;N;i:2;N;}i:2;i:660;}i:41;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:709;}i:42;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:709;}i:43;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:709;}i:44;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:709;}i:45;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:26:" Add the script to crontab";}i:2;i:715;}i:46;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:165:"cat << EOF | sudo tee /var/spool/cron/crontabs/lpar2rrd
* * * * * /usr/bin/perl /opt/lpar2rrd-agent/lpar2rrd-agent.pl lpar2rrd > /var/tmp/lpar2rrd-agent.out 2>&1
EOF";i:1;N;i:2;N;}i:2;i:746;}i:47;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:919;}i:48;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:919;}i:49;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:919;}i:50;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:919;}i:51;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:" Refresh cron";}i:2;i:925;}i:52;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:74:"ps -ef | grep cron | grep -v grep | awk '{print $2}' | xargs -n1 sudo kill";i:1;N;i:2;N;}i:2;i:943;}i:53;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1025;}i:54;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1025;}i:55;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1025;}i:56;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1025;}i:57;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1025;}i:58;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1025;}i:59;a:3:{i:0;s:12:"document_end";i:1;a:0:{}i:2;i:1025;}}