a:274:{i:0;a:3:{i:0;s:14:"document_start";i:1;a:0:{}i:2;i:0;}i:1;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:61:"Pure Storage database refresh ( AIX ) - generic documentation";i:1;i:1;i:2;i:1;}i:2;i:1;}i:2;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1;}i:3;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:77;}i:4;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:77;}i:5;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:77;}i:6;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:72:" Find out source and target databases, storage arrays and document them ";}i:2;i:81;}i:7;a:3:{i:0;s:6:"entity";i:1;a:1:{i:0;s:3:"...";}i:2;i:153;}i:8;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:156;}i:9;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:156;}i:10;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:156;}i:11;a:3:{i:0;s:10:"table_open";i:1;a:3:{i:0;i:5;i:1;i:2;i:2;i:158;}i:2;i:157;}i:12;a:3:{i:0;s:13:"tablerow_open";i:1;a:0:{}i:2;i:157;}i:13;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:157;}i:14;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Source System";}i:2;i:159;}i:15;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:172;}i:16;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:172;}i:17;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:15:"Source SID     ";}i:2;i:173;}i:18;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:188;}i:19;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:188;}i:20;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Storage Array";}i:2;i:189;}i:21;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:202;}i:22;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:202;}i:23;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Target System";}i:2;i:203;}i:24;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:216;}i:25;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:216;}i:26;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:10:"Target SID";}i:2;i:217;}i:27;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:227;}i:28;a:3:{i:0;s:14:"tablerow_close";i:1;a:0:{}i:2;i:228;}i:29;a:3:{i:0;s:13:"tablerow_open";i:1;a:0:{}i:2;i:228;}i:30;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:228;}i:31;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<SRCDBSRVR>  ";}i:2;i:230;}i:32;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:243;}i:33;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:243;}i:34;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:15:"<SRCSID>       ";}i:2;i:244;}i:35;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:259;}i:36;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:259;}i:37;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<STGARRAY>   ";}i:2;i:260;}i:38;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:273;}i:39;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:273;}i:40;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<TGTDBSRVR>  ";}i:2;i:274;}i:41;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:287;}i:42;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:287;}i:43;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:10:"<TGTSID>  ";}i:2;i:288;}i:44;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:298;}i:45;a:3:{i:0;s:14:"tablerow_close";i:1;a:0:{}i:2;i:299;}i:46;a:3:{i:0;s:11:"table_close";i:1;a:1:{i:0;i:299;}i:2;i:299;}i:47;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:301;}i:48;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:25:"Snapshot Steps & Schedule";i:1;i:1;i:2;i:301;}i:2;i:301;}i:49;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:301;}i:50;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:341;}i:51;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:341;}i:52;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:341;}i:53;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:45:" Login to the storage management admin server";}i:2;i:345;}i:54;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:17:"ssh pcdcstglxap01";i:1;N;i:2;N;}i:2;i:395;}i:55;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:420;}i:56;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:420;}i:57;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:420;}i:58;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:420;}i:59;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:29:" Set a variable to store the ";}i:2;i:424;}i:60;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DNS";}i:2;i:453;}i:61;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:18:" name to the array";}i:2;i:456;}i:62;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:25:"export ARRAY="<dns_name>"";i:1;N;i:2;N;}i:2;i:479;}i:63;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:512;}i:64;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:512;}i:65;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:512;}i:66;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:512;}i:67;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:61:" Set a variable to store the hostname to the source DB server";}i:2;i:516;}i:68;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:30:"export SRCDBSRVR="<SRCDBSRVR>"";i:1;N;i:2;N;}i:2;i:582;}i:69;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:620;}i:70;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:620;}i:71;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:620;}i:72;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:620;}i:73;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:50:" Set a variable to store the Protection Group Name";}i:2;i:624;}i:74;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:33:"export PG="tmp-<meaningful name>"";i:1;N;i:2;N;}i:2;i:679;}i:75;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:720;}i:76;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:720;}i:77;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:720;}i:78;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:720;}i:79;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:38:" Point the variable to connect to Pure";}i:2;i:724;}i:80;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:30:"export SSH2PURE="ssh ${ARRAY}"";i:1;N;i:2;N;}i:2;i:767;}i:81;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:805;}i:82;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:805;}i:83;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:805;}i:84;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:805;}i:85;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:28:" Create the Protection group";}i:2;i:809;}i:86;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:65:"${SSH2PURE} purepgroup create --hostlist cdc-h-${SRCDBSRVR} ${PG}";i:1;N;i:2;N;}i:2;i:842;}i:87;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:915;}i:88;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:915;}i:89;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:915;}i:90;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:915;}i:91;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:" Take a snapshot";}i:2;i:919;}i:92;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:55:"${SSH2PURE} purepgroup snap --suffix crashconsist ${PG}";i:1;N;i:2;N;}i:2;i:940;}i:93;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1003;}i:94;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1003;}i:95;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1003;}i:96;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1003;}i:97;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:24:" Confirm to Unix team / ";}i:2;i:1007;}i:98;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:1031;}i:99;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:32:" team that the snapshot is done.";}i:2;i:1034;}i:100;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1066;}i:101;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1066;}i:102;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1066;}i:103;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1068;}i:104;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:34:"Copy snapshots and present storage";i:1;i:1;i:2;i:1068;}i:2;i:1068;}i:105;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1068;}i:106;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1068;}i:107;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:53:"<hidden click here if you want to see the Unix steps>";}i:2;i:1118;}i:108;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1171;}i:109;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1171;}i:110;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:1173;}i:111;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:12:" Unix tasks ";}i:2;i:1175;}i:112;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:1187;}i:113;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:1189;}i:114;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1190;}i:115;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1190;}i:116;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1190;}i:117;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1190;}i:118;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:25:" The requirement is that ";}i:2;i:1194;}i:119;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:1219;}i:120;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" team need all filesystems mounted underneath ";}i:2;i:1222;}i:121;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:1268;}i:122;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"/oracle/<SID>";}i:2;i:1270;}i:123;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:1283;}i:124;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:31:" to be refreshed to QA systems.";}i:2;i:1285;}i:125;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1316;}i:126;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1316;}i:127;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1316;}i:128;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1316;}i:129;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:101:" Unix needs to send us a list of source volumes that needs to copied and presented to target systems.";}i:2;i:1320;}i:130;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1421;}i:131;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1421;}i:132;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:1421;}i:133;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1421;}i:134;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" Execute these steps on all the source systems";}i:2;i:1427;}i:135;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1473;}i:136;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1473;}i:137;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:3;}i:2;i:1473;}i:138;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1473;}i:139;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" Login to <SRCDBSRVR> and export this variable";}i:2;i:1481;}i:140;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:19:"export SID=<SRCSID>";i:1;N;i:2;N;}i:2;i:1532;}i:141;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1559;}i:142;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1559;}i:143;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1559;}i:144;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1559;}i:145;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:1559;}i:146;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1559;}i:147;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:36:" On each system, perform these steps";}i:2;i:1565;}i:148;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:383:"sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.1
> vglist
for fs in $(df -k | grep /oracle/${SID} | grep -v : | awk '{print $NF}' )
do
   echo "Working on ${fs} "
   LV=$(df -k ${fs} | grep -v ^Filesystem | awk '{print $1}' | sed "s;/dev/;;g")
   lslv ${LV} | head -1 | awk '{print $NF}' >> vglist
done

for VG in $(cat vglist | sort -u )
do
   cat lsvpcfg.out.1 | grep ${VG}$
done";i:1;N;i:2;N;}i:2;i:1606;}i:149;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1606;}i:150;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:87:"Send this list to Storage team and ask them to present the snapshot to Target system(s)";}i:2;i:1997;}i:151;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2084;}i:152;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2084;}i:153;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2084;}i:154;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:2084;}i:155;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2084;}i:156;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:2084;}i:157;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2084;}i:158;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:9:"</hidden>";}i:2;i:2086;}i:159;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2095;}i:160;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2095;}i:161;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:2098;}i:162;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:20:" Storage team tasks ";}i:2;i:2100;}i:163;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:2120;}i:164;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:2122;}i:165;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2123;}i:166;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:2123;}i:167;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2123;}i:168;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2123;}i:169;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:30:" Login to storage jump server ";}i:2;i:2127;}i:170;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:2157;}i:171;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"pscsstglxap01";}i:2;i:2159;}i:172;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:2172;}i:173;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2174;}i:174;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2174;}i:175;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2174;}i:176;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2174;}i:177;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:23:" Export these variables";}i:2;i:2178;}i:178;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:135:"export PG="tmp-<meaningful name>"
export suffix="crashconsist"
export SID=<SRCSID>
export ARRAY=<STGARRAY>
export TGTDBSRVR=<TGTDBSRVR>";i:1;N;i:2;N;}i:2;i:2206;}i:179;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2349;}i:180;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2349;}i:181;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2349;}i:182;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2349;}i:183;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:47:" Get a list of all volumes on the storage array";}i:2;i:2353;}i:184;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:54:"ssh ${ARRAY} purevol list --notitle > ${ARRAY}.volumes";i:1;N;i:2;N;}i:2;i:2405;}i:185;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2467;}i:186;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2467;}i:187;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2467;}i:188;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2467;}i:189;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:35:" Save the list of LUNs sent by Unix";}i:2;i:2471;}i:190;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:17:"vi ${SID}.devices";i:1;N;i:2;N;}i:2;i:2511;}i:191;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2536;}i:192;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2536;}i:193;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2536;}i:194;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2536;}i:195;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:24:" Find out source volumes";}i:2;i:2540;}i:196;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:191:"awk -F: '{print $3$4}' ${SID}.devices | sed "s;PURE-FLASH-;;g"           > ${SID}.devices.serial
grep -wf ${SID}.devices.serial ${ARRAY}.volumes | awk '{print $1}'    > ${SID}.devices.volumes";i:1;N;i:2;N;}i:2;i:2569;}i:197;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2768;}i:198;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2768;}i:199;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2768;}i:200;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2768;}i:201;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:27:" Define the next LUN number";}i:2;i:2772;}i:202;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:119:"export LUN=$(ssh ${ARRAY} purehost listobj --type vol cdc-h-${TGTDBSRVR} | sort | tail -1 | awk -F "_" '{print $NF+1}')";i:1;N;i:2;N;}i:2;i:2804;}i:203;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2931;}i:204;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2931;}i:205;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2931;}i:206;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2931;}i:207;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:26:" Copy snapshots to volumes";}i:2;i:2935;}i:208;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:250:"export TGTVOLUMES=""
for volume in $(cat ${SID}.devices.volumes )
do
   ssh ${ARRAY} purevol copy ${PG}.${suffix}.${volume} cdc-h-${TGTDBSRVR}_${lun}
   export LUN=$(echo "${lun} +1" | bc )
   TGTVOLUMES="${TGTVOLUMES} cdc-h-${TGTDBSRVR}_${LUN}"
done";i:1;N;i:2;N;}i:2;i:2966;}i:209;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3224;}i:210;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3224;}i:211;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3224;}i:212;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3224;}i:213;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:34:" Present the volumes to QA systems";}i:2;i:3228;}i:214;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3262;}i:215;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:3262;}i:216;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:3262;}i:217;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3262;}i:218;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:69:" Check the volumes to make sure they aren't allocated to another host";}i:2;i:3268;}i:219;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:111:"export QUERY=$(echo ${TGTVOLUMES} | sed "s; ;,;g" | sed "s;,$;;g")
ssh ${ARRAY} purevol listobj --host ${QUERY}";i:1;N;i:2;N;}i:2;i:3342;}i:220;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3461;}i:221;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3461;}i:222;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:3461;}i:223;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3461;}i:224;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:39:" Connect the new volumes to target host";}i:2;i:3467;}i:225;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:68:"ssh ${ARRAY} purevol connect --host cdc-h-${TGTDBSRVR} ${TGTVOLUMES}";i:1;N;i:2;N;}i:2;i:3511;}i:226;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3587;}i:227;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3587;}i:228;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:3587;}i:229;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3587;}i:230;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:3587;}i:231;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3587;}i:232;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:54:"<hidden click here if you want to see the Unix steps>
";}i:2;i:3589;}i:233;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:3643;}i:234;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:12:" Unix steps ";}i:2;i:3645;}i:235;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:3657;}i:236;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:3659;}i:237;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:3660;}i:238;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:3660;}i:239;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3660;}i:240;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3660;}i:241;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:27:" Login to the target system";}i:2;i:3664;}i:242;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:60:"export SRCSID=PTA
export TGTSID=FTA
export SRCHOST=<SRCHOST>";i:1;N;i:2;N;}i:2;i:3696;}i:243;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3764;}i:244;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3764;}i:245;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3764;}i:246;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3764;}i:247;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:39:" Dismount all filesystems that matches ";}i:2;i:3768;}i:248;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:3807;}i:249;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:"/oracle/<TGTSID>";}i:2;i:3809;}i:250;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:3825;}i:251;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:1038:"for fs in $(df -k | grep /oracle/${TGTSID} |grep -v : | awk '{print $NF}' | sort -r )
do
   echo "Working on ${fs} .. "
   sudo umount ${fs}
   sudo chfs -m /OLD${fs} ${fs}
done   

sudo lsvpcfg.sh > lsvpcfg.out.1

sudo cfgmgr

sudo lsvpcfg.sh > lsvpcfg.out.2

scp ${SRCHOST}:vglist vglist

ssh ${SRCHOST} lspv > lspv.${SRCHOST}

for VG in $(cat vglist | sort -u | sort )
do
   echo "Working on ${VG} "
   grep -w ${VG} lspv.${SRCHOST} | awk '{print $2}' > ${VG}.pvids
   PVs=$(lspv | grep -wf ${VG}.pvids | awk '{print $1}' | tr "\n" " " )
   sudo recreatevg -y ${TGTSID}${VG} -Y cpy -L/cpy ${PVs}
   for fs in $(lsvgfs ${TGTSID}${VG} | sort )
   do
      echo "Working on ${TGTSID}${VG} - ${fs} "
      echo ${fs} | grep "/oracle/${SRCSID}" > /dev/null 2>&1
      if [ ${?} -eq 0 ]
      then
         sudo fsck -y ${fs}
         newfs=$(echo ${fs} | sed -e "s;/cpy;;g" -e "s;${SRCSID};${TGTSID};g" )
         sudo chfs -m ${newfs} ${fs}
         sudo mount ${newfs}
      fi
   done
done

sudo ln -s /oracle/${TGTSID} /oracle/${SRCSID}";i:1;N;i:2;N;}i:2;i:3832;}i:252;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3832;}i:253;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:12:"Handover to ";}i:2;i:4878;}i:254;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:4890;}i:255;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:4893;}i:256;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:4893;}i:257;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:4893;}i:258;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:4893;}i:259;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:4893;}i:260;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:9:"</hidden>";}i:2;i:4895;}i:261;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:4904;}i:262;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:4907;}i:263;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:13:"Cleanup tasks";i:1;i:1;i:2;i:4907;}i:2;i:4907;}i:264;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:4907;}i:265;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:4935;}i:266;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:4935;}i:267;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:4935;}i:268;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:101:" Unix team to remove all unwanted filesystems and disks and send the list of volumes to Storage team.";}i:2;i:4939;}i:269;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:5040;}i:270;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:5040;}i:271;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:5040;}i:272;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:5040;}i:273;a:3:{i:0;s:12:"document_end";i:1;a:0:{}i:2;i:5040;}}