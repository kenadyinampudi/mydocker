a:276:{i:0;a:3:{i:0;s:14:"document_start";i:1;a:0:{}i:2;i:0;}i:1;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:61:"Pure Storage database refresh ( AIX ) - generic documentation";i:1;i:1;i:2;i:1;}i:2;i:1;}i:2;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1;}i:3;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1;}i:4;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:77;}i:5;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:98:" Graciously provided by Kapil Koroth - Storage Team   Note:Storage Tasks left in for completeness ";}i:2;i:79;}i:6;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:177;}i:7;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:179;}i:8;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:180;}i:9;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:180;}i:10;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:180;}i:11;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:180;}i:12;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:72:" Find out source and target databases, storage arrays and document them ";}i:2;i:184;}i:13;a:3:{i:0;s:6:"entity";i:1;a:1:{i:0;s:3:"...";}i:2;i:256;}i:14;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:259;}i:15;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:259;}i:16;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:259;}i:17;a:3:{i:0;s:10:"table_open";i:1;a:3:{i:0;i:5;i:1;i:2;i:2;i:261;}i:2;i:260;}i:18;a:3:{i:0;s:13:"tablerow_open";i:1;a:0:{}i:2;i:260;}i:19;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:260;}i:20;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Source System";}i:2;i:262;}i:21;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:275;}i:22;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:275;}i:23;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:15:"Source SID     ";}i:2;i:276;}i:24;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:291;}i:25;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:291;}i:26;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Storage Array";}i:2;i:292;}i:27;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:305;}i:28;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:305;}i:29;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"Target System";}i:2;i:306;}i:30;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:319;}i:31;a:3:{i:0;s:16:"tableheader_open";i:1;a:3:{i:0;i:1;i:1;N;i:2;i:1;}i:2;i:319;}i:32;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:10:"Target SID";}i:2;i:320;}i:33;a:3:{i:0;s:17:"tableheader_close";i:1;a:0:{}i:2;i:330;}i:34;a:3:{i:0;s:14:"tablerow_close";i:1;a:0:{}i:2;i:331;}i:35;a:3:{i:0;s:13:"tablerow_open";i:1;a:0:{}i:2;i:331;}i:36;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:331;}i:37;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<SRCDBSRVR>  ";}i:2;i:333;}i:38;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:346;}i:39;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:346;}i:40;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:15:"<SRCSID>       ";}i:2;i:347;}i:41;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:362;}i:42;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:362;}i:43;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<STGARRAY>   ";}i:2;i:363;}i:44;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:376;}i:45;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:376;}i:46;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"<TGTDBSRVR>  ";}i:2;i:377;}i:47;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:390;}i:48;a:3:{i:0;s:14:"tablecell_open";i:1;a:3:{i:0;i:1;i:1;s:4:"left";i:2;i:1;}i:2;i:390;}i:49;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:10:"<TGTSID>  ";}i:2;i:391;}i:50;a:3:{i:0;s:15:"tablecell_close";i:1;a:0:{}i:2;i:401;}i:51;a:3:{i:0;s:14:"tablerow_close";i:1;a:0:{}i:2;i:402;}i:52;a:3:{i:0;s:11:"table_close";i:1;a:1:{i:0;i:402;}i:2;i:402;}i:53;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:404;}i:54;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:25:"Snapshot Steps & Schedule";i:1;i:1;i:2;i:404;}i:2;i:404;}i:55;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:404;}i:56;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:444;}i:57;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:444;}i:58;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:444;}i:59;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:45:" Login to the storage management admin server";}i:2;i:448;}i:60;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:17:"ssh pcdcstglxap01";i:1;N;i:2;N;}i:2;i:498;}i:61;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:523;}i:62;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:523;}i:63;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:523;}i:64;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:523;}i:65;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:29:" Set a variable to store the ";}i:2;i:527;}i:66;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DNS";}i:2;i:556;}i:67;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:18:" name to the array";}i:2;i:559;}i:68;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:25:"export ARRAY="<dns_name>"";i:1;N;i:2;N;}i:2;i:582;}i:69;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:615;}i:70;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:615;}i:71;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:615;}i:72;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:615;}i:73;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:61:" Set a variable to store the hostname to the source DB server";}i:2;i:619;}i:74;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:30:"export SRCDBSRVR="<SRCDBSRVR>"";i:1;N;i:2;N;}i:2;i:685;}i:75;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:723;}i:76;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:723;}i:77;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:723;}i:78;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:723;}i:79;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:50:" Set a variable to store the Protection Group Name";}i:2;i:727;}i:80;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:33:"export PG="tmp-<meaningful name>"";i:1;N;i:2;N;}i:2;i:782;}i:81;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:823;}i:82;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:823;}i:83;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:823;}i:84;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:823;}i:85;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:38:" Point the variable to connect to Pure";}i:2;i:827;}i:86;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:30:"export SSH2PURE="ssh ${ARRAY}"";i:1;N;i:2;N;}i:2;i:870;}i:87;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:908;}i:88;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:908;}i:89;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:908;}i:90;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:908;}i:91;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:28:" Create the Protection group";}i:2;i:912;}i:92;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:65:"${SSH2PURE} purepgroup create --hostlist cdc-h-${SRCDBSRVR} ${PG}";i:1;N;i:2;N;}i:2;i:945;}i:93;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1018;}i:94;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1018;}i:95;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1018;}i:96;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1018;}i:97;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:" Take a snapshot";}i:2;i:1022;}i:98;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:55:"${SSH2PURE} purepgroup snap --suffix crashconsist ${PG}";i:1;N;i:2;N;}i:2;i:1043;}i:99;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1106;}i:100;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1106;}i:101;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1106;}i:102;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1106;}i:103;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:24:" Confirm to Unix team / ";}i:2;i:1110;}i:104;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:1134;}i:105;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:32:" team that the snapshot is done.";}i:2;i:1137;}i:106;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1169;}i:107;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1169;}i:108;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1169;}i:109;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1171;}i:110;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:34:"Copy snapshots and present storage";i:1;i:1;i:2;i:1171;}i:2;i:1171;}i:111;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1171;}i:112;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:1221;}i:113;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:31:"**FIRST UNIX TASKS BEGIN HERE**";i:1;i:1;i:2;i:1221;}i:2;i:1221;}i:114;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:1221;}i:115;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1221;}i:116;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:1269;}i:117;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:12:" Unix tasks ";}i:2;i:1271;}i:118;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:1283;}i:119;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:1285;}i:120;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:1286;}i:121;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1286;}i:122;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1286;}i:123;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1286;}i:124;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:25:" The requirement is that ";}i:2;i:1290;}i:125;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:1315;}i:126;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" team need all filesystems mounted underneath ";}i:2;i:1318;}i:127;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:1364;}i:128;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"/oracle/<SID>";}i:2;i:1366;}i:129;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:1379;}i:130;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:31:" to be refreshed to QA systems.";}i:2;i:1381;}i:131;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1412;}i:132;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1412;}i:133;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:1412;}i:134;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1412;}i:135;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:101:" Unix needs to send us a list of source volumes that needs to copied and presented to target systems.";}i:2;i:1416;}i:136;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1517;}i:137;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1517;}i:138;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:1517;}i:139;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1517;}i:140;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" Execute these steps on all the source systems";}i:2;i:1523;}i:141;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1569;}i:142;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:1569;}i:143;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:3;}i:2;i:1569;}i:144;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1569;}i:145;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:46:" Login to <SRCDBSRVR> and export this variable";}i:2;i:1577;}i:146;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:19:"export SID=<SRCSID>";i:1;N;i:2;N;}i:2;i:1628;}i:147;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:1655;}i:148;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1655;}i:149;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:1655;}i:150;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:1655;}i:151;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:1655;}i:152;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:1655;}i:153;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:36:" On each system, perform these steps";}i:2;i:1661;}i:154;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:383:"sudo /usr/local/scripts/lsvpcfg.sh > lsvpcfg.out.1
> vglist
for fs in $(df -k | grep /oracle/${SID} | grep -v : | awk '{print $NF}' )
do
   echo "Working on ${fs} "
   LV=$(df -k ${fs} | grep -v ^Filesystem | awk '{print $1}' | sed "s;/dev/;;g")
   lslv ${LV} | head -1 | awk '{print $NF}' >> vglist
done

for VG in $(cat vglist | sort -u )
do
   cat lsvpcfg.out.1 | grep ${VG}$
done";i:1;N;i:2;N;}i:2;i:1702;}i:155;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:1702;}i:156;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:87:"Send this list to Storage team and ask them to present the snapshot to Target system(s)";}i:2;i:2093;}i:157;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2180;}i:158;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2180;}i:159;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2180;}i:160;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:2180;}i:161;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2180;}i:162;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:2180;}i:163;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:2181;}i:164;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:29:"**FIRST UNIX TASKS END HERE**";i:1;i:1;i:2;i:2181;}i:2;i:2181;}i:165;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:2181;}i:166;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:2181;}i:167;a:3:{i:0;s:11:"strong_open";i:1;a:0:{}i:2;i:2228;}i:168;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:20:" Storage team tasks ";}i:2;i:2230;}i:169;a:3:{i:0;s:12:"strong_close";i:1;a:0:{}i:2;i:2250;}i:170;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:0:"";}i:2;i:2252;}i:171;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:2253;}i:172;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:2253;}i:173;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2253;}i:174;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2253;}i:175;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:30:" Login to storage jump server ";}i:2;i:2257;}i:176;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:2287;}i:177;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:13:"pscsstglxap01";}i:2;i:2289;}i:178;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:2302;}i:179;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2304;}i:180;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2304;}i:181;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2304;}i:182;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2304;}i:183;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:23:" Export these variables";}i:2;i:2308;}i:184;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:135:"export PG="tmp-<meaningful name>"
export suffix="crashconsist"
export SID=<SRCSID>
export ARRAY=<STGARRAY>
export TGTDBSRVR=<TGTDBSRVR>";i:1;N;i:2;N;}i:2;i:2336;}i:185;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2479;}i:186;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2479;}i:187;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2479;}i:188;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2479;}i:189;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:47:" Get a list of all volumes on the storage array";}i:2;i:2483;}i:190;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:54:"ssh ${ARRAY} purevol list --notitle > ${ARRAY}.volumes";i:1;N;i:2;N;}i:2;i:2535;}i:191;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2597;}i:192;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2597;}i:193;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2597;}i:194;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2597;}i:195;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:35:" Save the list of LUNs sent by Unix";}i:2;i:2601;}i:196;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:17:"vi ${SID}.devices";i:1;N;i:2;N;}i:2;i:2641;}i:197;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2666;}i:198;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2666;}i:199;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2666;}i:200;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2666;}i:201;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:24:" Find out source volumes";}i:2;i:2670;}i:202;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:191:"awk -F: '{print $3$4}' ${SID}.devices | sed "s;PURE-FLASH-;;g"           > ${SID}.devices.serial
grep -wf ${SID}.devices.serial ${ARRAY}.volumes | awk '{print $1}'    > ${SID}.devices.volumes";i:1;N;i:2;N;}i:2;i:2699;}i:203;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:2898;}i:204;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:2898;}i:205;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:2898;}i:206;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:2898;}i:207;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:27:" Define the next LUN number";}i:2;i:2902;}i:208;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:119:"export LUN=$(ssh ${ARRAY} purehost listobj --type vol cdc-h-${TGTDBSRVR} | sort | tail -1 | awk -F "_" '{print $NF+1}')";i:1;N;i:2;N;}i:2;i:2934;}i:209;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3061;}i:210;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3061;}i:211;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3061;}i:212;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3061;}i:213;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:26:" Copy snapshots to volumes";}i:2;i:3065;}i:214;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:250:"export TGTVOLUMES=""
for volume in $(cat ${SID}.devices.volumes )
do
   ssh ${ARRAY} purevol copy ${PG}.${suffix}.${volume} cdc-h-${TGTDBSRVR}_${lun}
   export LUN=$(echo "${lun} +1" | bc )
   TGTVOLUMES="${TGTVOLUMES} cdc-h-${TGTDBSRVR}_${LUN}"
done";i:1;N;i:2;N;}i:2;i:3096;}i:215;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3354;}i:216;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3354;}i:217;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3354;}i:218;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3354;}i:219;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:34:" Present the volumes to QA systems";}i:2;i:3358;}i:220;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3392;}i:221;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:3392;}i:222;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:3392;}i:223;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3392;}i:224;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:69:" Check the volumes to make sure they aren't allocated to another host";}i:2;i:3398;}i:225;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:111:"export QUERY=$(echo ${TGTVOLUMES} | sed "s; ;,;g" | sed "s;,$;;g")
ssh ${ARRAY} purevol listobj --host ${QUERY}";i:1;N;i:2;N;}i:2;i:3472;}i:226;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3591;}i:227;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3591;}i:228;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:2;}i:2;i:3591;}i:229;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3591;}i:230;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:39:" Connect the new volumes to target host";}i:2;i:3597;}i:231;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:68:"ssh ${ARRAY} purevol connect --host cdc-h-${TGTDBSRVR} ${TGTVOLUMES}";i:1;N;i:2;N;}i:2;i:3641;}i:232;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3717;}i:233;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3717;}i:234;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:3717;}i:235;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3717;}i:236;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:3717;}i:237;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:3719;}i:238;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:33:"**SECOND  UNIX TASKS BEGIN HERE**";i:1;i:1;i:2;i:3719;}i:2;i:3719;}i:239;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:3719;}i:240;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:3768;}i:241;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3768;}i:242;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3768;}i:243;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:27:" Login to the target system";}i:2;i:3772;}i:244;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:60:"export SRCSID=PTA
export TGTSID=FTA
export SRCHOST=<SRCHOST>";i:1;N;i:2;N;}i:2;i:3804;}i:245;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:3872;}i:246;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:3872;}i:247;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:3872;}i:248;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:3872;}i:249;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:39:" Dismount all filesystems that matches ";}i:2;i:3876;}i:250;a:3:{i:0;s:14:"monospace_open";i:1;a:0:{}i:2;i:3915;}i:251;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:16:"/oracle/<TGTSID>";}i:2;i:3917;}i:252;a:3:{i:0;s:15:"monospace_close";i:1;a:0:{}i:2;i:3933;}i:253;a:3:{i:0;s:4:"code";i:1;a:3:{i:0;s:1038:"for fs in $(df -k | grep /oracle/${TGTSID} |grep -v : | awk '{print $NF}' | sort -r )
do
   echo "Working on ${fs} .. "
   sudo umount ${fs}
   sudo chfs -m /OLD${fs} ${fs}
done   

sudo lsvpcfg.sh > lsvpcfg.out.1

sudo cfgmgr

sudo lsvpcfg.sh > lsvpcfg.out.2

scp ${SRCHOST}:vglist vglist

ssh ${SRCHOST} lspv > lspv.${SRCHOST}

for VG in $(cat vglist | sort -u | sort )
do
   echo "Working on ${VG} "
   grep -w ${VG} lspv.${SRCHOST} | awk '{print $2}' > ${VG}.pvids
   PVs=$(lspv | grep -wf ${VG}.pvids | awk '{print $1}' | tr "\n" " " )
   sudo recreatevg -y ${TGTSID}${VG} -Y cpy -L/cpy ${PVs}
   for fs in $(lsvgfs ${TGTSID}${VG} | sort )
   do
      echo "Working on ${TGTSID}${VG} - ${fs} "
      echo ${fs} | grep "/oracle/${SRCSID}" > /dev/null 2>&1
      if [ ${?} -eq 0 ]
      then
         sudo fsck -y ${fs}
         newfs=$(echo ${fs} | sed -e "s;/cpy;;g" -e "s;${SRCSID};${TGTSID};g" )
         sudo chfs -m ${newfs} ${fs}
         sudo mount ${newfs}
      fi
   done
done

sudo ln -s /oracle/${TGTSID} /oracle/${SRCSID}";i:1;N;i:2;N;}i:2;i:3940;}i:254;a:3:{i:0;s:6:"p_open";i:1;a:0:{}i:2;i:3940;}i:255;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:12:"Handover to ";}i:2;i:4986;}i:256;a:3:{i:0;s:7:"acronym";i:1;a:1:{i:0;s:3:"DBA";}i:2;i:4998;}i:257;a:3:{i:0;s:7:"p_close";i:1;a:0:{}i:2;i:5001;}i:258;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:5001;}i:259;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:5001;}i:260;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:5001;}i:261;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:5003;}i:262;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:33:"**SECOND  UNIX TASKS BEGIN HERE**";i:1;i:1;i:2;i:5003;}i:2;i:5003;}i:263;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:5003;}i:264;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:5053;}i:265;a:3:{i:0;s:6:"header";i:1;a:3:{i:0;s:13:"Cleanup tasks";i:1;i:1;i:2;i:5053;}i:2;i:5053;}i:266;a:3:{i:0;s:12:"section_open";i:1;a:1:{i:0;i:1;}i:2;i:5053;}i:267;a:3:{i:0;s:10:"listo_open";i:1;a:0:{}i:2;i:5081;}i:268;a:3:{i:0;s:13:"listitem_open";i:1;a:1:{i:0;i:1;}i:2;i:5081;}i:269;a:3:{i:0;s:16:"listcontent_open";i:1;a:0:{}i:2;i:5081;}i:270;a:3:{i:0;s:5:"cdata";i:1;a:1:{i:0;s:101:" Unix team to remove all unwanted filesystems and disks and send the list of volumes to Storage team.";}i:2;i:5085;}i:271;a:3:{i:0;s:17:"listcontent_close";i:1;a:0:{}i:2;i:5186;}i:272;a:3:{i:0;s:14:"listitem_close";i:1;a:0:{}i:2;i:5186;}i:273;a:3:{i:0;s:11:"listo_close";i:1;a:0:{}i:2;i:5186;}i:274;a:3:{i:0;s:13:"section_close";i:1;a:0:{}i:2;i:5186;}i:275;a:3:{i:0;s:12:"document_end";i:1;a:0:{}i:2;i:5186;}}